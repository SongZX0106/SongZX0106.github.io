<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>vite2+Vue3实践 | SZX的开发笔记</title><meta name="keywords" content="Vue"><meta name="author" content="SZX"><meta name="copyright" content="SZX"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="创建Vite2项目Vite官方文档 安装123$ npm init @vitejs&#x2F;appor$ yarn create @vitejs&#x2F;app  然后按照提示进行操作即可创建出来一个Vite项目。 使用12npm installnpm run dev  启动后可以看到如下图  Vite2的主要变化起别名在 vite.config.js 文件中设置 alias 对象，前面key为别名，后面为对应的">
<meta property="og:type" content="article">
<meta property="og:title" content="vite2+Vue3实践">
<meta property="og:url" content="https://songzx0106.github.io/Vue/Vite2/index.html">
<meta property="og:site_name" content="SZX的开发笔记">
<meta property="og:description" content="创建Vite2项目Vite官方文档 安装123$ npm init @vitejs&#x2F;appor$ yarn create @vitejs&#x2F;app  然后按照提示进行操作即可创建出来一个Vite项目。 使用12npm installnpm run dev  启动后可以看到如下图  Vite2的主要变化起别名在 vite.config.js 文件中设置 alias 对象，前面key为别名，后面为对应的">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://songzx0106.github.io/images/ys20.jpg">
<meta property="article:published_time" content="2021-05-03T16:00:00.000Z">
<meta property="article:modified_time" content="2022-07-28T04:34:19.067Z">
<meta property="article:author" content="SZX">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://songzx0106.github.io/images/ys20.jpg"><link rel="shortcut icon" href="/images/favicon.png"><link rel="canonical" href="https://songzx0106.github.io/Vue/Vite2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":5000,"languages":{"author":"作者: SZX","link":"链接: ","source":"来源: SZX的开发笔记","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://szx-bucket1.fsh.bcebos.com/js/jquery.min.js',
    justifiedGallery: {
      js: 'https://fastly.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://fastly.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://szx-bucket1.fsh.bcebos.com/js/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'vite2+Vue3实践',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-07-28 12:34:19'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="//at.alicdn.com/t/font_2467717_jlvw8717b8.css"><meta name="generator" content="Hexo 5.4.2"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">113</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">33</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/images/ys20.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">SZX的开发笔记</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">vite2+Vue3实践</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-05-03T16:00:00.000Z" title="发表于 2021-05-04 00:00:00">2021-05-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-07-28T04:34:19.067Z" title="更新于 2022-07-28 12:34:19">2022-07-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/vite/">vite</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>31分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="vite2+Vue3实践"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="创建Vite2项目"><a href="#创建Vite2项目" class="headerlink" title="创建Vite2项目"></a>创建Vite2项目</h2><p><a target="_blank" rel="noopener" href="https://vitejs.dev/">Vite官方文档</a></p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm init @vitejs/app</span></span><br><span class="line">or</span><br><span class="line"><span class="meta">$</span><span class="bash"> yarn create @vitejs/app</span></span><br></pre></td></tr></table></figure>

<p>然后按照提示进行操作即可创建出来一个Vite项目。</p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<p>启动后可以看到如下图</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/1.png" alt="image-20210425100205454"></p>
<h2 id="Vite2的主要变化"><a href="#Vite2的主要变化" class="headerlink" title="Vite2的主要变化"></a>Vite2的主要变化</h2><h3 id="起别名"><a href="#起别名" class="headerlink" title="起别名"></a>起别名</h3><p>在 vite.config.js 文件中设置 alias 对象，前面key为别名，后面为对应的地址</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  defineConfig</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&quot;path&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineConfig(&#123;</span><br><span class="line">  alias: &#123;</span><br><span class="line">    <span class="string">&quot;@&quot;</span>: path.resolve(__dirname, <span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">    <span class="string">&quot;comp&quot;</span>: path.resolve(__dirname, <span class="string">&#x27;src/components&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;public&#x27;</span>: path.resolve(__dirname, <span class="string">&#x27;public&#x27;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [vue()]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Strap-setup-详解"><a href="#Strap-setup-详解" class="headerlink" title="Strap setup 详解"></a>Strap setup 详解</h2><h3 id="直接导入组件"><a href="#直接导入组件" class="headerlink" title="直接导入组件"></a>直接导入组件</h3><p>在 script 标签里添加 setup 属性，然后在里面直接导入要使用的组件即可在页面中使用，无需注册</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;img alt=<span class="string">&quot;Vue logo&quot;</span> src=<span class="string">&quot;./assets/logo.png&quot;</span> /&gt;</span><br><span class="line">  &lt;HelloWorld msg=<span class="string">&quot;Hello Vue 3 + Vite&quot;</span> /&gt;</span><br><span class="line">  &lt;Comp&gt;&lt;/Comp&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">&quot;comp/HelloWorld.vue&quot;</span>;</span><br><span class="line"><span class="comment">// 直接引用组件，无需注册</span></span><br><span class="line"><span class="keyword">import</span> Comp <span class="keyword">from</span> <span class="string">&quot;comp/Compon.vue&quot;</span>;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="获取外界的全部输入"><a href="#获取外界的全部输入" class="headerlink" title="获取外界的全部输入"></a>获取外界的全部输入</h3><p>在子组件中使用 defineProps 方法接收父组件定义的属性，等价于 Vue2 中的 props，在页面中即可展示</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; defineProps, reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="comment">// 外界的输入集合，外界所有的输入都可以通过 props 获取到</span></span><br><span class="line"><span class="keyword">const</span> props =  defineProps(&#123;</span><br><span class="line">  msg: <span class="built_in">String</span>,</span><br><span class="line">  title: <span class="built_in">String</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(props.msg); <span class="comment">//=&gt; Hello Vue 3 + Vite</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>对比 Vue2</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123;title&#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    title: <span class="built_in">String</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>父组件用这个组件并定义属性值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;HelloWorld msg=<span class="string">&quot;Hello Vue 3 + Vite&quot;</span> title=<span class="string">&#x27;你好 Vue3 + Vite&#x27;</span>/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="comment">// 直接引用组件，无需注册</span></span><br><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">&quot;comp/HelloWorld.vue&quot;</span>;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="子组件调用父组件"><a href="#子组件调用父组件" class="headerlink" title="子组件调用父组件"></a>子组件调用父组件</h3><p>在子组件中使用 <code>defineEmit</code> 方法，这个方法接收一个数组，数组里面定义了要派发的事件名称,这个方法返回一个<code>emit</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 点击子组件里面的按钮触发父组件的方法 --&gt;</span><br><span class="line">  &lt;button @click=<span class="string">&quot;onclick&quot;</span>&gt;子调父方法&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; defineProps, reactive, defineEmit &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> emit = defineEmit([<span class="string">&quot;hwclick&quot;</span>]);</span><br><span class="line"><span class="comment">// 点击子组件里面的按钮派发一个 hwclick 方法</span></span><br><span class="line"><span class="keyword">const</span> onclick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  emit(<span class="string">&quot;hwclick&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>父组件接收这个事件名，并触发一个方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;HelloWorld</span><br><span class="line">    msg=<span class="string">&quot;Hello Vue 3 + Vite&quot;</span></span><br><span class="line">    title=<span class="string">&quot;你好 Vue3 + Vite&quot;</span></span><br><span class="line">    @hwclick=<span class="string">&quot;appclick&quot;</span></span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">const</span> appclick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;子组件调用了父组件&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>代码效果</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/2.png" alt="image-20210425110826272"></p>
<h3 id="获取上下文-useContext"><a href="#获取上下文-useContext" class="headerlink" title="获取上下文 useContext"></a>获取上下文 useContext</h3><p>从 vue 中导出 useContext 方法，这个方法返回一个上下文实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; defineProps, reactive, defineEmit, useContext &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="comment">// 导出方法集合</span></span><br><span class="line"><span class="keyword">const</span> emit = defineEmit([<span class="string">&quot;hwclick&quot;</span>]);</span><br><span class="line"><span class="comment">// 获取上下文</span></span><br><span class="line"><span class="keyword">const</span> ctx = useContext();</span><br><span class="line"><span class="comment">// 子组件的点击方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onclick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// console.dir(ctx);</span></span><br><span class="line">  <span class="comment">// emit(&quot;hwclick&quot;);</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 也可以用这种方法调用父组件方法</span></span><br><span class="line">  ctx.emit(<span class="string">&quot;hwclick&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="父组件调用子组件"><a href="#父组件调用子组件" class="headerlink" title="父组件调用子组件"></a>父组件调用子组件</h3><p>在上面使用 useContext 方法可以获取一个上下文，用 ctx 来接收，上下文中有一个 expose 方法，用来导出属性或者方法，外界使用这个组件时可以访问到此组件导出的内容</p>
<p>首先在子组件中定义导出的内容，可以是方法，也可以是值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineProps, reactive, defineEmit, useContext &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取上下文</span></span><br><span class="line"><span class="keyword">const</span> ctx = useContext();</span><br><span class="line"><span class="comment">// 使用上下文中的 expose 导出内容</span></span><br><span class="line">ctx.expose(&#123;</span><br><span class="line">  <span class="function"><span class="title">hwexposefun</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;这段话是父组件调用子组件打印出来的&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  name: <span class="string">&quot;我是helloworld子组件&quot;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在父组件内使用子组件导出的方法,使用 ref 等于 一个变量，然后在 js 中对这个变量进行初始化处理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;HelloWorld</span><br><span class="line">    msg=<span class="string">&quot;Hello Vue 3 + Vite&quot;</span></span><br><span class="line">    title=<span class="string">&quot;你好 Vue3 + Vite&quot;</span></span><br><span class="line">    @hwclick=<span class="string">&quot;appclick&quot;</span></span><br><span class="line">    ref=<span class="string">&quot;hw&quot;</span></span><br><span class="line">  /&gt;</span><br><span class="line">  &lt;button @click=<span class="string">&quot;fatherBtn&quot;</span>&gt;我是父组件的按钮&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">&quot;comp/HelloWorld.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>; <span class="comment">// 从 vue 中导出用到的方法</span></span><br><span class="line"><span class="keyword">let</span> hw = ref(<span class="literal">null</span>); <span class="comment">// 初始化</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fatherBtn</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  hw.value.hwexposefun();  <span class="comment">// 调用子组件的 hwexposefun 方法</span></span><br><span class="line">  <span class="built_in">console</span>.log(hw.value.name); <span class="comment">// =&gt; 我是helloworld子组件</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>效果</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/3.png" alt="image-20210425132034894"></p>
<h2 id="Vue-JSX支持"><a href="#Vue-JSX支持" class="headerlink" title="Vue JSX支持"></a>Vue JSX支持</h2><p>首先安装插件</p>
<p>下面的插件只在 vue 单文件文件中生效</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @vitejs/plugin-vue-jsx</span><br></pre></td></tr></table></figure>

<p>修改 Compon.vue 文件为 jsx 写法</p>
<h3 id="原始写法"><a href="#原始写法" class="headerlink" title="原始写法"></a>原始写法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=<span class="string">&quot;jsx&quot;</span>&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count:<span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">onclick</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params">h</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;&gt;</span><br><span class="line">      &lt;h2&gt;compon&lt;/h2&gt;</span><br><span class="line">      &lt;p onClick=&#123;<span class="built_in">this</span>.onclick&#125;&gt;&#123;<span class="built_in">this</span>.count&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="vue3写法"><a href="#vue3写法" class="headerlink" title="vue3写法"></a>vue3写法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=<span class="string">&quot;jsx&quot;</span>&gt;</span><br><span class="line"><span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// vue3格式写法</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> count = ref(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">let</span> onclick = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">      count.value++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> (</span><br><span class="line">      &lt;&gt;</span><br><span class="line">      &lt;h2&gt;compon&lt;/h2&gt;</span><br><span class="line">      &lt;p onClick=&#123;onclick&#125;&gt;&#123;count.value&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Mock数据"><a href="#Mock数据" class="headerlink" title="Mock数据"></a>Mock数据</h2><p><a target="_blank" rel="noopener" href="https://github.com/anncwb/vite-plugin-mock">github源码地址</a></p>
<h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><p><code>--save</code> 表示运行时依赖，<code>-D</code> 开发时依赖</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mockjs --save</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vite-plugin-mock cross-env -D</span><br></pre></td></tr></table></figure>

<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>在 <code>vite.config.js</code> 文件中引入 <code>vite-plugin-mock</code>，然后在 <code>plugins</code> 数组中添加 <code>mock</code> 服务，如果不使用 <code>ts</code> 要将 <code>supporTs</code> 关掉</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; viteMockServe &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-mock&#x27;</span>;</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">    vue(),</span><br><span class="line">    vuejsx(),</span><br><span class="line">    viteMockServe(&#123;</span><br><span class="line">        supportTs: <span class="literal">false</span></span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>同时注意要修改一下 package.json 文件里面的 dev 环境变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;dev&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=development vite&quot;</span>,</span><br></pre></td></tr></table></figure>

<h3 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h3><p>项目根目录新建 <code>mock/role.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [&#123;</span><br><span class="line">        url: <span class="string">&#x27;/api/getRoleById&#x27;</span>,</span><br><span class="line">        method: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        response: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                code: <span class="number">0</span>,</span><br><span class="line">                message: <span class="string">&#x27;ok&#x27;</span>,</span><br><span class="line">                data: [&#123;</span><br><span class="line">                    roleName: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    roleValue: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">                &#125;],</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        url: <span class="string">&#x27;/api/getUsers&#x27;</span>,</span><br><span class="line">        method: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        response: (&#123;</span><br><span class="line">            query</span><br><span class="line">        &#125;) =&gt; &#123;</span><br><span class="line">            <span class="comment">// 结构出 query ，用来获取请求中携带的参数</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;quert&gt;&gt;&gt;&gt;&gt;&#x27;</span> + query.id);</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                code: <span class="number">0</span>,</span><br><span class="line">                message: <span class="string">&#x27;ok&#x27;</span>,</span><br><span class="line">                data: [</span><br><span class="line">                    <span class="string">&#x27;tome&#x27;</span>, <span class="string">&#x27;jarey&#x27;</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p>使用 axios 请求 <code>/api/getRoleById</code> 接口</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不携带参数</span></span><br><span class="line">http.get(<span class="string">&quot;/api/getRoleById&quot;</span>).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res.data);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 携带参数</span></span><br><span class="line">http.get(<span class="string">&quot;/api/getUsers?id=123&quot;</span>).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res.data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>重启项目点击按钮查看结果</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/4.png" alt="image-20210425151941543"></p>
<p>携带参数请求时查看命令行输出</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/5.png" alt="image-20210425152954672"></p>
<h2 id="安装使用-vue-router4-0-和-vuex4-0"><a href="#安装使用-vue-router4-0-和-vuex4-0" class="headerlink" title="安装使用 vue-router4.0 和 vuex4.0"></a>安装使用 vue-router4.0 和 vuex4.0</h2><h3 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router@next vuex@next --save</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/6.png" alt="image-20210425154636367"></p>
<h3 id="使用-router"><a href="#使用-router" class="headerlink" title="使用 router"></a>使用 router</h3><p>新建 <code>src/router/index.js</code> 文件，配置路径</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入路由相关方法</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 工厂函数创建router实例</span></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">    history: createWebHashHistory(),</span><br><span class="line">    routes: [&#123;</span><br><span class="line">        path: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">        <span class="comment">// 动态加载路由</span></span><br><span class="line">        component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/home.vue&#x27;</span>)</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<p>然后在 <code>main.js</code> 中引入 <code>router</code> </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router/index&quot;</span></span><br><span class="line"></span><br><span class="line">createApp(App).use(router).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>新建 <code>src/views/home.vue</code>  文件，来作为首页页面，可以将之前写在 <code>App.vue</code>  文件中的代码拿过来</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;HelloWorld</span><br><span class="line">      msg=<span class="string">&quot;Hello Vue 3 + Vite&quot;</span></span><br><span class="line">      title=<span class="string">&quot;你好 Vue3 + Vite&quot;</span></span><br><span class="line">      @hwclick=<span class="string">&quot;appclick&quot;</span></span><br><span class="line">      ref=<span class="string">&quot;hw&quot;</span></span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;button @click=<span class="string">&quot;fatherBtn&quot;</span>&gt;我是父组件的按钮&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">&quot;comp/HelloWorld.vue&quot;</span>;</span><br><span class="line"><span class="comment">// 从 vue 中导出用到的方法</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hw = ref(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> appclick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;子组件调用了父组件&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fatherBtn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 调用子组件的 hwexposefun 方法</span></span><br><span class="line">  hw.value.hwexposefun();</span><br><span class="line">  <span class="built_in">console</span>.log(hw.value.name); <span class="comment">// =&gt; 我是helloworld子组件</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>修改 <code>App.vue</code> ,添加 <code>router-view</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;img alt=<span class="string">&quot;Vue logo&quot;</span> src=<span class="string">&quot;./assets/logo.png&quot;</span> /&gt;</span><br><span class="line">  &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>刷新页面查看</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/7.png" alt="image-20210425161327363"></p>
<h3 id="使用-vuex"><a href="#使用-vuex" class="headerlink" title="使用 vuex"></a>使用 vuex</h3><p>新建 <code>scr/store/index.js</code>  文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    createStore</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(&#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">        count: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    mutations:&#123;</span><br><span class="line">        <span class="comment">// 第二个值为参数</span></span><br><span class="line">        <span class="function"><span class="title">add</span>(<span class="params">state,age</span>)</span>&#123;</span><br><span class="line">            state.count+=age</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<p>在 <code>main.js</code>  中导入 <code>store/index.js</code>  文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router/index&quot;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store/index&quot;</span></span><br><span class="line"></span><br><span class="line">createApp(App).use(router).use(store).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>如果只在 html 中使用 vuex 则使用方式为 <code>$store.state.XXX</code> ，调用 vuex 中的方法则使用 <code>$store.commit(&#39;方法名&#39;)</code>，这种使用方法不需要在 js  中引入 vuex</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- vuex中的数据 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    这是vuex中的数据</span><br><span class="line">    <span class="comment">&lt;!-- 行内使用 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> @<span class="attr">click</span>=<span class="string">&quot;$store.commit(&#x27;add&#x27;,5)&quot;</span>&gt;</span>&#123;&#123; $store.state.count &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在 js 中使用 vuex</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 vuex 并使用 useStore 方法</span></span><br><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="comment">// useStore 方法返回一个对象，对象中包含 vuex 中的数据</span></span><br><span class="line"><span class="keyword">let</span> store = useStore();</span><br><span class="line"><span class="comment">// 调用 vuex 中定义的方法,第二个为参数</span></span><br><span class="line">store.commit(<span class="string">&quot;add&quot;</span>, <span class="number">10</span>);</span><br><span class="line"><span class="comment">// 读取 veux 中的属性值</span></span><br><span class="line"><span class="built_in">console</span>.log(store.state.count,<span class="string">&#x27;js中打印的vuex中的值&#x27;</span>); <span class="comment">// =&gt; 10</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/8.png" alt="image-20210425164628659"></p>
<h2 id="全局样式管理"><a href="#全局样式管理" class="headerlink" title="全局样式管理"></a>全局样式管理</h2><h3 id="安装-3"><a href="#安装-3" class="headerlink" title="安装"></a>安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install sass -D</span><br></pre></td></tr></table></figure>

<h3 id="使用-2"><a href="#使用-2" class="headerlink" title="使用"></a>使用</h3><p>新建 <code>src/style.index.scss</code> 文件作为全局样式文件，将 <code>App.vue</code> 文件中的样式剪切到 <code>index.scss</code> 文件中</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#app</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Avenir, Helvetica, Arial, sans-serif;</span><br><span class="line">    -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span><br><span class="line">    -moz-osx-<span class="attribute">font-smoothing</span>: grayscale;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#2c3e50</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">h1</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#41b883</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 <code>main.js</code> 中导入全局样式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">// 路由</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router/index&quot;</span></span><br><span class="line"><span class="comment">// vuex</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store/index&quot;</span></span><br><span class="line"><span class="comment">// 全局样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;style/index.scss&#x27;</span></span><br><span class="line"></span><br><span class="line">createApp(App).use(router).use(store).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="使用element-UI"><a href="#使用element-UI" class="headerlink" title="使用element UI"></a>使用element UI</h2><p>搭配 Vue3 使用的 elementui 有多个版本，每个版本的使用方法一样，但是安装命令不同</p>
<h3 id="element3"><a href="#element3" class="headerlink" title="element3"></a>element3</h3><h4 id="安装-4"><a href="#安装-4" class="headerlink" title="安装"></a>安装</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install element3 --save</span><br></pre></td></tr></table></figure>

<h4 id="完整引入"><a href="#完整引入" class="headerlink" title="完整引入"></a>完整引入</h4><p>在 main.js 中引入 element3 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 element3</span></span><br><span class="line"><span class="keyword">import</span> element3 <span class="keyword">from</span> <span class="string">&#x27;element3&#x27;</span></span><br><span class="line"><span class="comment">// 引入 element3 样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element3/lib/theme-chalk/index.css&#x27;</span></span><br><span class="line"><span class="comment">// 挂载 element3</span></span><br><span class="line">createApp(App).use(element3).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="按需引入"><a href="#按需引入" class="headerlink" title="按需引入"></a>按需引入</h4><p>新建 <code>src/plugins/element3.js</code>  文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按需导入 button 和 input</span></span><br><span class="line"><span class="keyword">import</span> &#123; ElButton, ElInput &#125; <span class="keyword">from</span> <span class="string">&#x27;element3&#x27;</span></span><br><span class="line"><span class="comment">// 加载 button 和 input 的 css 样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element3/lib/theme-chalk/button.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element3/lib/theme-chalk/input.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">app</span>) </span>&#123;</span><br><span class="line">    app.use(ElButton)</span><br><span class="line">    app.use(ElInput)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 <code>main.js</code> 文件中导入使用,里的 @ 已经在 vite.config,js 中配置过别名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">// 从自定义的插件文件中导入element3</span></span><br><span class="line"><span class="keyword">import</span> element3 <span class="keyword">from</span> <span class="string">&#x27;@/plugins/element3&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line">app.use(element3)</span><br><span class="line">app.mount(<span class="string">&#x27;#app&#x27;</span>) <span class="comment">// 这行代码一定要放在最后面</span></span><br></pre></td></tr></table></figure>

<h3 id="element-plus"><a href="#element-plus" class="headerlink" title="element-plus"></a>element-plus</h3><p><a target="_blank" rel="noopener" href="https://element-plus.gitee.io/#/zh-CN">element-plus官方文档</a></p>
<h4 id="安装-5"><a href="#安装-5" class="headerlink" title="安装"></a>安装</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install element-plus --save</span><br></pre></td></tr></table></figure>

<h4 id="完整引入-1"><a href="#完整引入-1" class="headerlink" title="完整引入"></a>完整引入</h4><p> 在 main.js 中写入以下内容 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ElementPlus <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/lib/theme-chalk/index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line">app.use(ElementPlus)</span><br><span class="line">app.mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="按需引入-1"><a href="#按需引入-1" class="headerlink" title="按需引入"></a>按需引入</h4><p>新建  <code>src/plugin/element-plus.js</code>  文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ElInput, ElButton &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/packages/theme-chalk/src/button.scss&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/packages/theme-chalk/src/input.scss&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">app</span>) </span>&#123;</span><br><span class="line">    app.use(ElInput)</span><br><span class="line">    app.use(ElButton)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 <code>main.js</code>  中引入,这里的 @ 已经在 vite.config,js 中配置过别名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ElementPlus <span class="keyword">from</span> <span class="string">&#x27;@/plugins/element-plus&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line">app.use(ElementPlus)</span><br><span class="line">app.mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="完整组件列表"><a href="#完整组件列表" class="headerlink" title="完整组件列表"></a>完整组件列表</h3><p> 完整组件列表和引入方式（完整组件列表以 <a target="_blank" rel="noopener" href="https://github.com/element-plus/element-plus/tree/dev/packages">reference</a> 为准），下面这个配置对以上两个版本的 element 通用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  ElAlert,</span><br><span class="line">  ElAside,</span><br><span class="line">  ElAutocomplete,</span><br><span class="line">  ElAvatar,</span><br><span class="line">  ElBacktop,</span><br><span class="line">  ElBadge,</span><br><span class="line">  ElBreadcrumb,</span><br><span class="line">  ElBreadcrumbItem,</span><br><span class="line">  ElButton,</span><br><span class="line">  ElButtonGroup,</span><br><span class="line">  ElCalendar,</span><br><span class="line">  ElCard,</span><br><span class="line">  ElCarousel,</span><br><span class="line">  ElCarouselItem,</span><br><span class="line">  ElCascader,</span><br><span class="line">  ElCascaderPanel,</span><br><span class="line">  ElCheckbox,</span><br><span class="line">  ElCheckboxButton,</span><br><span class="line">  ElCheckboxGroup,</span><br><span class="line">  ElCol,</span><br><span class="line">  ElCollapse,</span><br><span class="line">  ElCollapseItem,</span><br><span class="line">  ElCollapseTransition,</span><br><span class="line">  ElColorPicker,</span><br><span class="line">  ElContainer,</span><br><span class="line">  ElDatePicker,</span><br><span class="line">  ElDialog,</span><br><span class="line">  ElDivider,</span><br><span class="line">  ElDrawer,</span><br><span class="line">  ElDropdown,</span><br><span class="line">  ElDropdownItem,</span><br><span class="line">  ElDropdownMenu,</span><br><span class="line">  ElFooter,</span><br><span class="line">  ElForm,</span><br><span class="line">  ElFormItem,</span><br><span class="line">  ElHeader,</span><br><span class="line">  ElIcon,</span><br><span class="line">  ElImage,</span><br><span class="line">  ElInput,</span><br><span class="line">  ElInputNumber,</span><br><span class="line">  ElLink,</span><br><span class="line">  ElMain,</span><br><span class="line">  ElMenu,</span><br><span class="line">  ElMenuItem,</span><br><span class="line">  ElMenuItemGroup,</span><br><span class="line">  ElOption,</span><br><span class="line">  ElOptionGroup,</span><br><span class="line">  ElPageHeader,</span><br><span class="line">  ElPagination,</span><br><span class="line">  ElPopconfirm,</span><br><span class="line">  ElPopover,</span><br><span class="line">  ElPopper,</span><br><span class="line">  ElProgress,</span><br><span class="line">  ElRadio,</span><br><span class="line">  ElRadioButton,</span><br><span class="line">  ElRadioGroup,</span><br><span class="line">  ElRate,</span><br><span class="line">  ElRow,</span><br><span class="line">  ElScrollbar,</span><br><span class="line">  ElSelect,</span><br><span class="line">  ElSlider,</span><br><span class="line">  ElStep,</span><br><span class="line">  ElSteps,</span><br><span class="line">  ElSubmenu,</span><br><span class="line">  ElSwitch,</span><br><span class="line">  ElTabPane,</span><br><span class="line">  ElTable,</span><br><span class="line">  ElTableColumn,</span><br><span class="line">  ElTabs,</span><br><span class="line">  ElTag,</span><br><span class="line">  ElTimePicker,</span><br><span class="line">  ElTimeSelect,</span><br><span class="line">  ElTimeline,</span><br><span class="line">  ElTimelineItem,</span><br><span class="line">  ElTooltip,</span><br><span class="line">  ElTransfer,</span><br><span class="line">  ElTree,</span><br><span class="line">  ElUpload,</span><br><span class="line">  ElInfiniteScroll,</span><br><span class="line">  ElLoading,</span><br><span class="line">  ElMessage,</span><br><span class="line">  ElMessageBox,</span><br><span class="line">  ElNotification,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="封装Axios"><a href="#封装Axios" class="headerlink" title="封装Axios"></a>封装Axios</h2><h3 id="安装-6"><a href="#安装-6" class="headerlink" title="安装"></a>安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios --save</span><br></pre></td></tr></table></figure>

<h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3><ul>
<li> <code>axios.create</code> 表示创建一个新的 <code>axios</code> 来发送请求，我们可以对这个新创建的 axios 进行封装</li>
<li><code>baseURL</code> 可以设置请求地址的前缀，在多个环境下开发时可以根据不同请求前缀请求不同环境的接口地址，设置有 <code>baseURL</code>  参数后，我们进行请求时设置的 <code>url</code> 地址就不要在携带前缀了，否则会出错</li>
<li><code>timeout:5000</code> 表示接口超时时间，超过 5 秒不返回接口表示接口超时</li>
<li><code>service.interceptors.request.use(req,err)</code> 表示请求拦截器，表示在发送请求前做的事情<ul>
<li>接收两个参数，第一个表示成功时进来的方法，可以设置请求头等信息，最后一定要返回接收的参数名</li>
<li>第二个表示请求失败</li>
</ul>
</li>
<li><code>service.interceptors.response.use(res,err)</code> 表示响应拦截器，接口请求成功后做的事情<ul>
<li>第一个参数表示响应成功时执行的方法，可以对接口返回的数据进行判断</li>
<li>第二个参数表示响应失败时执行的方法，可以进行统一的错误处理</li>
</ul>
</li>
<li>最后别忘了将我们创建出来的 <code>axios</code> 导出。也就是下面代码中的 <code>service</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Message, Msgbox &#125; <span class="keyword">from</span> <span class="string">&quot;element3&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;@/store&quot;</span>; <span class="comment">// 使用 Vuex</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建axios实例</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">  <span class="comment">// 在请求地址前面加上baseURL</span></span><br><span class="line">  baseURL: <span class="keyword">import</span>.meta.env.VITE_BASE_API,</span><br><span class="line">  <span class="comment">// 当发送跨域请求时携带cookie</span></span><br><span class="line">  <span class="comment">// withCredentials: true,</span></span><br><span class="line">  timeout: <span class="number">5000</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截器</span></span><br><span class="line">service.interceptors.request.use(</span><br><span class="line">  (config) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 指定请求令牌</span></span><br><span class="line">    <span class="comment">// if (store.getters.token) &#123;</span></span><br><span class="line">    <span class="comment">// // 自定义令牌的字段名为X-Token，根据咱们后台再做修改</span></span><br><span class="line">    <span class="comment">// config.headers[&quot;X-Token&quot;] = store.getters.token;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    config.headers[<span class="string">&quot;X-Token&quot;</span>] = <span class="string">&quot;my token&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  (error) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 请求错误的统一处理</span></span><br><span class="line">    <span class="built_in">console</span>.log(error); <span class="comment">// for debug</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">service.interceptors.response.use(</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * If you want to get http information such as headers or status</span></span><br><span class="line"><span class="comment">   * Please return  response =&gt; response</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 通过判断状态码统一处理响应，根据情况修改</span></span><br><span class="line"><span class="comment">   * 同时也可以通过HTTP状态码判断请求结果</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  (response) =&gt; &#123;</span><br><span class="line">    <span class="comment">// response.data 是接口返回的数据结果</span></span><br><span class="line">    <span class="keyword">const</span> res = response.data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果状态码不是20000则认为有错误</span></span><br><span class="line">    <span class="keyword">if</span> (res.code !== <span class="number">20000</span>) &#123;</span><br><span class="line">      Message.error(&#123;</span><br><span class="line">        message: res.message || <span class="string">&quot;Error&quot;</span>,</span><br><span class="line">        duration: <span class="number">5</span> * <span class="number">1000</span>,</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 50008: 非法令牌; 50012: 其他客户端已登入; 50014: 令牌过期;</span></span><br><span class="line">      <span class="keyword">if</span> (res.code === <span class="number">50008</span> || res.code === <span class="number">50012</span> || res.code === <span class="number">50014</span>) &#123;</span><br><span class="line">        <span class="comment">// 重新登录</span></span><br><span class="line">        Msgbox.confirm(<span class="string">&quot;您已登出, 请重新登录&quot;</span>, <span class="string">&quot;确认&quot;</span>, &#123;</span><br><span class="line">          confirmButtonText: <span class="string">&quot;重新登录&quot;</span>,</span><br><span class="line">          cancelButtonText: <span class="string">&quot;取消&quot;</span>,</span><br><span class="line">          type: <span class="string">&quot;warning&quot;</span>,</span><br><span class="line">        &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          store.dispatch(<span class="string">&quot;user/resetToken&quot;</span>).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            location.reload();</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(res.message || <span class="string">&quot;Error&quot;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  (error) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;err&quot;</span> + error); <span class="comment">// for debug</span></span><br><span class="line">    Message(&#123;</span><br><span class="line">      message: error.message,</span><br><span class="line">      type: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">      duration: <span class="number">5</span> * <span class="number">1000</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="使用-3"><a href="#使用-3" class="headerlink" title="使用"></a>使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&quot;utils/request&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="comment">// 设置请求的地址，无需再添加 baseURL 前缀</span></span><br><span class="line">    url: <span class="string">&quot;/getUsers&quot;</span>,</span><br><span class="line">    method: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="comment">// get请求的参数可以这样传递</span></span><br><span class="line">    params: &#123;</span><br><span class="line">      page: <span class="number">1</span>,</span><br><span class="line">      limit: <span class="number">5</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">&#123; data, total &#125;</span>) =&gt;</span> &#123; <span class="comment">// 使用解构直接获取数据</span></span><br><span class="line">    <span class="comment">// 设置列表数据</span></span><br><span class="line">    state.list = data;</span><br><span class="line">    state.total = total;</span><br><span class="line">&#125;).finally(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    state.loading = <span class="literal">false</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="script-标签中的-setup-属性"><a href="#script-标签中的-setup-属性" class="headerlink" title="script 标签中的 setup 属性"></a>script 标签中的 setup 属性</h2><p>封装 <code>testServer.js</code> 方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&quot;utils/request.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getUsers = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> request(<span class="string">&quot;getusers&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; getUsers &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="使用-setup-属性"><a href="#使用-setup-属性" class="headerlink" title="使用 setup 属性"></a>使用 setup 属性</h3><p>导入 <code>testServer.js</code> 并使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;学生姓名&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div v-for&#x3D;&quot;item in userlist&quot;&gt;</span><br><span class="line">      &#123;&#123; item.name &#125;&#125;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;el-button @click&#x3D;&quot;getStudent&quot;&gt;点击获取学生&lt;&#x2F;el-button&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">&#x2F;&#x2F; script 并且添加 setup 属性后，js 里面声明的响应式变量不需要在添加 return 返回</span><br><span class="line">import &#123; reactive, ref, toRefs, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; getUsers &#125; from &quot;.&#x2F;testServer&quot;;</span><br><span class="line">const userlist &#x3D; ref(null);</span><br><span class="line">const getStudent &#x3D; async () &#x3D;&gt; &#123;</span><br><span class="line">  userlist.value &#x3D; (await getUsers()).data;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="不使用-setup-属性"><a href="#不使用-setup-属性" class="headerlink" title="不使用 setup 属性"></a>不使用 setup 属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;学生姓名&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div v-for&#x3D;&quot;item in userlist&quot;&gt;</span><br><span class="line">      &#123;&#123; item.name &#125;&#125;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;el-button @click&#x3D;&quot;getStudent&quot;&gt;点击获取学生&lt;&#x2F;el-button&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; reactive, ref, toRefs, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; getUsers &#125; from &quot;.&#x2F;testServer&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup(props) &#123;</span><br><span class="line">    const userlist &#x3D; ref(null);</span><br><span class="line">    const getStudent &#x3D; async () &#x3D;&gt; &#123;</span><br><span class="line">      userlist.value &#x3D; (await getUsers()).data;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#x2F;&#x2F; 需要在 setup 方法底部返回页面中用到的变量和方法</span><br><span class="line">    return &#123;</span><br><span class="line">      userlist,</span><br><span class="line">      getStudent,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>页面效果相同</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/10.png" alt="image-20210428092316437"></p>
<h2 id="配置多级路由"><a href="#配置多级路由" class="headerlink" title="配置多级路由"></a>配置多级路由</h2><p>首先文件目录结构如下</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/11.png" alt="image-20210428093524320"></p>
<p><code>twoPage.vue</code> 文件只有一个 <code>router-view</code> 标签</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/12.png" alt="image-20210428093622258"></p>
<p>设置 <code>router/index.js</code> 文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path: <span class="string">&quot;/testSystem&quot;</span>,</span><br><span class="line">    component: Layout,</span><br><span class="line">    redirect: <span class="string">&quot;/testSystem/promise&quot;</span>,</span><br><span class="line">    meta: &#123; <span class="attr">title</span>: <span class="string">&quot;系统测试&quot;</span>, <span class="attr">icon</span>: <span class="string">&quot;el-icon-s-home&quot;</span> &#125;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">&quot;promise&quot;</span>,</span><br><span class="line">        component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;views/testSystem/promise.vue&quot;</span>),</span><br><span class="line">        meta: &#123; <span class="attr">title</span>: <span class="string">&quot;promise语法糖&quot;</span>, <span class="attr">icon</span>: <span class="string">&quot;el-icon-s-home&quot;</span> &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">&quot;pages&quot;</span>,</span><br><span class="line">        <span class="comment">// 点击 二级菜单 面包屑时重定向到 三级菜单1</span></span><br><span class="line">        redirect: <span class="string">&quot;/testSystem/pages/item1&quot;</span>,</span><br><span class="line">        component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;views/testSystem/twoPage.vue&quot;</span>),</span><br><span class="line">        meta: &#123; <span class="attr">title</span>: <span class="string">&quot;二级菜单&quot;</span>, <span class="attr">icon</span>: <span class="string">&quot;el-icon-s-home&quot;</span> &#125;,</span><br><span class="line">        <span class="comment">// 根目录下添加 children 数组，里面添加对应的子菜单</span></span><br><span class="line">        children: [</span><br><span class="line">          &#123;</span><br><span class="line">            path: <span class="string">&quot;item1&quot;</span>,</span><br><span class="line">            component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;views/testSystem/therePage/item1.vue&quot;</span>),</span><br><span class="line">            meta: &#123; <span class="attr">title</span>: <span class="string">&quot;三级菜单1&quot;</span>, <span class="attr">icon</span>: <span class="string">&quot;el-icon-s-home&quot;</span> &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            path: <span class="string">&quot;item2&quot;</span>,</span><br><span class="line">            component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;views/testSystem/therePage/item2.vue&quot;</span>),</span><br><span class="line">            meta: &#123; <span class="attr">title</span>: <span class="string">&quot;三级菜单2&quot;</span>, <span class="attr">icon</span>: <span class="string">&quot;el-icon-s-home&quot;</span> &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<p>效果展示</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/13.png" alt="image-20210428093952845"></p>
<h2 id="watch-和-watchEffect"><a href="#watch-和-watchEffect" class="headerlink" title="watch 和 watchEffect"></a>watch 和 watchEffect</h2><h3 id="解决警告信息"><a href="#解决警告信息" class="headerlink" title="解决警告信息"></a>解决警告信息</h3><p>记录一次因为使用 watch 不当造成的警告，首先看下图发生的警告</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/14.png" alt="image-20210428104012351"></p>
<p>造成警告的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据 router 动态生成面包屑</span></span><br><span class="line">getBreadcrumb();</span><br><span class="line"><span class="comment">// 监听router，只要router发生变化就执行一次当前面包屑的方法</span></span><br><span class="line">watch(route, getBreadcrumb);</span><br></pre></td></tr></table></figure>

<p>警告内容</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Vue warn]: Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty <span class="keyword">in</span> production mode to avoid performance overhead.</span><br><span class="line"></span><br><span class="line">[Vue警告]：避免依赖于枚举组件实例上的键的应用程序逻辑。在生产模式下，这些键将为空，以避免性能开销。</span><br></pre></td></tr></table></figure>

<p>上网查询答案找到了 <strong>尤大大</strong> 的亲自解答，下面是解答链接</p>
<p><a target="_blank" rel="noopener" href="https://www.gitmemory.com/issue/vuejs/vue-next/2027/685247838">https://www.gitmemory.com/issue/vuejs/vue-next/2027/685247838</a></p>
<p>一番看下来原来 <code>watch(route)</code>是隐式的<code>deep: true</code>，它遍历任意深的属性。因此，从技术上讲，这是预期的行为。另外，仅关心几个属性时深度遍历复杂的对象也是浪费的。所以在必须使用观察者的情况下，仅仅是想监听几个属性的变化，则还应该使用<code>watchEffect</code>并避免深入观察：</p>
<p>解决办法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用 watchEffect 监听路由变化，不需要传入要监听的内容，只要发生变化就会执行</span></span><br><span class="line">watchEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  getBreadcrumb();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>getBreadcrumb</code> 方法是用来遍历 <code>router</code> 的变化来动态生成面包屑，使用 <code>watchEffect</code> 观察 <code>getBreadcrumb</code> 方法会在页面加载时自动执行一次，可以自动获取到要监听的那些属性。以后如果这些被监听的属性发生了变化，则会从新调用 <code>getBreadcrumb</code> 方法。从而避免了深层次遍历监听，节省性能。</p>
<h3 id="两者区别"><a href="#两者区别" class="headerlink" title="两者区别"></a>两者区别</h3><h4 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h4><ul>
<li>​    调用方式 <code>watch(source,callback,option[可选])</code> <ul>
<li><code>source</code> 可以是表达式，函数，也可以是指定的监听依赖对象</li>
<li><code>callback</code> 监听到变化时的回调函数</li>
<li><code>option</code> 可选参数，可选参数有<ul>
<li><code>deep</code> ，是否进行深度监听，如果我们监听的是一个数组，则每个数组值的变化都可以被监听到，但是如果监听的是一个对象，则对象内容属性的变化时不能被监听到的，此时可以将 deep 设置为 true，这表示为对象的每个属性都添加一个观察者，只要有属性发生变化就会执行回调</li>
<li><code>immediate</code> ,是否立即执行一次监听。简单说就是页面加载后是否自动执行一次。默认页面加载后不会自动执行，只有被监听的依赖发生变化时才会执行回调。如果想在页面加载后就执行一次回调则可以将 <code>immediate</code> 设置为 true</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>监听 ref 类型的数据</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watch &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// watch 监听 ref 类型的数据</span></span><br><span class="line"><span class="keyword">let</span> name = ref(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 倒计时1秒改变name的值</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  name.value = <span class="string">&quot;Lisi&quot;</span>;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听 name 变量</span></span><br><span class="line">watch(name, <span class="function">(<span class="params">newval, oldval</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 倒计时1秒后执行下面的打印</span></span><br><span class="line">  <span class="built_in">console</span>.log(oldval, <span class="string">&quot;变化前的值&quot;</span>); <span class="comment">// =&gt; null</span></span><br><span class="line">  <span class="built_in">console</span>.log(newval, <span class="string">&quot;变化后的值&quot;</span>); <span class="comment">// =&gt; Lisi</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>监听 reactive 类型的数据</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watch, reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化 reactive 类型的数据</span></span><br><span class="line"><span class="keyword">const</span> userinfo = reactive(&#123;</span><br><span class="line">  name: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 倒计时1秒改变name值</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  userinfo.name = <span class="string">&quot;李四&quot;</span>;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加一个方法用来返回要监听的依赖</span></span><br><span class="line"><span class="keyword">const</span> watchname = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> userinfo;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听 userinfo 里面的 name 方法</span></span><br><span class="line">watch(</span><br><span class="line">  watchname,</span><br><span class="line">  (newval, oldval) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 倒计时1秒后执行下面的打印</span></span><br><span class="line">    <span class="built_in">console</span>.log(oldval, <span class="string">&quot;变化前的值&quot;</span>); <span class="comment">// =&gt; Proxy &#123;name: &quot;李四&quot;, age: 18&#125; &quot;变化前的值&quot;</span></span><br><span class="line">    <span class="built_in">console</span>.log(newval, <span class="string">&quot;变化后的值&quot;</span>); <span class="comment">// =&gt; Proxy &#123;name: &quot;李四&quot;, age: 18&#125; &quot;变化后的值&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// 设置 deep 为 true，表示只要 userinfo 对象中的任意属性发生变化都会执行回调</span></span><br><span class="line">    deep: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 将 immediate 设置为 true 表示立即执行监听，页面加载后就会触发回调，此时第一次的回调参数为 变化前的值为 null，变化后的值是我们初始化的值</span></span><br><span class="line">    immediate: <span class="literal">true</span>,</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>上面代码中我们监听了整个 userinfo 对象，所以回调函数返回的是一个对象类型</p>
<p>如果我们只想监听对象的<strong>某一个</strong>属性，则可以这样写。由于我们只是监听的一个具体的属性，所以不需要再设置 deep 值为 true</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watch, reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化 reactive 类型的数据</span></span><br><span class="line"><span class="keyword">const</span> userinfo = reactive(&#123;</span><br><span class="line">  name: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 倒计时1秒改变name值</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  userinfo.name = <span class="string">&quot;李四&quot;</span>;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加一个方法用来返回要监听的依赖</span></span><br><span class="line"><span class="keyword">const</span> watchname = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> userinfo.name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听 userinfo 里面的 name 方法</span></span><br><span class="line">watch(watchname, <span class="function">(<span class="params">newval, oldval</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 倒计时1秒后执行下面的打印</span></span><br><span class="line">  <span class="built_in">console</span>.log(oldval, <span class="string">&quot;变化前的值&quot;</span>); <span class="comment">// =&gt; 张三 &quot;变化前的值&quot;</span></span><br><span class="line">  <span class="built_in">console</span>.log(newval, <span class="string">&quot;变化后的值&quot;</span>); <span class="comment">// =&gt; 李四 &quot;变化后的值&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="watcheffect"><a href="#watcheffect" class="headerlink" title="watcheffect"></a>watcheffect</h4><ul>
<li>使用方法 <code>watchEffect( () =&gt; callback )</code> 不需要传入依赖</li>
<li>使用 <code>watchEffect</code> 监听会在页面加载时自动执行一遍并且自动获取要监听的依赖</li>
<li>如果依赖发生变化执行内部回调</li>
</ul>
<p>使用方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123; newuser &#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-button type&#x3D;&quot;success&quot; @click&#x3D;&quot;changeName&quot;&gt; 点击改变姓名 &lt;&#x2F;el-button&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, watch, reactive, watchEffect &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 使用 watchEffect 监听数据</span><br><span class="line">const userinfo &#x3D; reactive(&#123;</span><br><span class="line">  name: &quot;李四&quot;,</span><br><span class="line">  info: &#123;</span><br><span class="line">    age: 18,</span><br><span class="line">    height: 180,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">let newuser &#x3D; ref(&#39;&#39;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 点击按钮改变对象值</span><br><span class="line">const changeName &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  userinfo.info.age++;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 根据 userinfo 对象的值拼接字符串</span><br><span class="line">const printUser &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  newuser.value +&#x3D; &#96;$&#123;userinfo.name&#125;今年$&#123;userinfo.info.age&#125;岁 \n&#96;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 使用 watchEffect 进行数据监听</span><br><span class="line">watchEffect(() &#x3D;&gt; &#123;</span><br><span class="line">  console.log(&#39;监听到变化&#39;);</span><br><span class="line">  &#x2F;&#x2F; 自动调用方法并获取依赖</span><br><span class="line">  &#x2F;&#x2F; 依赖发生变化后执行方法</span><br><span class="line">  printUser();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/15.png" alt="image-20210428165735232"></p>
<p>点击按钮 age ++ ，同时 watcheffect 监听到了 age 变化，执行追加方法显示在页面中</p>
<h2 id="vite2设置数据代理"><a href="#vite2设置数据代理" class="headerlink" title="vite2设置数据代理"></a>vite2设置数据代理</h2><p>设置好代理后，当请求以下面配置的开头时，实际上访问的是代理设置的接口地址</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  server: &#123;</span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="comment">// 简写形式</span></span><br><span class="line">      <span class="string">&#x27;/foo&#x27;</span>: <span class="string">&#x27;http://localhost:4567/foo&#x27;</span>,</span><br><span class="line">      <span class="comment">// 可配置属性</span></span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        target: <span class="string">&#x27;http://jsonplaceholder.typicode.com&#x27;</span>,</span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">        rewrite: <span class="function">(<span class="params">path</span>) =&gt;</span> path.replace(<span class="regexp">/^\/api/</span>, <span class="string">&#x27;&#x27;</span>),</span><br><span class="line">        <span class="comment">// secure: false,  // 如果是https接口，需要配置这个参数,不是的话不用配置</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 使用正则匹配路径</span></span><br><span class="line">      <span class="string">&#x27;^/fallback/.*&#x27;</span>: &#123;</span><br><span class="line">        target: <span class="string">&#x27;http://jsonplaceholder.typicode.com&#x27;</span>,</span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">        rewrite: <span class="function">(<span class="params">path</span>) =&gt;</span> path.replace(<span class="regexp">/^\/fallback/</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="axios发送文件，使用node接受并保存"><a href="#axios发送文件，使用node接受并保存" class="headerlink" title="axios发送文件，使用node接受并保存"></a>axios发送文件，使用node接受并保存</h2><p>首先编写发送文件的代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;file&quot; style&#x3D;&quot;display: none&quot; id&#x3D;&quot;fileinput&quot; &#x2F;&gt;</span><br><span class="line">    &lt;el-button type&#x3D;&quot;success&quot; @click&#x3D;&quot;selectFile&quot;&gt;选择文件&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;span&gt;&#123;&#123; file ? file.name : &quot;&quot; &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;image-style&quot;&gt;</span><br><span class="line">      &lt;img :src&#x3D;&quot;imgurl&quot; alt&#x3D;&quot;&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;p v-show&#x3D;&quot;imgurl&quot;&gt;图片地址：&#123;&#123; imgurl &#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">import http from &quot;axios&quot;;</span><br><span class="line">&#x2F;&#x2F; 文件选择框</span><br><span class="line">let fileinput &#x3D; ref(null);</span><br><span class="line">&#x2F;&#x2F; 存放文件</span><br><span class="line">let file &#x3D; ref(null);</span><br><span class="line">&#x2F;&#x2F; 图片地址</span><br><span class="line">let imgurl &#x3D; ref(null);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 选择文件方法</span><br><span class="line">function selectFile() &#123;</span><br><span class="line">  fileinput.value &#x3D; document.getElementById(&quot;fileinput&quot;);</span><br><span class="line">  fileinput.value.click();</span><br><span class="line">  &#x2F;&#x2F; 文件选中时触发</span><br><span class="line">  fileinput.value.addEventListener(&quot;change&quot;, () &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; 获取到选择的文件</span><br><span class="line">    file.value &#x3D; fileinput.value.files[0];</span><br><span class="line">    &#x2F;&#x2F; 执行上传方法</span><br><span class="line">    uploadFile(file.value);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 执行上传方法</span><br><span class="line">function uploadFile(file) &#123;</span><br><span class="line">  console.log(file);</span><br><span class="line">  const forms &#x3D; new FormData();</span><br><span class="line">  forms.append(&quot;file&quot;, file);</span><br><span class="line">  const configs &#x3D; &#123;</span><br><span class="line">    baseURL: &quot;&#x2F;nodeapi&quot;,</span><br><span class="line">    headers: &#123; &quot;Content-Type&quot;: &quot;multipart&#x2F;form-data&quot; &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  http.post(&quot;&#x2F;uploadfile&quot;, forms, configs).then((res) &#x3D;&gt; &#123;</span><br><span class="line">    console.log(res);</span><br><span class="line">    imgurl.value &#x3D; res.data.url</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang&#x3D;&quot;scss&quot;&gt;</span><br><span class="line">.image-style &#123;</span><br><span class="line">  width: 500px;</span><br><span class="line">  img &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<p>接下来重点，我们新建一个 node 项目,<a target="_blank" rel="noopener" href="https://gitee.com/szxio/nodejs-learning/tree/master/node%E6%8E%A5%E6%94%B6%E6%96%87%E4%BB%B6%E5%B9%B6%E4%BF%9D%E5%AD%98">源码地址</a>，编写一个接受文件的接口</p>
<p>首先新建一个文件夹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>

<p>然后安装 express 和 multiparty，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express multiparty --save</span><br></pre></td></tr></table></figure>

<p>multiparty 可以解析具有content-type的http请求<code>multipart/form-data</code>，也称为文件上传。 </p>
<p>下面为文件的读取和保存方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">savefile</span>(<span class="params">file</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 定义文件存储地址</span></span><br><span class="line">            <span class="keyword">let</span> savepath = path.resolve(__dirname, <span class="string">`../public/<span class="subst">$&#123;file.originalFilename&#125;</span>`</span>)</span><br><span class="line">            <span class="comment">// 获取文件来源地址</span></span><br><span class="line">            <span class="keyword">let</span> sourcepath = file.path</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 创建读写流</span></span><br><span class="line">            <span class="keyword">let</span> readStream = fs.createReadStream(sourcepath)</span><br><span class="line">            <span class="comment">// 将读取到的文件流写入到要保存的目录中</span></span><br><span class="line">            <span class="keyword">let</span> writeStream = fs.createWriteStream(savepath)</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 开始读取来源文件</span></span><br><span class="line">            readStream.pipe(writeStream)</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 监听读取完成事件</span></span><br><span class="line">            readStream.on(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// 读取完成后释放资源</span></span><br><span class="line">                fs.unlinkSync(sourcepath)</span><br><span class="line">                <span class="comment">// 返回成功响应</span></span><br><span class="line">                resolve(&#123;</span><br><span class="line">                    code: <span class="number">0</span>,</span><br><span class="line">                    message: <span class="string">&#x27;文件上传成功&#x27;</span>,</span><br><span class="line">                    url: <span class="string">`http://127.0.0.1:4000/<span class="subst">$&#123;file.originalFilename&#125;</span>`</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            reject(error)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    savefile</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>生成接口</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> multiparty = <span class="built_in">require</span>(<span class="string">&#x27;multiparty&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; savefile &#125; = <span class="built_in">require</span>(<span class="string">&#x27;./util/saveFile&#x27;</span>)</span><br><span class="line">app.use(express.static(path.join(__dirname, <span class="string">&#x27;public&#x27;</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接收文件的方法</span></span><br><span class="line">app.post(<span class="string">&#x27;/uploadfile&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> form = <span class="keyword">new</span> multiparty.Form();</span><br><span class="line">    form.parse(req, <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params">err, fields, files</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 这里的files是接收到的文件列表，相当于FileList</span></span><br><span class="line">        <span class="comment">// 对于上传单个文件，取数组里面的第一项</span></span><br><span class="line">        <span class="keyword">let</span> file = files.file[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">let</span> result = <span class="keyword">await</span> savefile(file)</span><br><span class="line">        res.status(<span class="number">200</span>).json(result)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">4000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;running 127.0.0.1:4000&quot;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>执行效果</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.fsh.bcebos.com/vite/16.png" alt="1620037966820"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">SZX</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://songzx0106.github.io/Vue/Vite2/">https://songzx0106.github.io/Vue/Vite2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://SongZX0106.github.io" target="_blank">SZX的开发笔记</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue/">Vue</a></div><div class="post_share"><div class="social-share" data-image="/images/ys20.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://szx-bucket1.fsh.bcebos.com/js/share.min.css" media="print" onload="this.media='all'"><script src="https://szx-bucket1.fsh.bcebos.com/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/images/wechat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/wechat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/images/alipay.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/JavaScript/10%E4%B8%AA%E5%AE%9E%E7%8E%B0%E7%82%AB%E9%85%B7UI%E8%AE%BE%E8%AE%A1%E6%95%88%E6%9E%9C%E7%9A%84CSS%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/ys20.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">10个实现炫酷UI设计效果的CSS生成工具</div></div></a></div><div class="next-post pull-right"><a href="/NodeJs/node%E7%88%AC%E8%99%AB/"><img class="next-cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/ys08.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">从零学习node爬虫</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/Vue/BaiMap/" title="使用百度地图查询地址"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/ys12.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-30</div><div class="title">使用百度地图查询地址</div></div></a></div><div><a href="/Vue/Cropper/" title="vue裁剪图片插件"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/ys04.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-30</div><div class="title">vue裁剪图片插件</div></div></a></div><div><a href="/Vue/ClickStop/" title="click.stop 阻止事件冒泡"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/ys04.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-27</div><div class="title">click.stop 阻止事件冒泡</div></div></a></div><div><a href="/Vue/EnvConfig/" title="env配置文件的使用"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/ys20.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-27</div><div class="title">env配置文件的使用</div></div></a></div><div><a href="/Vue/FormCreat/" title="form-create 使用"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/ys09.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-27</div><div class="title">form-create 使用</div></div></a></div><div><a href="/Vue/I18n/" title="实现国际化"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/ys17.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-27</div><div class="title">实现国际化</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/favicon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">SZX</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">113</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">33</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://gitee.com/szxio"><i class="iconfont icon-gitee-fill-round"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">welcome to my blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAVite2%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.</span> <span class="toc-text">创建Vite2项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">1.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">1.2.</span> <span class="toc-text">使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vite2%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8F%98%E5%8C%96"><span class="toc-number">2.</span> <span class="toc-text">Vite2的主要变化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="toc-number">2.1.</span> <span class="toc-text">起别名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Strap-setup-%E8%AF%A6%E8%A7%A3"><span class="toc-number">3.</span> <span class="toc-text">Strap setup 详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E5%AF%BC%E5%85%A5%E7%BB%84%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">直接导入组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%A4%96%E7%95%8C%E7%9A%84%E5%85%A8%E9%83%A8%E8%BE%93%E5%85%A5"><span class="toc-number">3.2.</span> <span class="toc-text">获取外界的全部输入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E7%BB%84%E4%BB%B6%E8%B0%83%E7%94%A8%E7%88%B6%E7%BB%84%E4%BB%B6"><span class="toc-number">3.3.</span> <span class="toc-text">子组件调用父组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E4%B8%8A%E4%B8%8B%E6%96%87-useContext"><span class="toc-number">3.4.</span> <span class="toc-text">获取上下文 useContext</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E7%BB%84%E4%BB%B6%E8%B0%83%E7%94%A8%E5%AD%90%E7%BB%84%E4%BB%B6"><span class="toc-number">3.5.</span> <span class="toc-text">父组件调用子组件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue-JSX%E6%94%AF%E6%8C%81"><span class="toc-number">4.</span> <span class="toc-text">Vue JSX支持</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%A7%8B%E5%86%99%E6%B3%95"><span class="toc-number">4.1.</span> <span class="toc-text">原始写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue3%E5%86%99%E6%B3%95"><span class="toc-number">4.2.</span> <span class="toc-text">vue3写法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mock%E6%95%B0%E6%8D%AE"><span class="toc-number">5.</span> <span class="toc-text">Mock数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-1"><span class="toc-number">5.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">5.2.</span> <span class="toc-text">配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-1"><span class="toc-number">5.3.</span> <span class="toc-text">使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8-vue-router4-0-%E5%92%8C-vuex4-0"><span class="toc-number">6.</span> <span class="toc-text">安装使用 vue-router4.0 和 vuex4.0</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-2"><span class="toc-number">6.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-router"><span class="toc-number">6.2.</span> <span class="toc-text">使用 router</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-vuex"><span class="toc-number">6.3.</span> <span class="toc-text">使用 vuex</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E6%A0%B7%E5%BC%8F%E7%AE%A1%E7%90%86"><span class="toc-number">7.</span> <span class="toc-text">全局样式管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-3"><span class="toc-number">7.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-2"><span class="toc-number">7.2.</span> <span class="toc-text">使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8element-UI"><span class="toc-number">8.</span> <span class="toc-text">使用element UI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#element3"><span class="toc-number">8.1.</span> <span class="toc-text">element3</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-4"><span class="toc-number">8.1.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E5%BC%95%E5%85%A5"><span class="toc-number">8.1.2.</span> <span class="toc-text">完整引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E9%9C%80%E5%BC%95%E5%85%A5"><span class="toc-number">8.1.3.</span> <span class="toc-text">按需引入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#element-plus"><span class="toc-number">8.2.</span> <span class="toc-text">element-plus</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-5"><span class="toc-number">8.2.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E5%BC%95%E5%85%A5-1"><span class="toc-number">8.2.2.</span> <span class="toc-text">完整引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E9%9C%80%E5%BC%95%E5%85%A5-1"><span class="toc-number">8.2.3.</span> <span class="toc-text">按需引入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E7%BB%84%E4%BB%B6%E5%88%97%E8%A1%A8"><span class="toc-number">8.3.</span> <span class="toc-text">完整组件列表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85Axios"><span class="toc-number">9.</span> <span class="toc-text">封装Axios</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-6"><span class="toc-number">9.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85"><span class="toc-number">9.2.</span> <span class="toc-text">封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-3"><span class="toc-number">9.3.</span> <span class="toc-text">使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#script-%E6%A0%87%E7%AD%BE%E4%B8%AD%E7%9A%84-setup-%E5%B1%9E%E6%80%A7"><span class="toc-number">10.</span> <span class="toc-text">script 标签中的 setup 属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-setup-%E5%B1%9E%E6%80%A7"><span class="toc-number">10.1.</span> <span class="toc-text">使用 setup 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E4%BD%BF%E7%94%A8-setup-%E5%B1%9E%E6%80%A7"><span class="toc-number">10.2.</span> <span class="toc-text">不使用 setup 属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%A4%9A%E7%BA%A7%E8%B7%AF%E7%94%B1"><span class="toc-number">11.</span> <span class="toc-text">配置多级路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#watch-%E5%92%8C-watchEffect"><span class="toc-number">12.</span> <span class="toc-text">watch 和 watchEffect</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E8%AD%A6%E5%91%8A%E4%BF%A1%E6%81%AF"><span class="toc-number">12.1.</span> <span class="toc-text">解决警告信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E8%80%85%E5%8C%BA%E5%88%AB"><span class="toc-number">12.2.</span> <span class="toc-text">两者区别</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#watch"><span class="toc-number">12.2.1.</span> <span class="toc-text">watch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#watcheffect"><span class="toc-number">12.2.2.</span> <span class="toc-text">watcheffect</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vite2%E8%AE%BE%E7%BD%AE%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86"><span class="toc-number">13.</span> <span class="toc-text">vite2设置数据代理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#axios%E5%8F%91%E9%80%81%E6%96%87%E4%BB%B6%EF%BC%8C%E4%BD%BF%E7%94%A8node%E6%8E%A5%E5%8F%97%E5%B9%B6%E4%BF%9D%E5%AD%98"><span class="toc-number">14.</span> <span class="toc-text">axios发送文件，使用node接受并保存</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/Java/project/20230304/" title="谷粒学院项目笔记"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/ys17.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="谷粒学院项目笔记"/></a><div class="content"><a class="title" href="/Java/project/20230304/" title="谷粒学院项目笔记">谷粒学院项目笔记</a><time datetime="2023-03-04T14:43:29.000Z" title="发表于 2023-03-04 22:43:29">2023-03-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/NodeJs/pnpm/" title="pnpm - 速度快、节省磁盘空间的软件包管理器"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/ys06.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="pnpm - 速度快、节省磁盘空间的软件包管理器"/></a><div class="content"><a class="title" href="/NodeJs/pnpm/" title="pnpm - 速度快、节省磁盘空间的软件包管理器">pnpm - 速度快、节省磁盘空间的软件包管理器</a><time datetime="2023-02-15T02:22:33.000Z" title="发表于 2023-02-15 10:22:33">2023-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/NodeJs/nvm/" title="nvm管理node.js版本"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/ys13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="nvm管理node.js版本"/></a><div class="content"><a class="title" href="/NodeJs/nvm/" title="nvm管理node.js版本">nvm管理node.js版本</a><time datetime="2023-02-15T02:08:29.000Z" title="发表于 2023-02-15 10:08:29">2023-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Java/Maven/20230206090754/" title="使用Java将Word文档转PDF"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/ys20.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Java将Word文档转PDF"/></a><div class="content"><a class="title" href="/Java/Maven/20230206090754/" title="使用Java将Word文档转PDF">使用Java将Word文档转PDF</a><time datetime="2023-02-06T01:08:33.000Z" title="发表于 2023-02-06 09:08:33">2023-02-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Vue/20221209160521/" title="ElementUI实现跨页多选表格"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/images/ys15.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ElementUI实现跨页多选表格"/></a><div class="content"><a class="title" href="/Vue/20221209160521/" title="ElementUI实现跨页多选表格">ElementUI实现跨页多选表格</a><time datetime="2022-12-09T08:06:16.000Z" title="发表于 2022-12-09 16:06:16">2022-12-09</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/images/ys20.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By SZX</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">少年辛苦终身事，莫向光阴惰寸功。<a target="_blank" rel="noopener" href="https://gitee.com/szxio">My Gitee</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://szx-bucket1.fsh.bcebos.com/js/instantpage.min.js" type="module"></script><script src="https://szx-bucket1.fsh.bcebos.com/js/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://szx-bucket1.fsh.bcebos.com/js/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'iJzt0X9OdhFCcdn4N0dJ86fY-gzGzoHsz',
      appKey: '8vtaRafgQSvU5ntYgszJfRW5',
      placeholder: '留下你的精彩评论',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://szx-bucket1.fsh.bcebos.com/js/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://szx-bucket1.fsh.bcebos.com/js/canvas-fluttering-ribbon.min.js"></script><script src="https://szx-bucket1.fsh.bcebos.com/js/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://szx-bucket1.fsh.bcebos.com/js/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,自由,平等,公正,法制,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>