<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>vite 快速上手 | SZX的开发笔记</title><meta name="keywords" content="Vue"><meta name="author" content="SZX"><meta name="copyright" content="SZX"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="使用 vite 创建 vue3 项目通过在终端中运行以下命令，可以使用 Vite 快速构建 Vue 项目。 1234$ npm init vite-app &lt;project-name&gt;$ cd &lt;project-name&gt;$ npm install$ npm run dev 或者 yarn： 1234$ yarn create vite-app &lt;project-na">
<meta property="og:type" content="article">
<meta property="og:title" content="vite 快速上手">
<meta property="og:url" content="https://songzx0106.github.io/Vue/ViteVue3/index.html">
<meta property="og:site_name" content="SZX的开发笔记">
<meta property="og:description" content="使用 vite 创建 vue3 项目通过在终端中运行以下命令，可以使用 Vite 快速构建 Vue 项目。 1234$ npm init vite-app &lt;project-name&gt;$ cd &lt;project-name&gt;$ npm install$ npm run dev 或者 yarn： 1234$ yarn create vite-app &lt;project-na">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://songzx0106.github.io/images/ys06.jpg">
<meta property="article:published_time" content="2021-03-04T16:00:00.000Z">
<meta property="article:modified_time" content="2021-10-20T03:11:26.931Z">
<meta property="article:author" content="SZX">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://songzx0106.github.io/images/ys06.jpg"><link rel="shortcut icon" href="/images/favicon.png"><link rel="canonical" href="https://songzx0106.github.io/Vue/ViteVue3/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":5000,"languages":{"author":"作者: SZX","link":"链接: ","source":"来源: SZX的开发笔记","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://szx-bucket1.fsh.bcebos.com/js/jquery.min.js',
    justifiedGallery: {
      js: 'https://fastly.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://fastly.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://szx-bucket1.fsh.bcebos.com/js/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-10-20 11:11:26'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="//at.alicdn.com/t/font_2467717_jlvw8717b8.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/images/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">112</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">33</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/images/ys06.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">SZX的开发笔记</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">vite 快速上手</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-03-04T16:00:00.000Z" title="发表于 2021-03-05 00:00:00">2021-03-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-10-20T03:11:26.931Z" title="更新于 2021-10-20 11:11:26">2021-10-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/vite/">vite</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>29分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="vite 快速上手"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="使用-vite-创建-vue3-项目"><a href="#使用-vite-创建-vue3-项目" class="headerlink" title="使用 vite 创建 vue3 项目"></a>使用 vite 创建 vue3 项目</h2><p>通过在终端中运行以下命令，可以使用 Vite 快速构建 Vue 项目。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ npm init vite-app &lt;project-name&gt;</span><br><span class="line">$ cd &lt;project-name&gt;</span><br><span class="line">$ npm install</span><br><span class="line">$ npm run dev</span><br></pre></td></tr></table></figure>
<p>或者 yarn：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ yarn create vite-app &lt;project-name&gt;</span><br><span class="line">$ cd &lt;project-name&gt;</span><br><span class="line">$ yarn</span><br><span class="line">$ yarn dev</span><br></pre></td></tr></table></figure>

<h2 id="vue3-0入门"><a href="#vue3-0入门" class="headerlink" title="vue3.0入门"></a>vue3.0入门</h2><ul>
<li><p><code>setup()</code> 函数,接收两个参数，分别是 props，context,该函数是页面的入口函数，返回页面中用到的响应式数据</p>
</li>
<li><p><code>ref</code> 用来声明一个响应式的普通值类型。包含：<code>string、number、Boolean、null、undefined</code>等</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> msg = ref(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        msg</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>reactive</code> 用来声明响应式的引用类型。包含：<code>object、array</code>等</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> msg = reactive(&#123;</span><br><span class="line">        title:<span class="string">&quot;Hello World&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        msg</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>onMounted</code> 页面加载时触发</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 页面加载触发</span></span><br><span class="line">    onMounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        timer.value = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        data.counter++;</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>onUnmounted</code> 页面销毁时触发</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 页面销毁</span></span><br><span class="line">    onUnmounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(timer.value);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>computed</code> 计算属性,当数据更改时自定触发计算方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 当data.counter发生变化时，自动触发计算属性使 data.doubleCounter的值是data.counter的2倍</span></span><br><span class="line">    <span class="keyword">const</span> data = reactive(&#123;    </span><br><span class="line">        counter:<span class="number">1</span>,   </span><br><span class="line">        doubleCounter: computed(<span class="function">() =&gt;</span> data.counter * <span class="number">2</span>),</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        data</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>toRefs</code> 将响应式对象转换为普通对象，在解构响应式的引用类型是不会丢失响应式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> state = reactive(&#123;</span><br><span class="line">        foo:<span class="number">1</span>,</span><br><span class="line">        bar:<span class="number">2</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 如果不加toRefs，则解构后响应式会丢失</span></span><br><span class="line">    <span class="keyword">const</span> &#123;foo,bar&#125; = toRefs(state)</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        foo,</span><br><span class="line">        bar</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>watch</code> 监听数据变化并触发方法</p>
<ul>
<li>watch 函数接收两个参数</li>
<li>第一个参数时要监听的数据</li>
<li>第二个是一个函数，函数有两个参数，第一个参数是最新的值，* 第二个是修改前的值</li>
<li>监听的数据发生变化后执行函数里面的方法<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> tagP = ref(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> counter = ref(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        watch 函数接收两个参数</span></span><br><span class="line"><span class="comment">        第一个参数时要监听的数据</span></span><br><span class="line"><span class="comment">        第二个是一个函数，函数有两个参数，第一个参数是最新的值，第二个是修改前的值</span></span><br><span class="line"><span class="comment">        监听的数据发生变化后执行函数里面的方法</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    watch(counter, <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">        tagP.value.innerHTML = <span class="string">`from <span class="subst">$&#123;oldVal&#125;</span> to <span class="subst">$&#123;newVal&#125;</span>`</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        tagP</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="设置全局组件"><a href="#设置全局组件" class="headerlink" title="设置全局组件"></a>设置全局组件</h2>在 main.js 中引入设置的组件地址<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> libComponent <span class="keyword">from</span> <span class="string">&quot;./view/libComponent.vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> libComponent2 <span class="keyword">from</span> <span class="string">&quot;./view/libComponent2.vue&quot;</span></span><br></pre></td></tr></table></figure>
然后更改 createApp<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">createApp(App)</span><br><span class="line">    <span class="comment">// myDiv 是全局组件名称,h 是从vue中导出的函数</span></span><br><span class="line">    .component(<span class="string">&quot;myDiv&quot;</span>, &#123;</span><br><span class="line">        render: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> h(libComponent)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .component(<span class="string">&quot;myDiv2&quot;</span>, &#123;</span><br><span class="line">        render: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> h(libComponent2)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
然后在页面中使用 <code>myDiv</code> 标签即可显示全局组件，声明多个公共组件时，写多个<code>component</code> 即可</li>
</ul>
</li>
</ul>
<p>公共组件接收参数:组件页面利用<code>props</code>接收参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        页面标题：&#123;&#123;title&#125;&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    props:[<span class="string">&quot;title&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>使用组件时传入参数</p>
<ul>
<li><code>myDiv</code> 已经声明成了全局组件，所以在页面中无需 <code>components</code> 注册<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// myDiv 已经声明成了全局组件，所以在页面中无需 components 注册</span></span><br><span class="line">&lt;myDiv title=<span class="string">&quot;引入标题&quot;</span>&gt;&lt;/myDiv&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="API-可做摇树优化"><a href="#API-可做摇树优化" class="headerlink" title="API 可做摇树优化"></a>API 可做摇树优化</h2><ul>
<li><p><code>vue2.0</code> 的 <code>nextTick</code> 写法,挂载到了 Vue 上,无论用到与否，都会挂载到全局上，就会形成所谓的 dead code(死代码),这种 dead code 无法被 webpack 的 tree-shaking 排除掉。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        Vue.nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">// code</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>在 vue3.0 中做出相应优化，将他们抽离成为独立的函数，这样打包工具的摇树优化可以将这些 dead code 排除掉</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; nextTick &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">// code</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>受影响的api</p>
<ul>
<li>Vue.nextTick</li>
<li>Vue.observable (<code>Vue3.0中替换为 ：reactive</code>)</li>
<li>Vue.version</li>
<li>Vue.compile </li>
<li>Vue.set </li>
<li>Vue.delete </li>
</ul>
</li>
</ul>
<h2 id="v-model-修饰符，子组件修改传入参数并实时响应"><a href="#v-model-修饰符，子组件修改传入参数并实时响应" class="headerlink" title="v-model 修饰符，子组件修改传入参数并实时响应"></a>v-model 修饰符，子组件修改传入参数并实时响应</h2><ul>
<li>vue3.0 中删除了 <code>v-model</code> 和 <code>v-bind</code> 的 <code>sync</code> 修饰符，取而代之的是在 <code>v-model</code> 后加上参数来使用</li>
</ul>
<p>首先在组件中接收父组件传递过来的参数，并且点击div使对参数进行修改，修改的数据做到子父组件双向绑定</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;$emit(&#x27;update:conten&#x27;, conten + 1)&quot;</span>&gt;</span></span><br><span class="line">    点我++ ： &#123;&#123; conten &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  props: [<span class="string">&quot;conten&quot;</span>],</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>vue3.0的写法,直接在v-model后面跟上冒号和子组件接收的参数字段，并且传入一个初始数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;ModelTest v-model:conten=<span class="string">&quot;modelcounter&quot;</span>&gt;&lt;/ModelTest&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> ModelTest <span class="keyword">from</span> <span class="string">&quot;./ModelTest.vue&quot;</span></span><br><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> modelcounter = ref(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        modelcounter</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>注意：如果v-model后没有参数时，在子组件内部接收的参数名为默认值：modelValue</strong></p>
<p>举例如下：</p>
<p>父组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;ModelTest v-model=<span class="string">&quot;counter&quot;</span>&gt;&lt;/ModelTest&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> ModelTest <span class="keyword">from</span> <span class="string">&quot;./ModelTest.vue&quot;</span></span><br><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> counter = ref(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        counter</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>子组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;$emit(&#x27;update:modelValue&#x27;, modelValue + 1)&quot;</span>&gt;</span></span><br><span class="line">    点我++ ： &#123;&#123; modelValue &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  props: [<span class="string">&quot;modelValue&quot;</span>],</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>vue2.0的写法,需要手动添加 update:conten 方法，并且在方法内编写数据修改逻辑</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ModelTest</span> <span class="attr">:conten</span>=<span class="string">&quot;modelcounter&quot;</span> @<span class="attr">update:conten</span>=<span class="string">&quot;modelcounter = $event&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ModelTest</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="渲染函数-render-以及插槽-slot-的基本使用方法"><a href="#渲染函数-render-以及插槽-slot-的基本使用方法" class="headerlink" title="渲染函数 render 以及插槽 slot 的基本使用方法"></a>渲染函数 render 以及插槽 slot 的基本使用方法</h2><p>vue3.0中 <code>render</code> 函数不在接收 <code>h</code> 函数，改用手动导入 <code>h</code> 的方式,使用 <code>components</code> 注册一个自定义组件，使用<code>render</code> 渲染自定义组件内容，<code>setup</code> 函数返回的数据会挂载到 <code>ctx</code> 参数上，<code>render</code> 函数接收一个 <code>ctx</code> 参数，<code>render</code> 返回一个 <code>h</code> 函数，<code>h</code> 函数声明自定义组件的内容以及逻辑。</p>
<ul>
<li>h 函数接收三个参数<ul>
<li>第一个参数是元素标签</li>
<li>第二个参数时元素的属性以及元素方法</li>
<li>第三个参数时元素的值</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">components: &#123;   </span><br><span class="line">    RenderTest: &#123;</span><br><span class="line">      props: [<span class="string">&quot;renderMsg&quot;</span>],</span><br><span class="line">      <span class="comment">// setup 的第二个参数可以解构为 emit slots attrs</span></span><br><span class="line">      <span class="function"><span class="title">setup</span>(<span class="params">props, &#123; emit, slots &#125;</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 更新父组件值的方法</span></span><br><span class="line">        <span class="keyword">const</span> changePros = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          emit(<span class="string">&quot;update:renderMsg&quot;</span>, props.renderMsg + <span class="number">1</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// 获取插槽</span></span><br><span class="line">        <span class="keyword">const</span> headerSlot = slots.header();</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          changePros,</span><br><span class="line">          headerSlot,</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">render</span>(<span class="params">ctx</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> renderMsg = <span class="built_in">this</span>.renderMsg;</span><br><span class="line">        <span class="keyword">return</span> h(<span class="string">&quot;div&quot;</span>, [</span><br><span class="line">          h(</span><br><span class="line">            <span class="string">&quot;div&quot;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">              onClick: ctx.changePros,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">`点我++ ： <span class="subst">$&#123;renderMsg&#125;</span>`</span>,          </span><br><span class="line">            <span class="comment">// this.$slots.header(),</span></span><br><span class="line">            <span class="comment">// 等同于以上写法</span></span><br><span class="line">            ctx.headerSlot</span><br><span class="line">          ),</span><br><span class="line">        ]);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p><strong>setup 的第二个参数可以解构为 emit slots attrs</strong></p>
<p>自定义完组件后再dem中使用,并且给自定义组件传递参数。同时利用插槽插入元素</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RenderTest</span> <span class="attr">v-model:renderMsg</span>=<span class="string">&quot;modelcounter&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:header</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>具名插槽 slots.header() 获取值<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RenderTest</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="函数式组件的声明方式-不推荐，仅了解-，推荐使用状态组件"><a href="#函数式组件的声明方式-不推荐，仅了解-，推荐使用状态组件" class="headerlink" title="函数式组件的声明方式(不推荐，仅了解)，推荐使用状态组件"></a>函数式组件的声明方式(不推荐，仅了解)，推荐使用状态组件</h2><p>首先创建 Functional.vue ，编写如下代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> Heading = <span class="function">(<span class="params">props, context</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">return</span> h(<span class="string">`h<span class="subst">$&#123;props.level&#125;</span>`</span>, context.attrs, context.slots);</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">Heading.props = [<span class="string">&quot;level&quot;</span>];</span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> Heading;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>接着在页面中注册并传递参数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 函数式组件的声明方式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Functional</span> <span class="attr">:level</span>=<span class="string">&quot;modelcounter&quot;</span>&gt;</span>动态h元素<span class="tag">&lt;/<span class="name">Functional</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Functional <span class="keyword">from</span> <span class="string">&quot;./Functional.vue&quot;</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    components:&#123;</span><br><span class="line">        Functional</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> modelcounter = ref(<span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span>&#123;</span></span><br><span class="line">            modelcounter</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="defineAsyncComponent-异步加载组件"><a href="#defineAsyncComponent-异步加载组件" class="headerlink" title="defineAsyncComponent 异步加载组件"></a>defineAsyncComponent 异步加载组件</h2><p>声明异步组件时用 <code>defineAsyncComponent</code> 函数包起来，和函数式组件区分开来</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 异步组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AsyncPage</span>&gt;</span><span class="tag">&lt;/<span class="name">AsyncPage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line">components:&#123;</span><br><span class="line"><span class="javascript">    AsyncPage: defineAsyncComponent(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./NextPage.vue&quot;</span>))</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="使用-directive-自定义指令"><a href="#使用-directive-自定义指令" class="headerlink" title="使用 directive 自定义指令"></a>使用 directive 自定义指令</h2><ul>
<li>使用 <code>directive</code> 函数自定义指令，<code>directive</code> 接收两个参数，分别如下：<ul>
<li>第一个参数声明指令名称，在使用时前面要加上 <code>v-</code></li>
<li>第二个参数是一个对象，里面添加指令的触发时机，具体如下：<ul>
<li>created: 元素创建时</li>
<li>beforeMount: 元素插入视图之前</li>
<li>mounted: 元素插入视图之后</li>
<li>beforeUpdate: 元素更新之前</li>
<li>updated: 元素插入视图之后</li>
<li>beforeUnmount: 元素销毁前</li>
<li>unmounted: 元素销毁后</li>
<li></li>
</ul>
</li>
</ul>
</li>
<li><em>每个声明周期函数都有三个参数，el（元素本身）、binding（自定义指令等于的值）、vnode（虚拟dom描述），具体使用方法：</em>*</li>
</ul>
<p>在 <code>main.js</code> 中的 <code>createApp(App)</code> 方法后链式调用 <code>directive</code> 方法，编写自定义指令，<code>bgColor</code> 为自定义指令名称</p>
<p><strong>方式一：链式调用</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">createApp(App)   </span><br><span class="line">    .directive(<span class="string">&quot;bgColor&quot;</span>,&#123;</span><br><span class="line">        <span class="comment">// 组件加载前</span></span><br><span class="line">        <span class="function"><span class="title">beforeMount</span>(<span class="params">el,binding,vnode</span>)</span>&#123;  </span><br><span class="line">            el.style.backgroundColor = binding.value;           </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>方式二：分开调用</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = createApp(App)</span><br><span class="line">app.directive(<span class="string">&#x27;bgColor&#x27;</span>, &#123;</span><br><span class="line">    <span class="comment">// 组件加载前</span></span><br><span class="line">    <span class="function"><span class="title">beforeMount</span>(<span class="params">el,binding,vnode</span>)</span>&#123;  </span><br><span class="line">        el.style.backgroundColor = binding.value;           </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>在全局中采用 <code>v-&lt;createName&gt;=&#39;xxx&#39;</code> 的方式使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-bgColor</span>=<span class="string">&quot;&#x27;red&#x27;&quot;</span>&gt;</span>使用自定义命令改变背景色<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="也可以在单个组件中设置自定义指令"><a href="#也可以在单个组件中设置自定义指令" class="headerlink" title="也可以在单个组件中设置自定义指令"></a>也可以在单个组件中设置自定义指令</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// 自定义 test 命令, 可以自定义多个命令</span></span><br><span class="line">    directives: &#123;</span><br><span class="line">        <span class="string">&quot;test&quot;</span>: &#123;</span><br><span class="line">            <span class="function"><span class="title">beforeMount</span>(<span class="params">el, binding</span>)</span> &#123;               </span><br><span class="line">                el.style.fontSize = binding.value;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;test2&quot;</span>: &#123;</span><br><span class="line">            <span class="function"><span class="title">beforeMount</span>(<span class="params">el, binding</span>)</span> &#123;</span><br><span class="line">               <span class="comment">// ...</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在组件内部使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 内部自定义命令 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-test</span>=<span class="string">&quot;&#x27;30px&#x27;&quot;</span>&gt;</span>组件内部自定义命令<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 全局自定义命令和内部自定义命令同时使用 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">b</span> <span class="attr">v-bgColor</span>=<span class="string">&quot;&#x27;green&#x27;&quot;</span> <span class="attr">v-test</span>=<span class="string">&quot;&#x27;30px&#x27;&quot;</span>&gt;</span>使用自定义指令<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="vueCompilerOptions-设置自定义组件白名单"><a href="#vueCompilerOptions-设置自定义组件白名单" class="headerlink" title="vueCompilerOptions 设置自定义组件白名单"></a>vueCompilerOptions 设置自定义组件白名单</h2><p>有时候利用 render 函数自定义渲染容器时声明了一些自定义组件名，页面中可以正常使用，但是控制台会报一些警告信息，此时在 vite.config.js 文件中使用 vueCompilerOptions 声明自定义组件白名单。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    vueCompilerOptions: &#123;</span><br><span class="line">        <span class="comment">// piechart 为自己定义的组件名</span></span><br><span class="line">        isCustomElement: <span class="function"><span class="params">tag</span> =&gt;</span> tag === <span class="string">&#x27;piechart&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>设置完毕后重新启动便不再有警告信息。</p>
<h2 id="transition类名变更"><a href="#transition类名变更" class="headerlink" title="transition类名变更"></a>transition类名变更</h2><p>vue3.0 中的 transition 动画类型发生了一些变化，更加语义化</p>
<ul>
<li>v-enter → v-enter-from</li>
<li>v-leave → v-leave-from</li>
</ul>
<p><strong>完整示例：点击按钮控制元素隐藏和显示，同时显示过度动画</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;show = !show&quot;</span>&gt;</span>Taggle<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transition</span> <span class="attr">appear</span> <span class="attr">name</span>=<span class="string">&quot;fade&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;show&quot;</span> <span class="attr">class</span>=<span class="string">&quot;fade&quot;</span>&gt;</span>点击上面按钮查看动画<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> show = ref(<span class="literal">true</span>);   </span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      show,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line">.fade &#123;</span><br><span class="line"><span class="css">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">font-weight</span>: <span class="number">700</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">color</span>: tomato;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* </span><br><span class="line"><span class="css">fade-leave-<span class="selector-tag">to</span> : 动画结束后的样式，原有样式 --&gt;  结束样式</span></span><br><span class="line"> 解释：从原来的20大小，放大到50大小，并且把透明度设置为0，然后隐藏</span><br><span class="line"></span><br><span class="line"><span class="css">fade-enter-<span class="selector-tag">from</span> : 动画开始的样式，开始样式 --&gt;  原有样式</span></span><br><span class="line"> 解释：从 50 大小并且透明为0的情况下，变回原来的20大小，然后显示出来</span><br><span class="line"> */</span><br><span class="line">.fade-leave-to,</span><br><span class="line">.fade-enter-from &#123;</span><br><span class="line"><span class="css">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">font-size</span>: <span class="number">50px</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* </span><br><span class="line">动画开始和结束的过度时间</span><br><span class="line"> */</span><br><span class="line">.fade-enter-active,</span><br><span class="line">.fade-leave-active &#123;     </span><br><span class="line"><span class="css">  <span class="attribute">transition</span>: <span class="number">0.4s</span> ease;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="keyCode-作为-v-on-修饰符被移除"><a href="#keyCode-作为-v-on-修饰符被移除" class="headerlink" title="keyCode 作为 v-on 修饰符被移除"></a>keyCode 作为 v-on 修饰符被移除</h2><p>vue3.0中的keyCode作为修饰符被移除，改用具体的按键名代替</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- vue3.0写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;inputText&quot;</span> <span class="attr">v-on:keyup.enter</span>=<span class="string">&quot;alertInputText&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- vue2.0写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;inputText&quot;</span> <span class="attr">v-on:keyup.13</span>=<span class="string">&quot;alertInputText&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> inputText = ref(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="comment">// 输入框按下回车是弹出输入框的值</span></span><br><span class="line">    <span class="keyword">const</span> alertInputText = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">        alert(inputText.value)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        inputText,</span><br><span class="line">        alertInputText</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="使用-mitt-完成事件派发和监听"><a href="#使用-mitt-完成事件派发和监听" class="headerlink" title="使用 mitt 完成事件派发和监听"></a>使用 mitt 完成事件派发和监听</h2><ul>
<li><p>首先安装 mitt</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm intall mitt -D</span><br></pre></td></tr></table></figure></li>
<li><p>安装完成后在 util -&gt; mitt.js 文件中进行初始化并导出</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&quot;mitt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> emitter = mitt();</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter</span><br></pre></td></tr></table></figure></li>
<li><p>使用 emitter.emit() 完成事件的派发  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;../util/mitt.js&quot;</span>;</span><br><span class="line"></span><br><span class="line">emitter.emit(<span class="string">&quot;helloPageEmitFun&quot;</span>, inputText.value);</span><br></pre></td></tr></table></figure></li>
<li><p>使用 emitter.on() 监听事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;../util/mitt.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 页面挂载完毕后监听事件</span></span><br><span class="line">    onMounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 监听事件,接收参数并触发</span></span><br><span class="line">      emitter.on(<span class="string">&quot;helloPageEmitFun&quot;</span>, <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(value);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li><p>使用 emitter.off() 关闭事件监听</p>
</li>
</ul>
<p>首先将监听触发的事件封装成一个单独的函数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;unsubHandler&quot;</span>&gt;</span>关闭事件监听</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;../util/mitt.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 封装独立的函数</span></span><br><span class="line">    <span class="keyword">const</span> watchHandler = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;组件件监听触发！&quot;</span> + value);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 页面加载完成后监听事件</span></span><br><span class="line">    onMounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      emitter.on(<span class="string">&quot;helloPageEmitFun&quot;</span>, watchHandler);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 点击按钮取消监听</span></span><br><span class="line">    <span class="keyword">const</span> unsubHandler = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      emitter.off(<span class="string">&quot;helloPageEmitFun&quot;</span>, watchHandler);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      unsubHandler,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="vue3-中如何引如-router，以及-vue-router-4-的用法"><a href="#vue3-中如何引如-router，以及-vue-router-4-的用法" class="headerlink" title="vue3 中如何引如 router，以及 vue-router 4 的用法"></a>vue3 中如何引如 router，以及 vue-router 4 的用法</h2><p>首先安装 <code>router</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router@next</span><br></pre></td></tr></table></figure>
<p>在 <code>App.vue</code> 文件中添加 <code>router-view</code> 标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>新建 <strong>router -&gt; index.js</strong> 文件，初始化如下，主要变化有两点，应该从 <code>vue-router</code> 中导出 <code>createRouter</code> 和 <code>createWebHashhistory</code> ,并且将 <code>router</code> 作为一个实例导出</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&quot;../components/Home.vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> TodoMvc <span class="keyword">from</span> <span class="string">&quot;../components/todos/index.vue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">    history:createWebHashHistory(),</span><br><span class="line">    routes: [</span><br><span class="line">        &#123;</span><br><span class="line">            path:<span class="string">&quot;/&quot;</span>,</span><br><span class="line">            component:Home</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            path:<span class="string">&quot;/todomvc&quot;</span>,</span><br><span class="line">            component:TodoMvc</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<p>在 <code>main.js</code> 文件中导入并使用,使用方法就是直接在 <code>createApp</code> 方法后面继续调用 <code>use</code> 方法，传入<code>router</code> 实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router/index&quot;</span></span><br><span class="line"></span><br><span class="line">createApp(App).use(router)</span><br></pre></td></tr></table></figure>
<p>最后在页面中完成使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span>&gt;</span>首頁<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/todomvc&quot;</span>&gt;</span>待辦列表<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="vue3-0-中-router-的一些新特性"><a href="#vue3-0-中-router-的一些新特性" class="headerlink" title="vue3.0 中 router 的一些新特性"></a>vue3.0 中 router 的一些新特性</h2><h3 id="1-router-addRoute-添加路由"><a href="#1-router-addRoute-添加路由" class="headerlink" title="1. router.addRoute()添加路由"></a>1. router.addRoute()添加路由</h3><p>在 <code>router -&gt; index.js</code> 文件中，导出 <code>router</code> 之前，可以使用<code>router.addRoute()</code>来添加路由，该函数接收两个参数，第一个参数是父页面的name，第二参数是路由，第一个参数可以不写</p>
<p>不声明父页面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">router.addRoute(&#123;</span><br><span class="line">    path: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">    name: <span class="string">&quot;about&quot;</span>,</span><br><span class="line">    component: About</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>页面路径： <a target="_blank" rel="noopener" href="http://localhost:3000/#/about">http://localhost:3000/#/about</a></p>
<p>声明父页面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">router.addRoute(<span class="string">&quot;home&quot;</span>,&#123;</span><br><span class="line">    path: <span class="string">&quot;/home/about&quot;</span>,</span><br><span class="line">    name: <span class="string">&quot;about&quot;</span>,</span><br><span class="line">    component: About</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>页面路径： <a target="_blank" rel="noopener" href="http://localhost:3000/#/home/about">http://localhost:3000/#/home/about</a></p>
<h3 id="2-点击按钮完成页面跳转"><a href="#2-点击按钮完成页面跳转" class="headerlink" title="2. 点击按钮完成页面跳转"></a>2. 点击按钮完成页面跳转</h3><p>页面跳转并传递参数 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从 vue-router 中导出 useRouter</span></span><br><span class="line"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 获取 useRouter 实例</span></span><br><span class="line">    <span class="keyword">const</span> router = useRouter();</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">goToInfo</span>(<span class="params"></span>) </span>&#123;     </span><br><span class="line">      router.push(<span class="string">&quot;/about/info?id=123456&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      goToInfo,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>子页面接收路由参数</p>
<ul>
<li>从 vue-touter 中导出 useRoute，注意要和 useRouter 区分开<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从 vue-touter 中导出 useRoute</span></span><br><span class="line"><span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;   </span><br><span class="line">    <span class="comment">// 获取路由实例</span></span><br><span class="line">    <span class="keyword">const</span> route = useRoute();</span><br><span class="line">    <span class="comment">// 获取路由参数</span></span><br><span class="line">    <span class="built_in">console</span>.log(route.query);    </span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-页面离开之前和路由参数更新后触发函数"><a href="#3-页面离开之前和路由参数更新后触发函数" class="headerlink" title="3. 页面离开之前和路由参数更新后触发函数"></a>3. 页面离开之前和路由参数更新后触发函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onBeforeRouteLeave, onBeforeRouteUpdate &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123; </span><br><span class="line">    <span class="comment">// 路由更新之前触发</span></span><br><span class="line">    onBeforeRouteUpdate(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;页面参数已更新&quot;</span>)</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 页面离开之前触发，返回false取消离开</span></span><br><span class="line">    onBeforeRouteLeave(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">const</span> isConfirm = <span class="built_in">window</span>.confirm(<span class="string">&quot;是否要离开当前页面&quot;</span>);</span><br><span class="line">      <span class="keyword">if</span> (!isConfirm) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="router4-0-中的一些变化-（一）"><a href="#router4-0-中的一些变化-（一）" class="headerlink" title="router4.0 中的一些变化 （一）"></a>router4.0 中的一些变化 （一）</h2><h3 id="1-实例创建方式-history-选项替代了-mode-选项，取而代之的是："><a href="#1-实例创建方式-history-选项替代了-mode-选项，取而代之的是：" class="headerlink" title="1.实例创建方式, history 选项替代了 mode 选项，取而代之的是："></a>1.实例创建方式, history 选项替代了 mode 选项，取而代之的是：</h3><ul>
<li>createWebHashHistory() 路径后面会携带 # </li>
<li>createMemoryHistory() 服务端渲染用</li>
<li>createWebHistory() 路径后面不会携带 # ,便于摇树优化掉无用的 history   </li>
<li>base选项移至createWebHashHistory()等方法中作为参数使用<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  <span class="comment">// 加上参数后可以在所有路径前增加前缀</span></span><br><span class="line">  history: createWebHistory(<span class="string">&quot;/addUrl&quot;</span>),</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      name: <span class="string">&quot;home&quot;</span>,</span><br><span class="line">      component: Home,           </span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-通配符-被移除，导航到404页面，使用正则匹配路径，当所有页面匹配不成功时进入404页面"><a href="#2-通配符-被移除，导航到404页面，使用正则匹配路径，当所有页面匹配不成功时进入404页面" class="headerlink" title="2.通配符 * 被移除，导航到404页面，使用正则匹配路径，当所有页面匹配不成功时进入404页面"></a>2.通配符 <code>*</code> 被移除，导航到404页面，使用正则匹配路径，当所有页面匹配不成功时进入404页面</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  <span class="comment">// 加上参数后可以在所有路径前增加前缀</span></span><br><span class="line">  history: createWebHistory(<span class="string">&quot;/addUrl&quot;</span>),</span><br><span class="line">  routes: [</span><br><span class="line">    <span class="comment">// 配置首页，默认进入 / 页面</span></span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      name: <span class="string">&quot;home&quot;</span>,</span><br><span class="line">      component: Home,           </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 设置404页面</span></span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/:pathMath(.*)*&quot;</span>,</span><br><span class="line">      name: <span class="string">&quot;not-found&quot;</span>,</span><br><span class="line">      component: NotFound</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="3-页面跳转完后触发-router-isReady-，触发时机在-onMounted-之后"><a href="#3-页面跳转完后触发-router-isReady-，触发时机在-onMounted-之后" class="headerlink" title="3.页面跳转完后触发 router.isReady()，触发时机在 onMounted 之后"></a>3.页面跳转完后触发 <code>router.isReady()</code>，触发时机在 <code>onMounted</code> 之后</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 页面跳转完后触发</span></span><br><span class="line">router</span><br><span class="line">  .isReady()</span><br><span class="line">  .then(<span class="function">(<span class="params">onSuccess</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;页面加载完回调1&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">onError</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(onError);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<h3 id="4-scrollBehavior变化，第三个参数记录页面的滚动位置，页面跳转在返回时会重新回到上次的滚动位置。"><a href="#4-scrollBehavior变化，第三个参数记录页面的滚动位置，页面跳转在返回时会重新回到上次的滚动位置。" class="headerlink" title="4.scrollBehavior变化，第三个参数记录页面的滚动位置，页面跳转在返回时会重新回到上次的滚动位置。"></a>4.scrollBehavior变化，第三个参数记录页面的滚动位置，页面跳转在返回时会重新回到上次的滚动位置。</h3><ul>
<li>vue2.0 中第三个参数的返回值为 { x:10 , y:10 }</li>
<li>vue3.0 中第三个参数的返回值为 { left:10 , top:10 }<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">    <span class="comment">// 加上参数后可以在所有路径前增加前缀</span></span><br><span class="line">    history: createWebHistory(<span class="string">&quot;/addUrl&quot;</span>),</span><br><span class="line">    routes: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// ........</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// 页面跳转页面再返回是，重新回到上次的滚动位置</span></span><br><span class="line">    <span class="function"><span class="title">scrollBehavior</span>(<span class="params">to, <span class="keyword">from</span>, position</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(position, <span class="string">&quot;页面位置信息&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (position) &#123;</span><br><span class="line">            <span class="keyword">return</span> position;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                top: <span class="number">0</span>,</span><br><span class="line">                left: <span class="number">0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="router4-0-中的一些变化-（二）"><a href="#router4-0-中的一些变化-（二）" class="headerlink" title="router4.0 中的一些变化 （二）"></a>router4.0 中的一些变化 （二）</h2><h3 id="1-keep-alive-必须写在-vouter-view-标签内部。"><a href="#1-keep-alive-必须写在-vouter-view-标签内部。" class="headerlink" title="1.keep-alive 必须写在 vouter-view 标签内部。"></a>1.keep-alive 必须写在 vouter-view 标签内部。</h3></li>
<li>keep-alive 是作用是缓存组件，例如，商品列表进入详情页时，在返回还是保持上次查询结果<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123;Component&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;Component&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-router-link-标签上删除了-tag、event属性，改用如下方式替代，使用插槽的方式，可以自定义跳转的样式，替代默认的a标签"><a href="#2-router-link-标签上删除了-tag、event属性，改用如下方式替代，使用插槽的方式，可以自定义跳转的样式，替代默认的a标签" class="headerlink" title="2.router-link 标签上删除了 tag、event属性，改用如下方式替代，使用插槽的方式，可以自定义跳转的样式，替代默认的a标签"></a>2.<code>router-link</code> 标签上删除了 <code>tag</code>、<code>event</code>属性，改用如下方式替代，使用插槽的方式，可以自定义跳转的样式，替代默认的a标签</h3><div class="note info no-icon flat"><p>需要自定义标签替换a链接时，需要添加 <code>v-slot=&quot;{ navigate }&quot;</code>，并且添加 <code>custom</code> 属性，<code>to</code> 属性可加可不加</p>
</div>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123; navigate &#125;&quot;</span> <span class="attr">custom</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> @<span class="attr">click</span>=<span class="string">&quot;goToHome&quot;</span> <span class="attr">class</span>=<span class="string">&quot;titleColor&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="vue3-0中使用vuex"><a href="#vue3-0中使用vuex" class="headerlink" title="vue3.0中使用vuex"></a>vue3.0中使用vuex</h2><p>首先安装 vuex4.0 版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex@next</span><br></pre></td></tr></table></figure>

<p>新建 store -&gt; index.js 文件，初始化代码如下</p>
<p>代码中有两个存储数据 count 和 userName，以及两个方法，addCount（接收参数追加count），setUserName（接收到一个新的名称改变全局存储的userName）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从 vuex 中导出 createStore 函数</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(&#123;</span><br><span class="line">    <span class="comment">// 将全局存储的数据放在 state 函数的返回值中</span></span><br><span class="line">    <span class="function"><span class="title">state</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            count: <span class="number">0</span>,</span><br><span class="line">            userName: <span class="string">&quot;李四&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 存放修改state值的方法，第一个参数是上下文中的state，第二个参数是方法调用时传递过来的参数</span></span><br><span class="line">    mutations: &#123;</span><br><span class="line">        <span class="comment">// 修改 count</span></span><br><span class="line">        <span class="function"><span class="title">addCount</span>(<span class="params">state, count</span>)</span> &#123;</span><br><span class="line">            state.count += count</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 修改 userName</span></span><br><span class="line">        <span class="function"><span class="title">setUserName</span>(<span class="params">state,newUserName</span>)</span> &#123;</span><br><span class="line">            state.userName = newUserName</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出 store 实例</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<p>在 main.js 文件中引入 store/index.js 文件，并挂载到 vue 全局中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store/index&quot;</span></span><br><span class="line"></span><br><span class="line">createApp(App).use(store)</span><br></pre></td></tr></table></figure>

<p>在页面中使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用vuex --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; count &#125;&#125; - &#123;&#123; userName &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>+10<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从 vuex 中导出 useStore 函数</span></span><br><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&quot;App&quot;</span>, </span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 获取vuex实例</span></span><br><span class="line">    <span class="keyword">const</span> store = useStore();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 点击按钮追加count，并修改 userName</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 使用 store.commit 函数来调用vuex中的值，第一个参数是要调用的方法名，第二参数是传递过去的参数</span></span><br><span class="line">      store.commit(<span class="string">&quot;addCount&quot;</span>, <span class="number">10</span>);</span><br><span class="line">      store.commit(<span class="string">&quot;setUserName&quot;</span>, <span class="string">&quot;张三&quot;</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(store.state.userName);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 展开 store.state</span></span><br><span class="line">      ...toRefs(store.state),</span><br><span class="line">      add,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="代码规范和格式化-eslint-prettier-规范代码"><a href="#代码规范和格式化-eslint-prettier-规范代码" class="headerlink" title="代码规范和格式化 eslint + prettier 规范代码"></a>代码规范和格式化 eslint + prettier 规范代码</h2><p>我们借助eslint规范项目代码，通过prettier做代码格式化。</p>
<p>首先在项目安装如下依赖,在 <code>package.json</code> 文件夹下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;lint&quot;</span>: <span class="string">&quot;eslint \&quot;src/**/*.&#123;js,vue&#125;\&quot;&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;@vue/eslint-config-prettier&quot;</span>: <span class="string">&quot;^6.0.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;babel-eslint&quot;</span>: <span class="string">&quot;^10.1.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;eslint&quot;</span>: <span class="string">&quot;^6.7.2&quot;</span>,</span><br><span class="line">    <span class="string">&quot;eslint-plugin-prettier&quot;</span>: <span class="string">&quot;^3.1.3&quot;</span>,</span><br><span class="line">    <span class="string">&quot;eslint-plugin-vue&quot;</span>: <span class="string">&quot;^7.0.0-0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;prettier&quot;</span>: <span class="string">&quot;^1.19.1&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>接着在项目根目录添加 <code>.eslintrc.js</code> 文件，进行如下配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  root: <span class="literal">true</span>,</span><br><span class="line">  env: &#123;</span><br><span class="line">    node: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">extends</span>: [<span class="string">&quot;plugin:vue/vue3-essential&quot;</span>, <span class="string">&quot;eslint:recommended&quot;</span>, <span class="string">&quot;@vue/prettier&quot;</span>],</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    parser: <span class="string">&quot;babel-eslint&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">&quot;no-console&quot;</span>: process.env.NODE_ENV === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;warn&quot;</span> : <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-debugger&quot;</span>: process.env.NODE_ENV === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;warn&quot;</span> : <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;prettier/prettier&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// singleQuote: none,</span></span><br><span class="line">        <span class="comment">// semi: false,</span></span><br><span class="line">        trailingComma: <span class="string">&quot;es5&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>然后继续在根目录添加 <code>prettier.config.js</code> 文件，内容如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  printWidth: <span class="number">80</span>, <span class="comment">// 每行代码长度（默认80）</span></span><br><span class="line">  tabWidth: <span class="number">2</span>, <span class="comment">// 每个tab相当于多少个空格（默认2）</span></span><br><span class="line">  useTabs: <span class="literal">false</span>, <span class="comment">// 是否使用tab进行缩进（默认false）</span></span><br><span class="line">  singleQuote: <span class="literal">false</span>, <span class="comment">// 使用单引号（默认false）</span></span><br><span class="line">  semi: <span class="literal">true</span>, <span class="comment">// 声明结尾使用分号(默认true)</span></span><br><span class="line">  trailingComma: <span class="string">&#x27;es5&#x27;</span>, <span class="comment">// 多行使用拖尾逗号（默认none）</span></span><br><span class="line">  bracketSpacing: <span class="literal">true</span>, <span class="comment">// 对象字面量的大括号间使用空格（默认true）</span></span><br><span class="line">  jsxBracketSameLine: <span class="literal">false</span>, <span class="comment">// 多行JSX中的&gt;放置在最后一行的结尾，而不是另起一行（默认false）</span></span><br><span class="line">  arrowParens: <span class="string">&quot;avoid&quot;</span>, <span class="comment">// 只有一个参数的箭头函数的参数是否带圆括号（默认avoid）</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>然后 <code>npm install</code> 安装一下新增的依赖，安装成功后重启项目。打开任意文件，格式化之后查看配置项是否生效，运行 <code>npm run lint</code> 检查错误项</p>
<h2 id="测试环境"><a href="#测试环境" class="headerlink" title="测试环境"></a>测试环境</h2><p>利用jest和@vue/test-utils测试组件</p>
<p>安装依赖</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;jest&quot;</span>: <span class="string">&quot;^24.0.0&quot;</span>,</span><br><span class="line"><span class="string">&quot;vue-jest&quot;</span>: <span class="string">&quot;^5.0.0-alpha.3&quot;</span>,</span><br><span class="line"><span class="string">&quot;babel-jest&quot;</span>: <span class="string">&quot;^26.1.0&quot;</span>,</span><br><span class="line"><span class="string">&quot;@babel/preset-env&quot;</span>: <span class="string">&quot;^7.10.4&quot;</span>,</span><br><span class="line"><span class="string">&quot;@vue/test-utils&quot;</span>: <span class="string">&quot;^2.0.0-beta.9&quot;</span></span><br></pre></td></tr></table></figure>
<p>配置 <code>babel.config.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;@babel/preset-env&quot;</span>, &#123; </span><br><span class="line">        targets: &#123; </span><br><span class="line">          node: <span class="string">&quot;current&quot;</span> </span><br><span class="line">        &#125; </span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>配置 <code>jest.config.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  testEnvironment: <span class="string">&quot;jsdom&quot;</span>,</span><br><span class="line">  transform: &#123;</span><br><span class="line">    <span class="string">&quot;^.+\\.vue$&quot;</span>: <span class="string">&quot;vue-jest&quot;</span>,</span><br><span class="line">    <span class="string">&quot;^.+\\js$&quot;</span>: <span class="string">&quot;babel-jest&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  moduleFileExtensions: [<span class="string">&quot;vue&quot;</span>, <span class="string">&quot;js&quot;</span>, <span class="string">&quot;json&quot;</span>, <span class="string">&quot;jsx&quot;</span>, <span class="string">&quot;ts&quot;</span>, <span class="string">&quot;tsx&quot;</span>, <span class="string">&quot;node&quot;</span>],</span><br><span class="line">  testMatch: [<span class="string">&quot;**/tests/**/*.spec.js&quot;</span>, <span class="string">&quot;**/__tests__/**/*.spec.js&quot;</span>],</span><br><span class="line">  moduleNameMapper: &#123;</span><br><span class="line">    <span class="string">&quot;^main(.*)$&quot;</span>: <span class="string">&quot;&lt;rootDir&gt;/src$1&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>设置启动命令 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;test&quot;</span>: <span class="string">&quot;jest --runInBand&quot;</span></span><br></pre></td></tr></table></figure>

<p>新建测试代码 <code>tests/example.spec.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">&quot;main/components/HelloWorld.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; shallowMount &#125; <span class="keyword">from</span> <span class="string">&quot;@vue/test-utils&quot;</span>;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">&quot;aaa&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  test(<span class="string">&quot;should &quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> wrapper = shallowMount(HelloWorld, &#123;</span><br><span class="line">      props: &#123;</span><br><span class="line">        msg: <span class="string">&quot;hello,vue3&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">    expect(wrapper.text()).toMatch(<span class="string">&quot;hello,vue3&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>lint配置添加jest环境，要不然会有错误提示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  env: &#123;</span><br><span class="line">    jest: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将<code>lint、test</code>和<code>git</code>挂钩</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i lint-staged yorkie -D</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;gitHooks&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;pre-commit&quot;</span>: <span class="string">&quot;lint-staged&quot;</span>,</span><br><span class="line">  <span class="string">&quot;pre-push&quot;</span>: <span class="string">&quot;npm run test&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;lint-staged&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;*.&#123;js,vue&#125;&quot;</span>: <span class="string">&quot;eslint&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="使用ts"><a href="#使用ts" class="headerlink" title="使用ts"></a>使用ts</h2><p>vite可直接导入 .ts 文件，在 <code>script</code> 标签中通过 <code>&lt;script lang=&quot;ts&quot;&gt;</code> 使用</p>
<p>范例</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;&#123; userName &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in state&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="comment">// 从 vue 中导出 defineComponent</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; defineComponent, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="comment">// 添加数组类型约束</span></span></span><br><span class="line">interface Course &#123;</span><br><span class="line">  id: number;</span><br><span class="line">  name: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 限制对象类型</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> state = ref&lt;Course[]&gt;([]);</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 限制单个值的数据类型</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> userName = ref&lt;string&gt;(<span class="string">&quot;&quot;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// userName.value = 5;  赋值类型和约定的类型不符时报错</span></span></span><br><span class="line"><span class="javascript">      userName.value = <span class="string">&quot;李四&quot;</span>;</span></span><br><span class="line">      state.value.push(&#123;</span><br><span class="line">        id: 1,</span><br><span class="line"><span class="javascript">        name: <span class="string">&quot;李四&quot;</span>,</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;, 1000);</span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      state,</span><br><span class="line">      userName,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>此外，还应该在 <code>package.json</code> 中声明 <code>ts</code> 的版本 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;devDependencies&quot;</span>: &#123;    </span><br><span class="line">  <span class="string">&quot;typescript&quot;</span>: <span class="string">&quot;^3.9.7&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在根目录新建 <code>tsconfig.json</code> 文件作为 <code>ts</code> 的配置文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;target&quot;</span>: <span class="string">&quot;esnext&quot;</span>,</span><br><span class="line">        <span class="string">&quot;module&quot;</span>: <span class="string">&quot;esnext&quot;</span>,</span><br><span class="line">        <span class="string">&quot;moduleResolution&quot;</span>: <span class="string">&quot;node&quot;</span>,</span><br><span class="line">        <span class="string">&quot;isolatedModules&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;strict&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;noUnusedLocals&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;noUnusedParameters&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;experimentalDecorators&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;lib&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;dom&quot;</span>,</span><br><span class="line">            <span class="string">&quot;esnext&quot;</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;exclude&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;node_modules&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dist&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="vite-项目配置"><a href="#vite-项目配置" class="headerlink" title="vite 项目配置"></a>vite 项目配置</h2><p>首先应该在根目录新建 <code>vite.config.js</code></p>
<h3 id="1-给导入文件的路径起别名"><a href="#1-给导入文件的路径起别名" class="headerlink" title="1. 给导入文件的路径起别名"></a>1. 给导入文件的路径起别名</h3><p>起别名可以避免出现大量的嵌套导入</p>
<p><code>vite.config.js</code> 文件中配置如下信息</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123; </span><br><span class="line">    <span class="comment">// 给导入的地址起别名，避免出现大量的嵌套引入</span></span><br><span class="line">    alias: &#123;</span><br><span class="line">        <span class="comment">// 路径映射必须以 / 开头和结尾</span></span><br><span class="line">        <span class="string">&quot;/comp/&quot;</span>: path.resolve(__dirname, <span class="string">&quot;src/components&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置完之后重启项目</p>
<p>在页面中使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用具体地址导入</span></span><br><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">&quot;./components/HelloWorld.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用别名导入</span></span><br><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">&quot;/comp/HelloWorld.vue&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-设置代理"><a href="#2-设置代理" class="headerlink" title="2. 设置代理"></a>2. 设置代理</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  proxy: &#123;</span><br><span class="line">    <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">      target: <span class="string">&#x27;http://jsonplaceholder.typicode.com&#x27;</span>,</span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      rewrite: <span class="function"><span class="params">path</span> =&gt;</span> path.replace(<span class="regexp">/^\/api/</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&quot;/api/users&quot;</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">  .then(<span class="function"><span class="params">json</span> =&gt;</span> <span class="built_in">console</span>.log(json));</span><br></pre></td></tr></table></figure>
<h3 id="扩展：-fetch-理解"><a href="#扩展：-fetch-理解" class="headerlink" title="扩展： fetch 理解"></a>扩展： <code>fetch</code> 理解</h3><ul>
<li>fetch是全局量window的一个方法，第一个参数为URL。</li>
<li>url参数是必须要填写的，option可选，设置fetch调用时的Request对象，如method、headers等<ul>
<li>method - 支持 GET, POST, PUT, DELETE, HEAD</li>
<li>url - 请求的 URL</li>
<li>headers - 对应的 Headers 对象</li>
<li>body - 请求参数（JSON.stringify 过的字符串或’name=jim\u0026age=22’ 格式) </li>
</ul>
</li>
<li>fetch()方法与XMLHttpRequest类似，fetch也可以发起ajax请求，但是与XMLHttpRequest不同的是，fetch方式使用Promise，相比较XMLHttpRequest更加的简洁。</li>
<li>fetch方法的then会接收一个Response实例，值得注意的是fetch方法的第二个then接收的才是后台传过来的真正的数据，一般第一个then对数据进行处理等。</li>
</ul>
<p>post 请求方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&quot;/users.json&quot;</span>, &#123;</span><br><span class="line">  method: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">  body: <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">    email: <span class="string">&quot;huang@163.com&quot;</span>,</span><br><span class="line">    name: <span class="string">&quot;jim&quot;</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">.then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>get 请求方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&quot;/api/users&quot;</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">  .then(<span class="function"><span class="params">json</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(json);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="3-数据mock"><a href="#3-数据mock" class="headerlink" title="3. 数据mock"></a>3. 数据mock</h3><p>安装依赖</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i mockjs -S  </span><br><span class="line">npm i vite-plugin-mock cross-env -D</span><br></pre></td></tr></table></figure>

<p>引入插件，<code>vite.config.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  createMockServer(&#123;</span><br><span class="line">    <span class="comment">// 默认支持ts，由于我们是js环境，所以设置为false</span></span><br><span class="line">    supportTs: <span class="literal">false</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>需要注意一点，使用mock时要设置环境变量 <code>package.json</code>,否则运行不起来 mock</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;dev&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=development vite&quot;</span></span><br></pre></td></tr></table></figure>
<p>创建 <code>mock</code> 文件，<code>mock/test.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  &#123;</span><br><span class="line">    url: <span class="string">&quot;/api/users&quot;</span>,</span><br><span class="line">    method: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    response: <span class="function"><span class="params">req</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        code: <span class="number">0</span>,</span><br><span class="line">        data: [</span><br><span class="line">          &#123;</span><br><span class="line">            name: <span class="string">&quot;tom&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            name: <span class="string">&quot;jerry&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    url: <span class="string">&quot;/api/post&quot;</span>,</span><br><span class="line">    method: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">    timeout: <span class="number">2000</span>,</span><br><span class="line">    response: &#123;</span><br><span class="line">      code: <span class="number">0</span>,</span><br><span class="line">      data: &#123;</span><br><span class="line">        name: <span class="string">&quot;vben&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">SZX</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://songzx0106.github.io/Vue/ViteVue3/">https://songzx0106.github.io/Vue/ViteVue3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://SongZX0106.github.io" target="_blank">SZX的开发笔记</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue/">Vue</a></div><div class="post_share"><div class="social-share" data-image="/images/ys06.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://szx-bucket1.fsh.bcebos.com/js/share.min.css" media="print" onload="this.media='all'"><script src="https://szx-bucket1.fsh.bcebos.com/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/images/wechat.png" target="_blank"><img class="post-qr-code-img" data-lazy-src="/images/wechat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/images/alipay.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="/images/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/Vue/Vue2-sound-code/"><img class="prev-cover" data-lazy-src="/images/ys17.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">vue2源码分析</div></div></a></div><div class="next-post pull-right"><a href="/JavaScript/Reg/"><img class="next-cover" data-lazy-src="/images/ys04.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">正则表达式</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/Vue/BaiMap/" title="使用百度地图查询地址"><img class="cover" data-lazy-src="/images/ys12.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-30</div><div class="title">使用百度地图查询地址</div></div></a></div><div><a href="/Vue/Cropper/" title="vue裁剪图片插件"><img class="cover" data-lazy-src="/images/ys04.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-30</div><div class="title">vue裁剪图片插件</div></div></a></div><div><a href="/Vue/ClickStop/" title="click.stop 阻止事件冒泡"><img class="cover" data-lazy-src="/images/ys04.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-27</div><div class="title">click.stop 阻止事件冒泡</div></div></a></div><div><a href="/Vue/EnvConfig/" title="env配置文件的使用"><img class="cover" data-lazy-src="/images/ys20.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-27</div><div class="title">env配置文件的使用</div></div></a></div><div><a href="/Vue/FormCreat/" title="form-create 使用"><img class="cover" data-lazy-src="/images/ys09.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-27</div><div class="title">form-create 使用</div></div></a></div><div><a href="/Vue/I18n/" title="实现国际化"><img class="cover" data-lazy-src="/images/ys17.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-27</div><div class="title">实现国际化</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="/images/favicon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">SZX</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">112</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">33</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://gitee.com/szxio"><i class="iconfont icon-gitee-fill-round"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">welcome to my blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-vite-%E5%88%9B%E5%BB%BA-vue3-%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.</span> <span class="toc-text">使用 vite 创建 vue3 项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3-0%E5%85%A5%E9%97%A8"><span class="toc-number">2.</span> <span class="toc-text">vue3.0入门</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">设置全局组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#API-%E5%8F%AF%E5%81%9A%E6%91%87%E6%A0%91%E4%BC%98%E5%8C%96"><span class="toc-number">4.</span> <span class="toc-text">API 可做摇树优化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#v-model-%E4%BF%AE%E9%A5%B0%E7%AC%A6%EF%BC%8C%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BF%AE%E6%94%B9%E4%BC%A0%E5%85%A5%E5%8F%82%E6%95%B0%E5%B9%B6%E5%AE%9E%E6%97%B6%E5%93%8D%E5%BA%94"><span class="toc-number">5.</span> <span class="toc-text">v-model 修饰符，子组件修改传入参数并实时响应</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E5%87%BD%E6%95%B0-render-%E4%BB%A5%E5%8F%8A%E6%8F%92%E6%A7%BD-slot-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">6.</span> <span class="toc-text">渲染函数 render 以及插槽 slot 的基本使用方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6%E7%9A%84%E5%A3%B0%E6%98%8E%E6%96%B9%E5%BC%8F-%E4%B8%8D%E6%8E%A8%E8%8D%90%EF%BC%8C%E4%BB%85%E4%BA%86%E8%A7%A3-%EF%BC%8C%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">7.</span> <span class="toc-text">函数式组件的声明方式(不推荐，仅了解)，推荐使用状态组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#defineAsyncComponent-%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%E7%BB%84%E4%BB%B6"><span class="toc-number">8.</span> <span class="toc-text">defineAsyncComponent 异步加载组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-directive-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-number">9.</span> <span class="toc-text">使用 directive 自定义指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%8D%95%E4%B8%AA%E7%BB%84%E4%BB%B6%E4%B8%AD%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-number">9.1.</span> <span class="toc-text">也可以在单个组件中设置自定义指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vueCompilerOptions-%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%99%BD%E5%90%8D%E5%8D%95"><span class="toc-number">10.</span> <span class="toc-text">vueCompilerOptions 设置自定义组件白名单</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#transition%E7%B1%BB%E5%90%8D%E5%8F%98%E6%9B%B4"><span class="toc-number">11.</span> <span class="toc-text">transition类名变更</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#keyCode-%E4%BD%9C%E4%B8%BA-v-on-%E4%BF%AE%E9%A5%B0%E7%AC%A6%E8%A2%AB%E7%A7%BB%E9%99%A4"><span class="toc-number">12.</span> <span class="toc-text">keyCode 作为 v-on 修饰符被移除</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-mitt-%E5%AE%8C%E6%88%90%E4%BA%8B%E4%BB%B6%E6%B4%BE%E5%8F%91%E5%92%8C%E7%9B%91%E5%90%AC"><span class="toc-number">13.</span> <span class="toc-text">使用 mitt 完成事件派发和监听</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3-%E4%B8%AD%E5%A6%82%E4%BD%95%E5%BC%95%E5%A6%82-router%EF%BC%8C%E4%BB%A5%E5%8F%8A-vue-router-4-%E7%9A%84%E7%94%A8%E6%B3%95"><span class="toc-number">14.</span> <span class="toc-text">vue3 中如何引如 router，以及 vue-router 4 的用法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3-0-%E4%B8%AD-router-%E7%9A%84%E4%B8%80%E4%BA%9B%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">15.</span> <span class="toc-text">vue3.0 中 router 的一些新特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-router-addRoute-%E6%B7%BB%E5%8A%A0%E8%B7%AF%E7%94%B1"><span class="toc-number">15.1.</span> <span class="toc-text">1. router.addRoute()添加路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%82%B9%E5%87%BB%E6%8C%89%E9%92%AE%E5%AE%8C%E6%88%90%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC"><span class="toc-number">15.2.</span> <span class="toc-text">2. 点击按钮完成页面跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%A1%B5%E9%9D%A2%E7%A6%BB%E5%BC%80%E4%B9%8B%E5%89%8D%E5%92%8C%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0%E6%9B%B4%E6%96%B0%E5%90%8E%E8%A7%A6%E5%8F%91%E5%87%BD%E6%95%B0"><span class="toc-number">15.3.</span> <span class="toc-text">3. 页面离开之前和路由参数更新后触发函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#router4-0-%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E5%8F%98%E5%8C%96-%EF%BC%88%E4%B8%80%EF%BC%89"><span class="toc-number">16.</span> <span class="toc-text">router4.0 中的一些变化 （一）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%9E%E4%BE%8B%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F-history-%E9%80%89%E9%A1%B9%E6%9B%BF%E4%BB%A3%E4%BA%86-mode-%E9%80%89%E9%A1%B9%EF%BC%8C%E5%8F%96%E8%80%8C%E4%BB%A3%E4%B9%8B%E7%9A%84%E6%98%AF%EF%BC%9A"><span class="toc-number">16.1.</span> <span class="toc-text">1.实例创建方式, history 选项替代了 mode 选项，取而代之的是：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%80%9A%E9%85%8D%E7%AC%A6-%E8%A2%AB%E7%A7%BB%E9%99%A4%EF%BC%8C%E5%AF%BC%E8%88%AA%E5%88%B0404%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D%E8%B7%AF%E5%BE%84%EF%BC%8C%E5%BD%93%E6%89%80%E6%9C%89%E9%A1%B5%E9%9D%A2%E5%8C%B9%E9%85%8D%E4%B8%8D%E6%88%90%E5%8A%9F%E6%97%B6%E8%BF%9B%E5%85%A5404%E9%A1%B5%E9%9D%A2"><span class="toc-number">16.2.</span> <span class="toc-text">2.通配符 * 被移除，导航到404页面，使用正则匹配路径，当所有页面匹配不成功时进入404页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC%E5%AE%8C%E5%90%8E%E8%A7%A6%E5%8F%91-router-isReady-%EF%BC%8C%E8%A7%A6%E5%8F%91%E6%97%B6%E6%9C%BA%E5%9C%A8-onMounted-%E4%B9%8B%E5%90%8E"><span class="toc-number">16.3.</span> <span class="toc-text">3.页面跳转完后触发 router.isReady()，触发时机在 onMounted 之后</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-scrollBehavior%E5%8F%98%E5%8C%96%EF%BC%8C%E7%AC%AC%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0%E8%AE%B0%E5%BD%95%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%BB%9A%E5%8A%A8%E4%BD%8D%E7%BD%AE%EF%BC%8C%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC%E5%9C%A8%E8%BF%94%E5%9B%9E%E6%97%B6%E4%BC%9A%E9%87%8D%E6%96%B0%E5%9B%9E%E5%88%B0%E4%B8%8A%E6%AC%A1%E7%9A%84%E6%BB%9A%E5%8A%A8%E4%BD%8D%E7%BD%AE%E3%80%82"><span class="toc-number">16.4.</span> <span class="toc-text">4.scrollBehavior变化，第三个参数记录页面的滚动位置，页面跳转在返回时会重新回到上次的滚动位置。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#router4-0-%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E5%8F%98%E5%8C%96-%EF%BC%88%E4%BA%8C%EF%BC%89"><span class="toc-number">17.</span> <span class="toc-text">router4.0 中的一些变化 （二）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-keep-alive-%E5%BF%85%E9%A1%BB%E5%86%99%E5%9C%A8-vouter-view-%E6%A0%87%E7%AD%BE%E5%86%85%E9%83%A8%E3%80%82"><span class="toc-number">17.1.</span> <span class="toc-text">1.keep-alive 必须写在 vouter-view 标签内部。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-router-link-%E6%A0%87%E7%AD%BE%E4%B8%8A%E5%88%A0%E9%99%A4%E4%BA%86-tag%E3%80%81event%E5%B1%9E%E6%80%A7%EF%BC%8C%E6%94%B9%E7%94%A8%E5%A6%82%E4%B8%8B%E6%96%B9%E5%BC%8F%E6%9B%BF%E4%BB%A3%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%8F%92%E6%A7%BD%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E8%B7%B3%E8%BD%AC%E7%9A%84%E6%A0%B7%E5%BC%8F%EF%BC%8C%E6%9B%BF%E4%BB%A3%E9%BB%98%E8%AE%A4%E7%9A%84a%E6%A0%87%E7%AD%BE"><span class="toc-number">17.2.</span> <span class="toc-text">2.router-link 标签上删除了 tag、event属性，改用如下方式替代，使用插槽的方式，可以自定义跳转的样式，替代默认的a标签</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3-0%E4%B8%AD%E4%BD%BF%E7%94%A8vuex"><span class="toc-number">18.</span> <span class="toc-text">vue3.0中使用vuex</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E5%92%8C%E6%A0%BC%E5%BC%8F%E5%8C%96-eslint-prettier-%E8%A7%84%E8%8C%83%E4%BB%A3%E7%A0%81"><span class="toc-number">19.</span> <span class="toc-text">代码规范和格式化 eslint + prettier 规范代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83"><span class="toc-number">20.</span> <span class="toc-text">测试环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8ts"><span class="toc-number">21.</span> <span class="toc-text">使用ts</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vite-%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE"><span class="toc-number">22.</span> <span class="toc-text">vite 项目配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BB%99%E5%AF%BC%E5%85%A5%E6%96%87%E4%BB%B6%E7%9A%84%E8%B7%AF%E5%BE%84%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="toc-number">22.1.</span> <span class="toc-text">1. 给导入文件的路径起别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86"><span class="toc-number">22.2.</span> <span class="toc-text">2. 设置代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%EF%BC%9A-fetch-%E7%90%86%E8%A7%A3"><span class="toc-number">22.3.</span> <span class="toc-text">扩展： fetch 理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AEmock"><span class="toc-number">22.4.</span> <span class="toc-text">3. 数据mock</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/NodeJs/pnpm/" title="pnpm - 速度快、节省磁盘空间的软件包管理器"><img data-lazy-src="/images/ys06.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="pnpm - 速度快、节省磁盘空间的软件包管理器"/></a><div class="content"><a class="title" href="/NodeJs/pnpm/" title="pnpm - 速度快、节省磁盘空间的软件包管理器">pnpm - 速度快、节省磁盘空间的软件包管理器</a><time datetime="2023-02-15T02:22:33.000Z" title="发表于 2023-02-15 10:22:33">2023-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/NodeJs/nvm/" title="nvm管理node.js版本"><img data-lazy-src="/images/ys13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="nvm管理node.js版本"/></a><div class="content"><a class="title" href="/NodeJs/nvm/" title="nvm管理node.js版本">nvm管理node.js版本</a><time datetime="2023-02-15T02:08:29.000Z" title="发表于 2023-02-15 10:08:29">2023-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Java/Maven/20230206090754/" title="使用Java将Word文档转PDF"><img data-lazy-src="/images/ys20.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Java将Word文档转PDF"/></a><div class="content"><a class="title" href="/Java/Maven/20230206090754/" title="使用Java将Word文档转PDF">使用Java将Word文档转PDF</a><time datetime="2023-02-06T01:08:33.000Z" title="发表于 2023-02-06 09:08:33">2023-02-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Vue/20221209160521/" title="ElementUI实现跨页多选表格"><img data-lazy-src="/images/ys15.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ElementUI实现跨页多选表格"/></a><div class="content"><a class="title" href="/Vue/20221209160521/" title="ElementUI实现跨页多选表格">ElementUI实现跨页多选表格</a><time datetime="2022-12-09T08:06:16.000Z" title="发表于 2022-12-09 16:06:16">2022-12-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/JavaScript/20221207103801/" title="IntersectionObserver 对象观察元素是否可见"><img data-lazy-src="/images/ys18.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="IntersectionObserver 对象观察元素是否可见"/></a><div class="content"><a class="title" href="/JavaScript/20221207103801/" title="IntersectionObserver 对象观察元素是否可见">IntersectionObserver 对象观察元素是否可见</a><time datetime="2022-12-07T02:39:05.000Z" title="发表于 2022-12-07 10:39:05">2022-12-07</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/images/ys06.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By SZX</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">少年辛苦终身事，莫向光阴惰寸功。<a target="_blank" rel="noopener" href="https://gitee.com/szxio">My Gitee</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://szx-bucket1.fsh.bcebos.com/js/instantpage.min.js" type="module"></script><script src="https://szx-bucket1.fsh.bcebos.com/js/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://szx-bucket1.fsh.bcebos.com/js/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'iJzt0X9OdhFCcdn4N0dJ86fY-gzGzoHsz',
      appKey: '8vtaRafgQSvU5ntYgszJfRW5',
      placeholder: '留下你的精彩评论',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://szx-bucket1.fsh.bcebos.com/js/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://szx-bucket1.fsh.bcebos.com/js/canvas-fluttering-ribbon.min.js"></script><script src="https://szx-bucket1.fsh.bcebos.com/js/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://szx-bucket1.fsh.bcebos.com/js/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,自由,平等,公正,法制,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>