<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>02 查询与函数 | SZX的开发笔记</title><meta name="keywords" content="MySQL"><meta name="author" content="SZX"><meta name="copyright" content="SZX"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="SQL 的分类DDL 数据定义语言。CREATE \ ALTER \ DROP \ RENAME \ TRUNCATE DML 数据操作语言。INSERT \ DELETE \ UPDATE \ SELECT DCL 数据控制语言。COMMIT \ ROLLBACK \ SAVEPOINT \ GRANT \ REVOKE SQL 语言的基本规则 SQL 可以写在一行或者多行，为了提高可读性，各子">
<meta property="og:type" content="article">
<meta property="og:title" content="02 查询与函数">
<meta property="og:url" content="https://songzx0106.github.io/Java/MySql/02/index.html">
<meta property="og:site_name" content="SZX的开发笔记">
<meta property="og:description" content="SQL 的分类DDL 数据定义语言。CREATE \ ALTER \ DROP \ RENAME \ TRUNCATE DML 数据操作语言。INSERT \ DELETE \ UPDATE \ SELECT DCL 数据控制语言。COMMIT \ ROLLBACK \ SAVEPOINT \ GRANT \ REVOKE SQL 语言的基本规则 SQL 可以写在一行或者多行，为了提高可读性，各子">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://songzx0106.github.io/images/ys19.png">
<meta property="article:published_time" content="2022-03-03T08:58:08.000Z">
<meta property="article:modified_time" content="2023-04-04T07:55:05.732Z">
<meta property="article:author" content="SZX">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://songzx0106.github.io/images/ys19.png"><link rel="shortcut icon" href="/images/favicon.png"><link rel="canonical" href="https://songzx0106.github.io/Java/MySql/02/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":5000,"languages":{"author":"作者: SZX","link":"链接: ","source":"来源: SZX的开发笔记","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/js/jquery.min.js',
    justifiedGallery: {
      js: 'https://fastly.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://fastly.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/js/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-04-04 15:55:05'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="//at.alicdn.com/t/font_2467717_jlvw8717b8.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/images/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">151</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">36</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/images/ys19.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">SZX的开发笔记</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">02 查询与函数</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-03T08:58:08.000Z" title="发表于 2022-03-03 16:58:08">2022-03-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-04-04T07:55:05.732Z" title="更新于 2023-04-04 15:55:05">2023-04-04</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/MySQL%E5%9F%BA%E7%A1%80/">MySQL基础</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>35分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="02 查询与函数"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="SQL-的分类"><a href="#SQL-的分类" class="headerlink" title="SQL 的分类"></a>SQL 的分类</h2><p>DDL 数据定义语言。<code>CREATE \ ALTER \ DROP \ RENAME \ TRUNCATE</code></p>
<p>DML 数据操作语言。<code>INSERT \ DELETE \ UPDATE \ SELECT</code></p>
<p>DCL 数据控制语言。<code>COMMIT \ ROLLBACK \ SAVEPOINT \ GRANT \ REVOKE</code></p>
<h2 id="SQL-语言的基本规则"><a href="#SQL-语言的基本规则" class="headerlink" title="SQL 语言的基本规则"></a>SQL 语言的基本规则</h2><ul>
<li>SQL 可以写在一行或者多行，为了提高可读性，各子句子分行写，必要时使用缩进</li>
<li>每条命令以 ; 或者 \g 或者 \G 结束</li>
<li>关键字不能被缩写也不能被分行</li>
<li>关于标点符号<ul>
<li>必须保证所有 ()、单引号、双引号成对出现</li>
<li>必须使用英文状态下的输入方式</li>
<li>字符串和日期类型的数据可以使用单引号表示</li>
<li>列的别名，尽量使用双引号，而且不建议省略as</li>
</ul>
</li>
</ul>
<h2 id="SQL-大小写规范"><a href="#SQL-大小写规范" class="headerlink" title="SQL 大小写规范"></a>SQL 大小写规范</h2><ul>
<li>数据库名、表名、表别名、字段名、字段别名等使用小写</li>
<li>SQL 关键字、函数名、绑定变量等使用大写</li>
</ul>
<h2 id="MySQL三种注释方式"><a href="#MySQL三种注释方式" class="headerlink" title="MySQL三种注释方式"></a>MySQL三种注释方式</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 单行注释,使用--单行注释时要加空格</span></span><br><span class="line"></span><br><span class="line"># 单行注释</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	多行注释</span></span><br><span class="line"><span class="comment">	多行注释</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="导入数据"><a href="#导入数据" class="headerlink" title="导入数据"></a>导入数据</h2><p>在命令行窗口登录 mysql，执行如下命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source d:\xxx.sql</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/40.png" alt="40.png"></p>
<h2 id="SELECT-…-FROM-结构"><a href="#SELECT-…-FROM-结构" class="headerlink" title="SELECT … FROM 结构"></a>SELECT … FROM 结构</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看 employee 表中的所有列数据，* 表示所有列或者字段</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看 employees 表中的 employee_id last_name,salary 三列数据</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/41.png" alt="41.png"></p>
<h2 id="列起别名"><a href="#列起别名" class="headerlink" title="列起别名"></a>列起别名</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 列的别名，使用空格隔开或者使用as</span></span><br><span class="line"><span class="comment">-- 列的别名可以使用中文表示，但是要使用双引号</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id <span class="keyword">AS</span> id,last_name <span class="keyword">as</span> &quot;姓名&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h2 id="去除重复项"><a href="#去除重复项" class="headerlink" title="去除重复项"></a>去除重复项</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 去除重复项 DISTINCT</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department_id <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h2 id="空值参与运算"><a href="#空值参与运算" class="headerlink" title="空值参与运算"></a>空值参与运算</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 空值参与运算</span></span><br><span class="line"><span class="comment">-- null 值参与运算的话结果永远是 null</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,(salary <span class="operator">*</span> (<span class="number">1</span> <span class="operator">+</span> commission_pct) <span class="operator">*</span> <span class="number">12</span>) <span class="keyword">AS</span> &quot;年工资&quot; </span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h2 id="IFNULL-解决空值"><a href="#IFNULL-解决空值" class="headerlink" title="IFNULL 解决空值"></a>IFNULL 解决空值</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 空值解决办法 IFNULL(expr1,expr2),如果 expr1 为null，则取 expr2 的值参与运算</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,(salary <span class="operator">*</span> (<span class="number">1</span> <span class="operator">+</span> IFNULL(commission_pct,<span class="number">0</span>)) <span class="operator">*</span> <span class="number">12</span>) <span class="keyword">AS</span> &quot;年工资&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h2 id="着重号"><a href="#着重号" class="headerlink" title="着重号"></a>着重号</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 着重号 ``,如果自己定义的字段和系统关键字重复，可以使用 `` 将我们定义的字段括起来区分</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `<span class="keyword">order</span>`;</span><br></pre></td></tr></table></figure>

<h2 id="查询常数"><a href="#查询常数" class="headerlink" title="查询常数"></a>查询常数</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询常数</span></span><br><span class="line"><span class="keyword">SELECT</span> &quot;songzx&quot;,employee_id,last_name <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h2 id="DESC-显示表结构"><a href="#DESC-显示表结构" class="headerlink" title="DESC 显示表结构"></a>DESC 显示表结构</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 显示表结构</span></span><br><span class="line"><span class="keyword">DESC</span> employees;</span><br></pre></td></tr></table></figure>

<h2 id="WHERE-查询"><a href="#WHERE-查询" class="headerlink" title="WHERE 查询"></a>WHERE 查询</h2><p>查询 <code>employees </code>表中 <code>last_name </code>等于 <code>King </code> 的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">&#x27;King&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="SQL-算数运算符"><a href="#SQL-算数运算符" class="headerlink" title="SQL 算数运算符"></a>SQL 算数运算符</h2><table>
<thead>
<tr>
<th>符号</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>+</td>
<td>加</td>
</tr>
<tr>
<td>-</td>
<td>减</td>
</tr>
<tr>
<td>*</td>
<td>乘</td>
</tr>
<tr>
<td>/</td>
<td>除</td>
</tr>
<tr>
<td>%</td>
<td>取模</td>
</tr>
</tbody></table>
<p>简单示例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">110</span>,<span class="number">100</span><span class="operator">+</span><span class="number">50</span>,<span class="number">100</span><span class="operator">*</span><span class="number">2</span>,<span class="number">100</span><span class="operator">+</span><span class="number">12.3</span> <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<p>SQL 中的 + 没有连接的作用，只有加法的作用，下面的结果是 112</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span><span class="operator">+</span><span class="string">&#x27;12&#x27;</span> <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<p>如果加法不能正常计算，则按照0处理，如下结果是 100</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span> <span class="operator">+</span> <span class="string">&#x27;a&#x27;</span> <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<p>SQL中的除法得出的结果默认保留四位小数</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span><span class="operator">/</span><span class="number">2</span>,<span class="number">50</span><span class="operator">/</span><span class="number">5</span> <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<p>% 取模运算</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">12</span><span class="operator">%</span><span class="number">5</span>,<span class="number">100</span><span class="operator">%</span><span class="number">10</span>,<span class="number">13</span><span class="operator">%</span><span class="number">-2</span>,<span class="number">-12</span><span class="operator">%</span><span class="number">5</span>,<span class="number">-12</span><span class="operator">%</span><span class="number">-5</span> <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<p>练习：查询员工id为偶数的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary </span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id <span class="operator">%</span> <span class="number">2</span> <span class="operator">=</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/42.png" alt="42.png"></p>
<h2 id="SQL-比较运算符"><a href="#SQL-比较运算符" class="headerlink" title="SQL 比较运算符"></a>SQL 比较运算符</h2><table>
<thead>
<tr>
<th>符号</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>=</td>
<td>等于</td>
</tr>
<tr>
<td>&lt;=&gt;</td>
<td>安全的等于，为 NULL 而生</td>
</tr>
<tr>
<td>&lt;&gt; 或者 !=</td>
<td>不等于</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于等于</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于等于</td>
</tr>
</tbody></table>
<p>普通等于如果一边有NULL,则结果就是NULL</p>
<p>结果为: 1 1 NULL</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span> <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span>,<span class="number">0</span> <span class="operator">=</span> <span class="string">&#x27;a&#x27;</span>,<span class="number">2</span> <span class="operator">=</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<p>安全等于如果一边有null结果不会返回null</p>
<p>结果为：0 1</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span> <span class="operator">&lt;=&gt;</span> <span class="keyword">NULL</span>,<span class="keyword">NULL</span> <span class="operator">&lt;=&gt;</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<p>其他比较符号如果有 NULL 参与返回的结果都是 NULL</p>
<p>结果为 1 0 0</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span> <span class="operator">!=</span> <span class="number">2</span>,<span class="number">0</span> <span class="operator">!=</span> <span class="string">&#x27;a&#x27;</span>,<span class="number">1</span> <span class="operator">!=</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<p>大于等于判断</p>
<p>结果为 1 1 1 1 </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">2</span> <span class="operator">&gt;</span> <span class="number">1</span>,<span class="number">5</span> <span class="operator">&gt;=</span> <span class="number">5</span>,<span class="number">1</span> <span class="operator">&lt;</span> <span class="number">2</span>,<span class="number">1</span> <span class="operator">&lt;=</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<h2 id="IS-NULL-和-ISNULL-expr-的使用"><a href="#IS-NULL-和-ISNULL-expr-的使用" class="headerlink" title="IS NULL 和 ISNULL(expr) 的使用"></a>IS NULL 和 ISNULL(expr) 的使用</h2><p>查询为NULL的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询表中字段是 NULL 的数据</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,commission_pct</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="comment">-- 或</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,commission_pct</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> ISNULL(commission_pct);</span><br></pre></td></tr></table></figure>

<h2 id="IS-NOT-NULL-的使用"><a href="#IS-NOT-NULL-的使用" class="headerlink" title="IS NOT NULL 的使用"></a>IS NOT NULL 的使用</h2><p>查询不是 NULL 的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询表中字段不是 NULL 的数据</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,commission_pct</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<h2 id="LEAST-和-GREATEST"><a href="#LEAST-和-GREATEST" class="headerlink" title="LEAST 和 GREATEST"></a>LEAST 和 GREATEST</h2><p>最小 <code>LEAST</code> 和最大 <code>GREATEST</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- LEAST(value1,value2,...) 和 GREATEST(value1,value2,...)</span></span><br><span class="line"><span class="keyword">SELECT</span> LEAST(<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;h&#x27;</span>,<span class="string">&#x27;a&#x27;</span>),GREATEST(<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;h&#x27;</span>,<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<h2 id="BETWEEN-…-AND"><a href="#BETWEEN-…-AND" class="headerlink" title="BETWEEN … AND"></a>BETWEEN … AND</h2><p>查询包含在某个区间的数据</p>
<p>练习1：查询员工工资在6000到8000之间的数据,包含6000和8000</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">BETWEEN</span> <span class="number">6000</span> <span class="keyword">AND</span> <span class="number">8000</span>;</span><br><span class="line"><span class="comment">-- 或</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;=</span> <span class="number">6000</span> <span class="keyword">AND</span> salary <span class="operator">&lt;=</span> <span class="number">8000</span>;</span><br></pre></td></tr></table></figure>

<p>练习2：查询员工工资不在6000到8000的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">NOT</span> <span class="keyword">BETWEEN</span> <span class="number">6000</span> <span class="keyword">AND</span> <span class="number">8000</span>;</span><br></pre></td></tr></table></figure>

<h2 id="IN-val1-val2-…-和-NOT-IN-val1-val2-…"><a href="#IN-val1-val2-…-和-NOT-IN-val1-val2-…" class="headerlink" title="IN(val1,val2,…) 和 NOT IN(val1,val2,…)"></a>IN(val1,val2,…) 和 NOT IN(val1,val2,…)</h2><p>查询在指定数据内的数据</p>
<p>练习1：查询员工部门在10 20 30的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span>(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>);</span><br></pre></td></tr></table></figure>

<p>练习2：查询员工部门不在10 20 30的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">NOT</span> <span class="keyword">IN</span>(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>);</span><br></pre></td></tr></table></figure>

<h2 id="LIKE-模糊查询"><a href="#LIKE-模糊查询" class="headerlink" title="LIKE 模糊查询"></a>LIKE 模糊查询</h2><p>练习1：查询名字中只要包含a的数据</p>
<p><code>%</code> 代表不确定个数的字符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%a%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>练习2：查询名字以a开头的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;a%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>练习3：查询名字以a结尾的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%a&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>练习4：查询名字第二位是a的数据</p>
<p><code>_</code> 表示一个不确定的字符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;_a%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>练习5：查询名字中有a并且有e的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%a%&#x27;</span> <span class="keyword">AND</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%e%&#x27;</span>;</span><br><span class="line"><span class="comment">-- 或</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%a%e%&#x27;</span> <span class="keyword">OR</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%e%a%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>练习6：查询名字第二位是_且第三位是a的员工数据</p>
<p><code>\</code> 表示一个转义符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id,last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;_\_a%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="REGEXP"><a href="#REGEXP" class="headerlink" title="REGEXP"></a>REGEXP</h2><p>使用正则表达式</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;szxstart&#x27;</span> REGEXP <span class="string">&#x27;^s&#x27;</span>,<span class="string">&#x27;szxstart&#x27;</span> REGEXP <span class="string">&#x27;t$&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><table>
<thead>
<tr>
<th>符号</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>OR 或 ||</td>
<td>或者</td>
</tr>
<tr>
<td>NOT 或 !</td>
<td>非</td>
</tr>
<tr>
<td>AND 或 &amp;&amp;</td>
<td>并且</td>
</tr>
<tr>
<td>XOR</td>
<td>逻辑异或，前后一真一假才算真</td>
</tr>
</tbody></table>
<h2 id="运算练习题"><a href="#运算练习题" class="headerlink" title="运算练习题"></a>运算练习题</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询工资不在5000到12000的员工的姓名和工资</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">NOT</span> <span class="keyword">BETWEEN</span> <span class="number">5000</span> <span class="keyword">AND</span> <span class="number">12000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.查询在20或50号部门的员工姓名和部门号 </span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">in</span> (<span class="number">20</span>,<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.查询公司中没有管理者的员工姓名及jobid</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 4.查询公司中有奖金的姓名，工资，奖金级别 </span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary,commission_pct</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5.查询员工姓名的第三个字母是a的数据 </span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;__a%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6.查询姓名中有 a 和 k 的数据 </span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name </span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%a%k%&#x27;</span> <span class="keyword">OR</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%k%a%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7.查询出employees表中first_name 以 e 结尾的数据 </span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,first_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> first_name <span class="keyword">LIKE</span> <span class="string">&#x27;%e&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 8.查询部门编号在 80-100 之间的姓名、工种 </span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">BETWEEN</span> <span class="number">80</span> <span class="keyword">AND</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 9.查询出 manager_id 是 100,101,110的姓名，工资，管理者id </span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary,manager_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="keyword">in</span> (<span class="number">100</span>,<span class="number">101</span>,<span class="number">110</span>);</span><br></pre></td></tr></table></figure>

<h2 id="ORDER-BY-排序"><a href="#ORDER-BY-排序" class="headerlink" title="ORDER BY 排序"></a>ORDER BY 排序</h2><h3 id="排序规则"><a href="#排序规则" class="headerlink" title="排序规则"></a>排序规则</h3><p>使用关键字 <code>ORDER BY</code> 进行排序。排序方式有两种</p>
<ul>
<li><code>ASC</code> 升序排序，默认采用这个方式</li>
<li><code>DESC</code> 降序排序</li>
</ul>
<h3 id="单列排序"><a href="#单列排序" class="headerlink" title="单列排序"></a>单列排序</h3><p>1.按照员工工资升序排列</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	salary;</span><br></pre></td></tr></table></figure>

<p>2.找出员工工资在6000-9000并按照降序排列</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	salary <span class="keyword">BETWEEN</span> <span class="number">6000</span> <span class="keyword">AND</span> <span class="number">9000</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	salary <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<h3 id="多列排序"><a href="#多列排序" class="headerlink" title="多列排序"></a>多列排序</h3><p>找出员工部门在60-80的按照降序排列，并且部门之间员工工资按照升序排列</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	salary,</span><br><span class="line">	department_id </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	department_id <span class="keyword">BETWEEN</span> <span class="number">60</span> <span class="keyword">AND</span> <span class="number">80</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	department_id <span class="keyword">DESC</span>,</span><br><span class="line">	salary;</span><br></pre></td></tr></table></figure>

<h2 id="LIMIT-分页"><a href="#LIMIT-分页" class="headerlink" title="LIMIT 分页"></a>LIMIT 分页</h2><p>使用 <code>LIMIT</code> 关键字进行排序</p>
<p>1.获取员工表第1页数据，每页显示20条</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line">LIMIT <span class="number">0</span>,<span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<p>2.获取员工表第2页数据，每页显示20条</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line">LIMIT <span class="number">20</span>,<span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<p>3.获取员工表第3页数据，每页显示20</p>
<p>总结公式：<code>LIMIT (pageNum-1)*pageSize,pageNum</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line">LIMIT <span class="number">20</span>,<span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<p>4.<code>WHERE,ORDER BY,LIMIT</code>声明顺序</p>
<p>查询员工工资在6000到8000的数据按照工资降序排序显示前20条</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	salary <span class="keyword">BETWEEN</span> <span class="number">6000</span> <span class="keyword">AND</span> <span class="number">8000</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	salary <span class="keyword">DESC</span> </span><br><span class="line">LIMIT <span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<h2 id="排序与分页练习"><a href="#排序与分页练习" class="headerlink" title="排序与分页练习"></a>排序与分页练习</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询员工的姓名和部门号以及年薪。按年薪降序，姓名升序显示</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary <span class="operator">*</span> <span class="number">12</span> <span class="keyword">AS</span> annual_salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> annual_salary <span class="keyword">DESC</span>,last_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.选择工资不在8000到17000的员工姓名和工资，按工资降序，显示第21到40的位置</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">NOT</span> <span class="keyword">BETWEEN</span> <span class="number">8000</span> <span class="keyword">AND</span> <span class="number">17000</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">20</span>,<span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.查询邮箱中包含e的员工信息，并先按邮箱的字节数降序，再按部门号升序</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,email,department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> email <span class="keyword">LIKE</span> <span class="string">&#x27;%e%&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> LENGTH(email) <span class="keyword">DESC</span>,department_id;</span><br></pre></td></tr></table></figure>

<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><p>多表查询，也称为关联查询。指两个或者更多表一起完成查询操作</p>
<p>前提条件：这些一起查询的表之间是有关系的（一对一，一对多），它们之间一定是有关联字段的，这个关联字段可能建立了外键，也可能没有建立外键。比如：员工表和部门表，这两个表之间依靠“部门编号”来关联。</p>
<h3 id="两张表关联查询"><a href="#两张表关联查询" class="headerlink" title="两张表关联查询"></a>两张表关联查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees,</span><br><span class="line">	departments </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	employees.department_id <span class="operator">=</span> departments.department_id;</span><br></pre></td></tr></table></figure>

<p>如果要查询的字段在多张表中都存在，则必须指明这个字段来自那个表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	employees.department_id </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees,</span><br><span class="line">	departments </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	employees.department_id <span class="operator">=</span> departments.department_id;</span><br></pre></td></tr></table></figure>

<p>表的名字过长可以给表起别名，如果给表起了别名就必须使用别名。建议多表查询时给要显示的字段都指明来自那张表，减少 SQL 判断次数，提高查询效率</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t1.department_id </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1,</span><br><span class="line">	departments t2 </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.department_id <span class="operator">=</span> t2.department_id;</span><br></pre></td></tr></table></figure>

<h3 id="多表查询-1"><a href="#多表查询-1" class="headerlink" title="多表查询"></a>多表查询</h3><p>多表查询使用 AND 关联</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_id,</span><br><span class="line">	t3.city </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1,</span><br><span class="line">	departments t2,</span><br><span class="line">	locations t3 </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.department_id <span class="operator">=</span> t2.department_id </span><br><span class="line">	<span class="keyword">AND</span> t2.location_id <span class="operator">=</span> t3.location_id</span><br></pre></td></tr></table></figure>

<h2 id="多表查询的分类"><a href="#多表查询的分类" class="headerlink" title="多表查询的分类"></a>多表查询的分类</h2><ul>
<li>等值连接 vs 非等值连接</li>
<li>自连接 vs 非自连接</li>
<li>内连接 vs 外连接</li>
</ul>
<h3 id="等值连接-vs-非等值连接"><a href="#等值连接-vs-非等值连接" class="headerlink" title="等值连接 vs 非等值连接"></a>等值连接 vs 非等值连接</h3><p>等值连接，查询出员工的具体部门名称</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1,</span><br><span class="line">	departments t2 </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.department_id <span class="operator">=</span> t2.department_id;</span><br></pre></td></tr></table></figure>

<p>非等值连接，查询员工的工资等级</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t1.salary,</span><br><span class="line">	t2.grade_level </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1,</span><br><span class="line">	job_grades t2 </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.salary <span class="keyword">BETWEEN</span> t2.lowest_sal </span><br><span class="line">	<span class="keyword">AND</span> t2.highest_sal;</span><br><span class="line">	<span class="keyword">AND</span> t2.highest_sal;</span><br></pre></td></tr></table></figure>

<h3 id="自连接-vs-非自连接"><a href="#自连接-vs-非自连接" class="headerlink" title="自连接 vs 非自连接"></a>自连接 vs 非自连接</h3><p>自连接。查询员工姓名已经管理者,让员工的领导id等于领导人的empid</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.manager_id,</span><br><span class="line">	t2.last_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1,</span><br><span class="line">	employees t2 </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.manager_id <span class="operator">=</span> t2.employee_id;</span><br></pre></td></tr></table></figure>

<h3 id="内连接-vs-外连接"><a href="#内连接-vs-外连接" class="headerlink" title="内连接 vs 外连接"></a>内连接 vs 外连接</h3><ul>
<li><p>内连接：合并具有同一列的两个以上表的行，结果集中不包含一个表与另外一个表不匹配的行</p>
</li>
<li><p>外连接：合并具有同一列的两个以上的表的行，结果集中除了包含一个表与另一个表匹配的行之外，还查询到了左表或右表中不匹配的行</p>
</li>
<li><p>外连接的分类：</p>
<ul>
<li>左外连接：两个表在连接过程中除了返回满足连接条件之外的数据外还返回了左表中不满足条件的数据</li>
<li>右外连接：两个表在连接过程中除了返回满足连接条件之外的数据外还返回了右表中不满足条件的数据</li>
<li>满外连接：两个表在连接过程中除了返回满足连接条件之外的数据外还返回了左表和右表中不满足条件的数据</li>
</ul>
</li>
</ul>
<h2 id="SQL99语法使用JOIN-ON实现内外连接"><a href="#SQL99语法使用JOIN-ON实现内外连接" class="headerlink" title="SQL99语法使用JOIN ON实现内外连接"></a>SQL99语法使用JOIN ON实现内外连接</h2><p>上述的写法都是SQL92的语法，语法更简洁但不易理解。SQL99语法更复杂但是更容易理解。</p>
<p>在 MySQL 中不支持 SQL92 语法。</p>
<p>使用 <code>JOIN ON</code> 关键字实现内外连接</p>
<h3 id="SQL99内连接"><a href="#SQL99内连接" class="headerlink" title="SQL99内连接"></a>SQL99内连接</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id;</span><br></pre></td></tr></table></figure>

<h3 id="SQL99多表内链接"><a href="#SQL99多表内链接" class="headerlink" title="SQL99多表内链接"></a>SQL99多表内链接</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name,</span><br><span class="line">	t3.city </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id</span><br><span class="line">	<span class="keyword">JOIN</span> locations t3 <span class="keyword">ON</span> t2.location_id <span class="operator">=</span> t3.location_id;</span><br></pre></td></tr></table></figure>

<h3 id="SQL99实现左外连接-LEFT-JOIN"><a href="#SQL99实现左外连接-LEFT-JOIN" class="headerlink" title="SQL99实现左外连接 LEFT JOIN"></a>SQL99实现左外连接 LEFT JOIN</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id;</span><br></pre></td></tr></table></figure>

<h3 id="SQL99实现右外连接-RIGHT-JOIN"><a href="#SQL99实现右外连接-RIGHT-JOIN" class="headerlink" title="SQL99实现右外连接 RIGHT JOIN"></a>SQL99实现右外连接 RIGHT JOIN</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id;</span><br></pre></td></tr></table></figure>

<h2 id="UNION-ALL-和-UNION"><a href="#UNION-ALL-和-UNION" class="headerlink" title="UNION ALL 和 UNION"></a>UNION ALL 和 UNION</h2><p><code>UNION ALL</code> 将两个查询语句合并为一个查询语句并输出，不会去除重复项。效率高，推荐使用。</p>
<p><code>UNION</code> 将两个查询语句合并为一个查询语句，会去除重复项。效率低，不推荐使用</p>
<h2 id="七种JOIN的实现"><a href="#七种JOIN的实现" class="headerlink" title="七种JOIN的实现"></a>七种JOIN的实现</h2><p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/43.png" alt="43.png"></p>
<h3 id="左上图"><a href="#左上图" class="headerlink" title="左上图"></a>左上图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id;</span><br></pre></td></tr></table></figure>

<h3 id="右上图"><a href="#右上图" class="headerlink" title="右上图"></a>右上图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id;</span><br></pre></td></tr></table></figure>

<h3 id="左中图"><a href="#左中图" class="headerlink" title="左中图"></a>左中图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<h3 id="中图"><a href="#中图" class="headerlink" title="中图"></a>中图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id;</span><br></pre></td></tr></table></figure>

<h3 id="右中图"><a href="#右中图" class="headerlink" title="右中图"></a>右中图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.employee_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<h3 id="左下图"><a href="#左下图" class="headerlink" title="左下图"></a>左下图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式一：左上图 UNION ALL 右中图</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.employee_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- 方式二：右上图 UNION ALL 左中图</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<h3 id="右下图"><a href="#右下图" class="headerlink" title="右下图"></a>右下图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.department_id <span class="keyword">IS</span> <span class="keyword">NULL</span> <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.employee_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<h2 id="多表内外连接查询练习"><a href="#多表内外连接查询练习" class="headerlink" title="多表内外连接查询练习"></a>多表内外连接查询练习</h2><p>现有如下两张表</p>
<p>人员表：<code>t_emp</code></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/44.png" alt="44.png"></p>
<p>门派表：<code>t_dept</code></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/45.png" alt="45.png"></p>
<p>1.所有有门派的人员信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.`name`,</span><br><span class="line">	t2.deptName </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	t_emp t1</span><br><span class="line">	<span class="keyword">JOIN</span> t_dept t2 <span class="keyword">ON</span> t1.deptId <span class="operator">=</span> t2.id;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/46.png" alt="46.png"></p>
<p>2.列出所有用户，并显示其机构信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.`name`,</span><br><span class="line">	t2.deptName </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	t_emp t1</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> t_dept t2 <span class="keyword">ON</span> t1.deptId <span class="operator">=</span> t2.id;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/47.png" alt="47.png"></p>
<p>3.列出所有门派</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.`name`,</span><br><span class="line">	t2.deptName </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	t_emp t1</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> t_dept t2 <span class="keyword">ON</span> t1.deptId <span class="operator">=</span> t2.id;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/48.png" alt="48.png"></p>
<p>4.所有不入门派的人员</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.`name`,</span><br><span class="line">	t2.deptName </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	t_emp t1</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> t_dept t2 <span class="keyword">ON</span> t1.deptId <span class="operator">=</span> t2.id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.deptId <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/49.png" alt="49.png"></p>
<p>5.所有没人入的门派</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.`name`,</span><br><span class="line">	t2.deptName </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	t_emp t1</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> t_dept t2 <span class="keyword">ON</span> t1.deptId <span class="operator">=</span> t2.id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.deptId <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/50.png" alt="50.png"></p>
<p>6.列出所有人员和机构的对照关系</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.`name`,</span><br><span class="line">	t2.deptName </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	t_emp t1</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> t_dept t2 <span class="keyword">ON</span> t1.deptId <span class="operator">=</span> t2.id <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.`name`,</span><br><span class="line">	t2.deptName </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	t_emp t1</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> t_dept t2 <span class="keyword">ON</span> t1.deptId <span class="operator">=</span> t2.id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.deptId <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/51.png" alt="51.png"></p>
<p>7.列出所有没入派的人员和没人入的门派</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.`name`,</span><br><span class="line">	t2.deptName </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	t_emp t1</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> t_dept t2 <span class="keyword">ON</span> t1.deptId <span class="operator">=</span> t2.id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.deptId <span class="keyword">IS</span> <span class="keyword">NULL</span> <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.`name`,</span><br><span class="line">	t2.deptName </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	t_emp t1</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> t_dept t2 <span class="keyword">ON</span> t1.deptId <span class="operator">=</span> t2.id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.deptId <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/52.png" alt="52.png"></p>
<h2 id="扩展：USING-的使用"><a href="#扩展：USING-的使用" class="headerlink" title="扩展：USING 的使用"></a>扩展：USING 的使用</h2><p>如果两张表中有形同的字段，可以使用 USING 字段声明让那个字段进行等值判断</p>
<p><code>JOIN ON</code> 的写法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id;</span><br></pre></td></tr></table></figure>

<p><code> USING</code> 写法。查询结果与上面相同</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.last_name,</span><br><span class="line">	t2.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">JOIN</span> departments t2 <span class="keyword">USING</span> ( department_id );</span><br></pre></td></tr></table></figure>

<h2 id="单行函数"><a href="#单行函数" class="headerlink" title="单行函数"></a>单行函数</h2><ul>
<li>操作数据对象</li>
<li>接收参数返回一个结果</li>
<li>只对一行进行变换</li>
<li>每行返回一个结果</li>
<li>可以嵌套</li>
<li>参数可以使一列或者一个值</li>
</ul>
<h2 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h2><h3 id="基本函数"><a href="#基本函数" class="headerlink" title="基本函数"></a>基本函数</h3><p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/53.png" alt="53.png"></p>
<h3 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h3><p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/54.png" alt="54.png"></p>
<h3 id="指数和对数"><a href="#指数和对数" class="headerlink" title="指数和对数"></a>指数和对数</h3><p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/55.png" alt="55.png"></p>
<h3 id="进制之间的转换"><a href="#进制之间的转换" class="headerlink" title="进制之间的转换"></a>进制之间的转换</h3><p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/56.png" alt="56.png"></p>
<h2 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h2><p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/57.png" alt="57.png"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/58.png" alt="58.png"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/59.png" alt="59.png"></p>
<p><strong>MySQL中，字符串的位置是从1开始的。</strong></p>
<h2 id="日期和时间函数"><a href="#日期和时间函数" class="headerlink" title="日期和时间函数"></a>日期和时间函数</h2><h3 id="获取日期时间"><a href="#获取日期时间" class="headerlink" title="获取日期时间"></a>获取日期时间</h3><p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/60.png" alt="60.png"></p>
<h3 id="日期和时间戳转换"><a href="#日期和时间戳转换" class="headerlink" title="日期和时间戳转换"></a>日期和时间戳转换</h3><p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/61.png" alt="61.png"></p>
<h3 id="获取月份、星期、星期数、天数等函数"><a href="#获取月份、星期、星期数、天数等函数" class="headerlink" title="获取月份、星期、星期数、天数等函数"></a>获取月份、星期、星期数、天数等函数</h3><p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/62.png" alt="62.png"></p>
<h3 id="日期的操作函数"><a href="#日期的操作函数" class="headerlink" title="日期的操作函数"></a>日期的操作函数</h3><p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/63.png" alt="63.png"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/64.png" alt="64.png"></p>
<h3 id="时间和秒钟转换的函数"><a href="#时间和秒钟转换的函数" class="headerlink" title="时间和秒钟转换的函数"></a>时间和秒钟转换的函数</h3><p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/65.png" alt="65.png"></p>
<h3 id="计算日期和时间的函数"><a href="#计算日期和时间的函数" class="headerlink" title="计算日期和时间的函数"></a>计算日期和时间的函数</h3><p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/66.png" alt="66.png"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/67.png" alt="67.png"></p>
<h3 id="日期格式化与解析"><a href="#日期格式化与解析" class="headerlink" title="日期格式化与解析"></a>日期格式化与解析</h3><p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/68.png" alt="68.png"></p>
<h2 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h2><h3 id="IF-expr1-expr2-expr3"><a href="#IF-expr1-expr2-expr3" class="headerlink" title="IF(expr1,expr2,expr3)"></a>IF(expr1,expr2,expr3)</h3><p>如果expr1的值为true，则返回expr2的值，否则返回expr3</p>
<p>练习1：返回员工的姓名，工资，奖金，如果奖金为null则返回0</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	salary,</span><br><span class="line">IF</span><br><span class="line">	( commission_pct, commission_pct, <span class="number">0</span> ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees;</span><br></pre></td></tr></table></figure>

<h3 id="IFNULL-expr1-expr2"><a href="#IFNULL-expr1-expr2" class="headerlink" title="IFNULL(expr1,expr2)"></a>IFNULL(expr1,expr2)</h3><p>如果expr1为true则返回expr1，否则返回expr</p>
<p>练习：返回员工的姓名，工资，奖金，如果奖金为null则返回0</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	salary,</span><br><span class="line">	IFNULL( commission_pct, <span class="number">0</span> ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees;</span><br></pre></td></tr></table></figure>

<h3 id="CASE-WHEN-条件1-THEN-结果1-WHEN-条件2-THEN-结果2-ELSE-结果3-END"><a href="#CASE-WHEN-条件1-THEN-结果1-WHEN-条件2-THEN-结果2-ELSE-结果3-END" class="headerlink" title="CASE WHEN 条件1 THEN 结果1 WHEN 条件2 THEN 结果2 ELSE 结果3 END"></a>CASE WHEN 条件1 THEN 结果1 WHEN 条件2 THEN 结果2 ELSE 结果3 END</h3><p>相当于java中的if else if else</p>
<p>练习：输出不同工资对应的等级</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	salary,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">		</span><br><span class="line">		<span class="keyword">WHEN</span> salary <span class="operator">&gt;=</span> <span class="number">12000</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="string">&#x27;白骨精&#x27;</span> </span><br><span class="line">		<span class="keyword">WHEN</span> salary <span class="operator">&gt;=</span> <span class="number">10000</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="string">&#x27;高富帅&#x27;</span> </span><br><span class="line">		<span class="keyword">WHEN</span> salary <span class="operator">&gt;=</span> <span class="number">8000</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="string">&#x27;小白领&#x27;</span> <span class="keyword">ELSE</span> <span class="string">&#x27;加油&#x27;</span> </span><br><span class="line">	<span class="keyword">END</span> <span class="string">&#x27;details&#x27;</span></span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		employees;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/69.png" alt="69.png"></p>
<h3 id="CASE-条件-WHEN-常量1-THEN-结果1-WHEN-常量2-THEN-结果2-ELSE-结果n-END"><a href="#CASE-条件-WHEN-常量1-THEN-结果1-WHEN-常量2-THEN-结果2-ELSE-结果n-END" class="headerlink" title="CASE 条件 WHEN 常量1 THEN 结果1 WHEN 常量2 THEN 结果2 ELSE 结果n END"></a>CASE 条件 WHEN 常量1 THEN 结果1 WHEN 常量2 THEN 结果2 ELSE 结果n END</h3><p>相当于Java中的switch case</p>
<p>练习：如果部门为30号，则工资乘以1.1倍，如果部门为40，工资乘以1.2，部门为50，工资乘以1.4，其他部门工资不变</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	salary,</span><br><span class="line">	department_id,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">		department_id </span><br><span class="line">		<span class="keyword">WHEN</span> <span class="number">30</span> <span class="keyword">THEN</span></span><br><span class="line">		salary <span class="operator">*</span> <span class="number">1.1</span> </span><br><span class="line">		<span class="keyword">WHEN</span> <span class="number">40</span> <span class="keyword">THEN</span></span><br><span class="line">		salary <span class="operator">*</span> <span class="number">1.2</span> </span><br><span class="line">		<span class="keyword">WHEN</span> <span class="number">50</span> <span class="keyword">THEN</span></span><br><span class="line">		salary <span class="operator">*</span> <span class="number">1.4</span> <span class="keyword">ELSE</span> salary <span class="operator">*</span> <span class="number">1</span></span><br><span class="line">	<span class="keyword">END</span> <span class="string">&#x27;detail&#x27;</span></span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		employees;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/70.png" alt="70.png"></p>
<h2 id="数据加密"><a href="#数据加密" class="headerlink" title="数据加密"></a>数据加密</h2><h3 id="MD5-str"><a href="#MD5-str" class="headerlink" title="MD5(str)"></a>MD5(str)</h3><p>MD5(str) 将一个字符串进行md5加密</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> MD5(<span class="string">&#x27;mysql&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<h3 id="SHA-str"><a href="#SHA-str" class="headerlink" title="SHA(str)"></a>SHA(str)</h3><p>将一个字符串进行sha加密</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SHA(<span class="string">&#x27;mysql&#x27;</span>) <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<h2 id="函数练习题"><a href="#函数练习题" class="headerlink" title="函数练习题"></a>函数练习题</h2><h3 id="1-显示系统时间"><a href="#1-显示系统时间" class="headerlink" title="1.显示系统时间"></a>1.显示系统时间</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> NOW() <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/71.png" alt="71.png"></p>
<h3 id="2-查询员工号，姓名，工资，以及工资提高百分之20-后的结果（new-salary）"><a href="#2-查询员工号，姓名，工资，以及工资提高百分之20-后的结果（new-salary）" class="headerlink" title="2.查询员工号，姓名，工资，以及工资提高百分之20%后的结果（new salary）"></a>2.查询员工号，姓名，工资，以及工资提高百分之20%后的结果（new salary）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.employee_id,</span><br><span class="line">	t1.last_name,</span><br><span class="line">	t1.salary,</span><br><span class="line">	salary <span class="operator">*</span> <span class="number">1.2</span> <span class="string">&#x27;new salary&#x27;</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/74.png" alt="74.png"></p>
<h3 id="3-将员工的姓名按首字母排序，并写出姓名的长度（length）"><a href="#3-将员工的姓名按首字母排序，并写出姓名的长度（length）" class="headerlink" title="3.将员工的姓名按首字母排序，并写出姓名的长度（length）"></a>3.将员工的姓名按首字母排序，并写出姓名的长度（length）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	LENGTH( last_name ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	last_name;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/73.png" alt="73.png"></p>
<h3 id="4-查询员工id-last-name-salary，并作为一个列输出，别名为OUT-PUT"><a href="#4-查询员工id-last-name-salary，并作为一个列输出，别名为OUT-PUT" class="headerlink" title="4.查询员工id,last_name,salary，并作为一个列输出，别名为OUT_PUT"></a>4.查询员工id,last_name,salary，并作为一个列输出，别名为OUT_PUT</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	CONCAT( employee_id, <span class="string">&#x27;-&#x27;</span>, last_name, <span class="string">&#x27;-&#x27;</span>, salary ) <span class="keyword">AS</span> <span class="string">&#x27;OUT_PUT&#x27;</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/75.png" alt="75.png"></p>
<h3 id="5-查询公司各员工工作的年数、工作的天数，并按工作年数的降序排序"><a href="#5-查询公司各员工工作的年数、工作的天数，并按工作年数的降序排序" class="headerlink" title="5.查询公司各员工工作的年数、工作的天数，并按工作年数的降序排序"></a>5.查询公司各员工工作的年数、工作的天数，并按工作年数的降序排序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	<span class="built_in">EXTRACT</span>(<span class="keyword">YEAR</span> <span class="keyword">FROM</span> NOW()) <span class="operator">-</span> <span class="built_in">EXTRACT</span>(<span class="keyword">YEAR</span> <span class="keyword">FROM</span> hire_date) <span class="keyword">AS</span> <span class="string">&#x27;job_year&#x27;</span>,</span><br><span class="line">	DATEDIFF(NOW(),hire_date) <span class="keyword">AS</span> <span class="string">&#x27;job_day&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> job_year <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/76.png" alt="76.png"></p>
<h3 id="6-查询员工姓名，hire-date-department-id，满足以下条件：雇用时间在1997年之后，department-id-为80-或-90-或110-commission-pct不为空"><a href="#6-查询员工姓名，hire-date-department-id，满足以下条件：雇用时间在1997年之后，department-id-为80-或-90-或110-commission-pct不为空" class="headerlink" title="6.查询员工姓名，hire_date , department_id，满足以下条件：雇用时间在1997年之后，department_id 为80 或 90 或110, commission_pct不为空"></a>6.查询员工姓名，hire_date , department_id，满足以下条件：雇用时间在1997年之后，department_id 为80 或 90 或110, commission_pct不为空</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	department_id,</span><br><span class="line">	hire_date </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	<span class="built_in">EXTRACT</span>( <span class="keyword">YEAR</span> <span class="keyword">FROM</span> hire_date ) <span class="operator">&gt;=</span> <span class="number">1997</span> </span><br><span class="line">	<span class="keyword">AND</span> department_id <span class="keyword">IN</span> ( <span class="number">80</span>, <span class="number">90</span>, <span class="number">110</span> )</span><br><span class="line">	<span class="keyword">AND</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/77.png" alt="77.png"></p>
<h3 id="7-查询公司中入职超过10000天的员工姓名、入职时间"><a href="#7-查询公司中入职超过10000天的员工姓名、入职时间" class="headerlink" title="7.查询公司中入职超过10000天的员工姓名、入职时间"></a>7.查询公司中入职超过10000天的员工姓名、入职时间</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	department_id,</span><br><span class="line">	hire_date,</span><br><span class="line">	DATEDIFF( NOW(), hire_date ) <span class="keyword">AS</span> &quot;job_days&quot;</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	DATEDIFF( NOW(), hire_date ) <span class="operator">&gt;</span> <span class="number">10000</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> job_days <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/78.png" alt="78.png"></p>
<h3 id="8-根据不同的工种打印出不同的等级"><a href="#8-根据不同的工种打印出不同的等级" class="headerlink" title="8.根据不同的工种打印出不同的等级"></a>8.根据不同的工种打印出不同的等级</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  last_name,</span><br><span class="line">	job_id,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">		job_id </span><br><span class="line">		<span class="keyword">WHEN</span> <span class="string">&#x27;AD_PRES&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="string">&#x27;A&#x27;</span> </span><br><span class="line">		<span class="keyword">WHEN</span> <span class="string">&#x27;ST_MAN&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="string">&#x27;B&#x27;</span> </span><br><span class="line">		<span class="keyword">WHEN</span> <span class="string">&#x27;IT_PROG&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="string">&#x27;C&#x27;</span> </span><br><span class="line">		<span class="keyword">WHEN</span> <span class="string">&#x27;SA_REP&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="string">&#x27;D&#x27;</span> </span><br><span class="line">		<span class="keyword">WHEN</span> <span class="string">&#x27;ST_CLERK&#x27;</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="string">&#x27;E&#x27;</span> </span><br><span class="line">	<span class="keyword">END</span> &quot;Grade&quot; </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	job_id <span class="keyword">IN</span> ( <span class="string">&#x27;AD_PRES&#x27;</span>, <span class="string">&#x27;ST_MAN&#x27;</span>, <span class="string">&#x27;IT_PROG&#x27;</span>, <span class="string">&#x27;SA_REP&#x27;</span>, <span class="string">&#x27;ST_CLERK&#x27;</span> ) </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	Grade;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/79.png" alt="79.png"></p>
<h2 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h2><p>聚合函数是对一组数据进行汇总的函数，输入的是一组数据的集合，输出的是单个值。</p>
<h3 id="AVG-求平均值"><a href="#AVG-求平均值" class="headerlink" title="AVG 求平均值"></a>AVG 求平均值</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h3 id="SUM-求总和"><a href="#SUM-求总和" class="headerlink" title="SUM 求总和"></a>SUM 求总和</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(salary) <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h3 id="MAX-最大值"><a href="#MAX-最大值" class="headerlink" title="MAX 最大值"></a>MAX 最大值</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary) <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h3 id="MIN-最小值"><a href="#MIN-最小值" class="headerlink" title="MIN 最小值"></a>MIN 最小值</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary) <span class="keyword">FROM</span> employees</span><br></pre></td></tr></table></figure>

<p>MAX 和 MIN 也可以对字符串，日期等格式的数据进行比较</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(hire_date),<span class="built_in">MIN</span>(hire_date) <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h3 id="COUNT-计算总和"><a href="#COUNT-计算总和" class="headerlink" title="COUNT 计算总和"></a>COUNT 计算总和</h3><p>COUNT 计算字段的总和，不会考虑null值，如果字段为null则不会计算到总和中</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> <span class="string">&#x27;LimitSize&#x27;</span> <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<p>练习：计算员工的奖金平均率</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 错误的：因为avg也不会考虑null值，如果员工的commission_pct为null就不会参与到平均值的计算</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(commission_pct) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 正确的：计算平均值时先判断这个数据为null，如果是null则用0去参与平均值计算</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(IFNULL(commission_pct,<span class="number">0</span>)) <span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="comment">-- 或者</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(commission_pct) <span class="operator">/</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h3 id="GROUP-BY-分组"><a href="#GROUP-BY-分组" class="headerlink" title="GROUP BY 分组"></a>GROUP BY 分组</h3><p>按照公司的部门进行分组，求出每个部门的平均工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	department_id,</span><br><span class="line">	<span class="built_in">AVG</span>( salary ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	department_id;</span><br></pre></td></tr></table></figure>

<p>按照公司部门进行分组，求出每个部门的平均工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	job_id,</span><br><span class="line">	<span class="built_in">AVG</span>( salary ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	job_id;</span><br></pre></td></tr></table></figure>

<p>WITH ROLLUP 的使用</p>
<p>WITH ROLLUP 关键字会在查询出来的基础上之后对查询出来的数据再来一次分组，并求出平均值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	department_id,</span><br><span class="line">	<span class="built_in">AVG</span>( salary ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	department_id <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>结论1：<code>SELECT</code> 中出现的非组函数的字段必须声明在 <code>GROUP BY</code> 中，反之，<code>GROUP BY</code> 中声明的字段可以不出现在 <code>SELECT</code> 中</li>
<li>结论2：<code>GROUP BY</code> 声明在 <code>FROM</code> 后面，<code>WHERE</code> 后面，<code>ORDER BY</code> 前面，<code>LIMIT </code>前面</li>
<li>结论3：使用 <code> WITH ROLLUP</code> 关键字后不能进行排序操作，因为数据之间互斥</li>
</ul>
<h3 id="HAVING-的使用"><a href="#HAVING-的使用" class="headerlink" title="HAVING 的使用"></a>HAVING 的使用</h3><p>当过滤条件中存在聚合函数时，使用 <code>HANING</code> 来添加过滤</p>
<p>例子：查询10,20,30,40这四个部门中的最高工资大于10000的部门有哪些</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	department_id,</span><br><span class="line">	<span class="built_in">MAX</span>( salary ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	department_id <span class="keyword">IN</span> ( <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span> ) </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	department_id </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	<span class="built_in">MAX</span>( salary ) <span class="operator">&gt;</span> <span class="number">10000</span>;</span><br></pre></td></tr></table></figure>

<p>结论：</p>
<ul>
<li>当过滤条件中有聚合函数时，则这个过滤条件必须声明在 <code>HAVING</code> 中</li>
<li>当过滤条件中没有聚合函数时，则这个过滤条件声明在 <code>WHERE</code> 中，<code>HAVING</code> 中也可以声明，但是不推荐，效率不高</li>
</ul>
<p><code>WHERE</code> 和 <code>HAVING</code> 的对比：</p>
<ul>
<li>从适用范围来讲，<code>HAVING</code> 的使用范围更广</li>
<li>如果过滤条件中没有聚合函数，<code>WHERE</code> 的执行效率要更高</li>
</ul>
<p>SQL 语句的执行过程</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ... (<span class="keyword">LEFT</span> <span class="operator">/</span> <span class="keyword">RIGHT</span>) <span class="keyword">JOIN</span> ... <span class="keyword">ON</span> ... <span class="keyword">WHERE</span> ... <span class="keyword">GROUP</span> <span class="keyword">BY</span> ... <span class="keyword">HAVING</span> ... <span class="keyword">SELECT</span> ... <span class="keyword">DISTINCT</span> ... <span class="keyword">ORDER</span> <span class="keyword">BY</span> ... LIMIT</span><br></pre></td></tr></table></figure>

<h2 id="聚合函数练习"><a href="#聚合函数练习" class="headerlink" title="聚合函数练习"></a>聚合函数练习</h2><h3 id="1-where子句可否使用组函数进行过滤"><a href="#1-where子句可否使用组函数进行过滤" class="headerlink" title="1.where子句可否使用组函数进行过滤?"></a>1.where子句可否使用组函数进行过滤?</h3><p>答案：不可以</p>
<h3 id="2-查询公司员工工资的最大值，最小值，平均值，总和"><a href="#2-查询公司员工工资的最大值，最小值，平均值，总和" class="headerlink" title="2.查询公司员工工资的最大值，最小值，平均值，总和"></a>2.查询公司员工工资的最大值，最小值，平均值，总和</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="built_in">MAX</span>( salary ),</span><br><span class="line">	<span class="built_in">MIN</span>( salary ),</span><br><span class="line">	<span class="built_in">AVG</span>( salary ),</span><br><span class="line">	<span class="built_in">SUM</span>( salary ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/80.png" alt="80.png"></p>
<h3 id="3-查询各job-id的员工工资的最大值，最小值，平均值，总和"><a href="#3-查询各job-id的员工工资的最大值，最小值，平均值，总和" class="headerlink" title="3.查询各job_id的员工工资的最大值，最小值，平均值，总和"></a>3.查询各job_id的员工工资的最大值，最小值，平均值，总和</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	job_id,</span><br><span class="line">	<span class="built_in">MAX</span>( salary ),</span><br><span class="line">	<span class="built_in">MIN</span>( salary ),</span><br><span class="line">	<span class="built_in">AVG</span>( salary ),</span><br><span class="line">	<span class="built_in">SUM</span>( salary ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	job_id;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/81.png" alt="81.png"></p>
<h3 id="4-查询各个job-id下的员工人数"><a href="#4-查询各个job-id下的员工人数" class="headerlink" title="4.查询各个job_id下的员工人数"></a>4.查询各个job_id下的员工人数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	job_id,</span><br><span class="line">	<span class="built_in">COUNT</span>(<span class="operator">*</span>) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	job_id;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/82.png" alt="82.png"></p>
<h3 id="5-查询员工最高工资和最低工资的差距（DIFFERENCE）"><a href="#5-查询员工最高工资和最低工资的差距（DIFFERENCE）" class="headerlink" title="5.查询员工最高工资和最低工资的差距（DIFFERENCE）"></a>5.查询员工最高工资和最低工资的差距（DIFFERENCE）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="built_in">MAX</span>( salary ) <span class="operator">-</span> <span class="built_in">MIN</span>( salary ) <span class="keyword">AS</span> &quot;DIFFERENCE&quot; </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/83.png" alt="83.png"></p>
<h3 id="6-查询各个管理者手下员工的最低工资，其中最低工资不能低于6000，没有管理者的员工不计算在内"><a href="#6-查询各个管理者手下员工的最低工资，其中最低工资不能低于6000，没有管理者的员工不计算在内" class="headerlink" title="6.查询各个管理者手下员工的最低工资，其中最低工资不能低于6000，没有管理者的员工不计算在内"></a>6.查询各个管理者手下员工的最低工资，其中最低工资不能低于6000，没有管理者的员工不计算在内</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	manager_id,</span><br><span class="line">	<span class="built_in">MIN</span>( salary ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	manager_id <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	manager_id </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	<span class="built_in">MIN</span>( salary ) <span class="operator">&gt;=</span> <span class="number">6000</span>;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/84.png" alt="84.png"></p>
<h3 id="7-查询所有部门的名字，location-id，员工数量和平均工资，并按平均工资降序"><a href="#7-查询所有部门的名字，location-id，员工数量和平均工资，并按平均工资降序" class="headerlink" title="7.查询所有部门的名字，location_id，员工数量和平均工资，并按平均工资降序"></a>7.查询所有部门的名字，location_id，员工数量和平均工资，并按平均工资降序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t2.department_name,</span><br><span class="line">	t2.location_id,</span><br><span class="line">	<span class="built_in">COUNT</span>( t1.employee_id ),</span><br><span class="line">	<span class="built_in">AVG</span>( t1.salary ) <span class="keyword">AS</span> &quot;avg_salary&quot;</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	t2.department_name,t2.location_id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	avg_salary <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/85.png" alt="85.png"></p>
<h3 id="8-查询每个工种、每个部门的部门名、工种名和最低工资"><a href="#8-查询每个工种、每个部门的部门名、工种名和最低工资" class="headerlink" title="8.查询每个工种、每个部门的部门名、工种名和最低工资"></a>8.查询每个工种、每个部门的部门名、工种名和最低工资</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t2.department_name,</span><br><span class="line">	t1.job_id,</span><br><span class="line">	<span class="built_in">MIN</span>( t1.salary ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments t2 <span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	t1.job_id,</span><br><span class="line">	t2.department_name;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/images/86.png" alt="86.png"></p>
<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p>子查询也被称为内查询，内查询的先与外查询执行</p>
<h3 id="子查询的分类"><a href="#子查询的分类" class="headerlink" title="子查询的分类"></a>子查询的分类</h3><p>从内查询的返回结果数量上看分为：<code>单行子查询</code> VS <code>多行子查询</code>。</p>
<p>从内查询是否被执行多次，可以分为：<code>相关子查询</code> VS <code>不相关子查询</code></p>
<h3 id="引入子查询"><a href="#引入子查询" class="headerlink" title="引入子查询"></a>引入子查询</h3><p>我们往往在查询一个数据时，可能要根据其他的查询结果来帮助我们查询。例如：查询比Abel工资高的员工。我们处理这道题首先要知道Abel的工资是多少才能查询到比Abel工资高的员工</p>
<p>方式一：分开查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="number">11000</span>;</span><br></pre></td></tr></table></figure>

<p>方式二：使用自关联。不通用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.last_name,</span><br><span class="line">	t1.salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">JOIN</span> employees t2 <span class="keyword">ON</span> t1.salary <span class="operator">&gt;</span> t2.salary </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t2.last_name <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>方式三：使用子查询的方式在一条SQL语句中完成查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	salary <span class="operator">&gt;</span> ( <span class="keyword">SELECT</span> salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">&#x27;Abel&#x27;</span> );</span><br></pre></td></tr></table></figure>

<p>使用一个 <code>()</code> 将另外一个查询语句包起来去比较，这种方式称为子查询。</p>
<h3 id="单行子查询"><a href="#单行子查询" class="headerlink" title="单行子查询"></a>单行子查询</h3><p>适用于单行子查询的比较符</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>=</td>
<td>等于</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于等于</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于等于</td>
</tr>
<tr>
<td>!=</td>
<td>不等于</td>
</tr>
</tbody></table>
<p>查询员工工资大于149号员工工资的信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	salary <span class="operator">&gt;</span> ( <span class="keyword">SELECT</span> salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">149</span> );</span><br></pre></td></tr></table></figure>

<p>返回job_id与141号员工相同，salary比143号员工多的员工姓名，job_id和工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	job_id,</span><br><span class="line">	salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	job_id <span class="operator">=</span> ( <span class="keyword">SELECT</span> job_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">141</span> ) </span><br><span class="line">	<span class="keyword">AND</span> salary <span class="operator">&gt;</span> ( <span class="keyword">SELECT</span> salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">143</span> );</span><br></pre></td></tr></table></figure>

<p>返回公司工资最少的员工的last_name,job_id和salary</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	job_id,</span><br><span class="line">	salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	salary <span class="operator">=</span> ( <span class="keyword">SELECT</span> <span class="built_in">MIN</span>( salary ) <span class="keyword">FROM</span> employees );</span><br></pre></td></tr></table></figure>

<p>查询与141号员工的manager_id和department_id相同的其他员工的employee_id， manager_id，department_id</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	manager_id,</span><br><span class="line">	department_id </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	manager_id <span class="operator">=</span> ( <span class="keyword">SELECT</span> manager_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">141</span> ) </span><br><span class="line">	<span class="keyword">AND</span> department_id <span class="operator">=</span> ( <span class="keyword">SELECT</span> department_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">141</span> ) </span><br><span class="line">	<span class="keyword">AND</span> employee_id <span class="operator">!=</span> <span class="number">141</span>;</span><br></pre></td></tr></table></figure>

<p>查询最低工资大于50号部门最低工资的部门id和其最低工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	department_id,</span><br><span class="line">	<span class="built_in">MIN</span>( salary ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	department_id </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	<span class="built_in">MIN</span>( salary ) <span class="operator">&gt;</span> ( <span class="keyword">SELECT</span> <span class="built_in">MIN</span>( salary ) <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">50</span> );</span><br></pre></td></tr></table></figure>

<p>显式员工的employee_id,last_name和location。其中，若员工department_id与location_id为1800 的department_id相同，则location为’Canada’，其余则为’USA’。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">		</span><br><span class="line">		<span class="keyword">WHEN</span> department_id <span class="operator">=</span> ( <span class="keyword">SELECT</span> department_id <span class="keyword">FROM</span> departments <span class="keyword">WHERE</span> location_id <span class="operator">=</span> <span class="number">1800</span> ) <span class="keyword">THEN</span></span><br><span class="line">		<span class="string">&#x27;Canada&#x27;</span> <span class="keyword">ELSE</span> <span class="string">&#x27;USA&#x27;</span> </span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">AS</span> &quot;location&quot; </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees;</span><br></pre></td></tr></table></figure>

<h3 id="多行子查询"><a href="#多行子查询" class="headerlink" title="多行子查询"></a>多行子查询</h3><table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>IN</td>
<td>等于列表中的任意一个</td>
</tr>
<tr>
<td>ANY</td>
<td>需要和单行比较符一起使用，和子查询返回的某一个值比较</td>
</tr>
<tr>
<td>ALL</td>
<td>需要和单行比较符一起使用，和子查询返回的所有值比较</td>
</tr>
</tbody></table>
<p>返回其它job_id中比job_id为‘IT_PROG’的部门任一工资低的员工的员工号、姓名、job_id 以及salary</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	job_id,</span><br><span class="line">	salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	job_id <span class="operator">!=</span> <span class="string">&#x27;IT_PROG&#x27;</span> </span><br><span class="line">	<span class="keyword">AND</span> salary <span class="operator">&lt;</span> <span class="keyword">ANY</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		salary </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		employees </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">		job_id <span class="operator">=</span> <span class="string">&#x27;IT_PROG&#x27;</span> </span><br><span class="line">	);</span><br></pre></td></tr></table></figure>

<p>返回其它job_id中比job_id为‘IT_PROG’部门所有工资都低的员工的员工号、姓名、job_id以及 salary</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	job_id,</span><br><span class="line">	salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	job_id <span class="operator">!=</span> <span class="string">&#x27;IT_PROG&#x27;</span> </span><br><span class="line">	<span class="keyword">AND</span> salary <span class="operator">&lt;</span> <span class="keyword">ALL</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		salary </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		employees </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">		job_id <span class="operator">=</span> <span class="string">&#x27;IT_PROG&#x27;</span> </span><br><span class="line">	);</span><br></pre></td></tr></table></figure>

<p>查询平均工资最低的部门id</p>
<p>这道题的解题思路：</p>
<p>1.首先查询出各个部门的平均工资，并且给列起一个别名 <code>avg_salary</code></p>
<p>2.然后将上面查询出的结果作为一个表，并查询出最小值，FROM 后面也可以是一个子查询，这里要给这个表起一个别名 <code>t_avg_salary</code></p>
<p>3.最后在外查询中查询每个部门的平均工资，让平均工资等于第二步查出来的最低工资即可得到最终结果</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	department_id,</span><br><span class="line">	<span class="built_in">AVG</span>( salary ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	department_id </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	<span class="built_in">AVG</span>( salary ) <span class="operator">=</span> ( <span class="keyword">SELECT</span> <span class="built_in">MIN</span>( avg_salary ) <span class="keyword">FROM</span> ( <span class="keyword">SELECT</span> <span class="built_in">AVG</span>( salary ) avg_salary <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id ) t_avg_salary );</span><br></pre></td></tr></table></figure>

<p>还有第二种方法</p>
<p>1.先查询出所有部门的平均工资</p>
<p>2.然后再外查询中也去查询所有部门的平均工资</p>
<p>3.添加过滤条件，让外查询的平均工资小于等于所有子查询的平均工资，这样会自动定位到最低的一个平均工资，然后正确返回查询结果</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	department_id,</span><br><span class="line">	<span class="built_in">AVG</span>( salary ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	department_id </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	<span class="built_in">AVG</span>( salary ) <span class="operator">&lt;=</span> <span class="keyword">ALL</span> ( <span class="keyword">SELECT</span> <span class="built_in">AVG</span>( salary ) avg_salary <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id );</span><br></pre></td></tr></table></figure>

<h3 id="相关子查询"><a href="#相关子查询" class="headerlink" title="相关子查询"></a>相关子查询</h3><p>如果子查询的执行依赖于外部查询，通常情况下是因为子查询中的表用到了外部表，并进行了条件关联，因此每执行一次外部查询，子查询都要重新计算一次，这样的子查询就称为关联子查询。</p>
<p>查询员工中工资大于本部门平均工资的员工的last_name,salary和其department_id</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式一：使用相关子查询</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	e1.last_name, </span><br><span class="line">	e1.salary, </span><br><span class="line">	e1.department_id </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	employees e1 </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">	e1.salary <span class="operator">&gt;</span> ( <span class="keyword">SELECT</span> <span class="built_in">AVG</span>( salary ) <span class="keyword">FROM</span> employees e2 <span class="keyword">WHERE</span> e1.department_id <span class="operator">=</span> e2.department_id <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id );</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二：在 FROM 中使用子查询</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	e1.last_name,</span><br><span class="line">	e1.salary,</span><br><span class="line">	e1.department_id </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees e1</span><br><span class="line">	<span class="keyword">JOIN</span> ( <span class="keyword">SELECT</span> department_id, <span class="built_in">AVG</span>( salary ) avg_salary <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id ) e2 <span class="keyword">ON</span> e1.department_id <span class="operator">=</span> e2.department_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	e1.salary <span class="operator">&gt;</span> e2.avg_salary;</span><br></pre></td></tr></table></figure>

<p>查询员工的id,salary,按照department_name 排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式一：使用自连接</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	e.employee_id,</span><br><span class="line">	e.salary,</span><br><span class="line">	d.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees e</span><br><span class="line">	<span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	d.department_name;</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- 方式二：在 ORDER BY 中使用子查询</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	e.employee_id,</span><br><span class="line">	e.salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees e </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	( <span class="keyword">SELECT</span> department_name <span class="keyword">FROM</span> departments d <span class="keyword">WHERE</span> e.department_id <span class="operator">=</span> department_id );</span><br></pre></td></tr></table></figure>

<p>若employees表中employee_id与job_history表中employee_id相同的数目不小于2，输出这些相同id的员工的employee_id,last_name和其job_id</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 根据外查询获取到当前员工id，去job_history表中查找这个员工id的数量大于等于2的，然后把结果返回</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	job_id </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees e </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	<span class="number">2</span> <span class="operator">&lt;=</span> ( <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> job_history j <span class="keyword">WHERE</span> e.employee_id <span class="operator">=</span> j.employee_id );</span><br></pre></td></tr></table></figure>

<h3 id="EXISTS-与-NOT-EXISTS关键字"><a href="#EXISTS-与-NOT-EXISTS关键字" class="headerlink" title="EXISTS 与 NOT EXISTS关键字"></a>EXISTS 与 NOT EXISTS关键字</h3><p>关联子查询通常也会和 EXISTS 操作符一起使用，用来检查子查询中是否存在满足条件的行</p>
<ul>
<li><p>如果在子查询中不存在满足条件的行</p>
<ul>
<li>条件返回false</li>
<li>继续在子查询中查找</li>
</ul>
</li>
<li><p>如果在子查询中存在满足条件的行</p>
<ul>
<li>不在子查询中继续查找</li>
<li>条件返回true</li>
</ul>
</li>
<li><p>NOT EXISTS 关键字表示如果不存在某种条件，则返回true，否则返回false</p>
</li>
</ul>
<p>查询公司管理者的employee_id，last_name，job_id，department_id信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式一：</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span></span><br><span class="line">	e2.employee_id,</span><br><span class="line">	e2.last_name,</span><br><span class="line">	e2.job_id,</span><br><span class="line">	e2.department_id </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees e1</span><br><span class="line">	<span class="keyword">JOIN</span> employees e2 <span class="keyword">ON</span> e1.manager_id <span class="operator">=</span> e2.employee_id;</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- 方式二：</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	job_id,</span><br><span class="line">	department_id </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	employee_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> manager_id <span class="keyword">FROM</span> employees);</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- 方式三：</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	e1.employee_id,</span><br><span class="line">	e1.last_name,</span><br><span class="line">	e1.job_id,</span><br><span class="line">	e1.department_id </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees e1 </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	<span class="keyword">EXISTS</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		<span class="operator">*</span> </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		employees e2 </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">		e2.manager_id <span class="operator">=</span> e1.employee_id </span><br><span class="line">	);</span><br></pre></td></tr></table></figure>

<p>查询departments表中，不存在于employees表中的部门的department_id和department_name</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式一：</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	d.department_name,</span><br><span class="line">	d.department_id </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	departments d </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	<span class="keyword">NOT</span> <span class="keyword">EXISTS</span> ( <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees e <span class="keyword">WHERE</span> e.department_id <span class="operator">=</span> d.department_id );</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二：</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	d.department_name,</span><br><span class="line">	d.department_id </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees e</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	e.employee_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<h2 id="子查询练习"><a href="#子查询练习" class="headerlink" title="子查询练习"></a>子查询练习</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">1.</span>查询和Zlotkey相同部门的员工姓名和工资 </span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	department_id <span class="keyword">IN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		department_id </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		employees </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">	last_name <span class="operator">=</span> <span class="string">&#x27;Zlotkey&#x27;</span>);</span><br><span class="line"></span><br><span class="line">#<span class="number">2.</span>查询工资比公司平均工资高的员工的员工号，姓名和工资。 </span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	salary <span class="operator">&gt;</span> ( <span class="keyword">SELECT</span> <span class="built_in">AVG</span>( salary ) <span class="keyword">FROM</span> employees );</span><br><span class="line"></span><br><span class="line">#<span class="number">3.</span>选择工资大于所有JOB_ID <span class="operator">=</span> <span class="string">&#x27;SA_MAN&#x27;</span>的员工的工资的员工的last_name, job_id, salary </span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	job_id,</span><br><span class="line">	salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	salary <span class="operator">&gt;</span> <span class="keyword">ALL</span> ( <span class="keyword">SELECT</span> salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> job_id <span class="operator">=</span> <span class="string">&#x27;SA_MAN&#x27;</span> );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">4.</span>查询和姓名中包含字母u的员工在相同部门的员工的员工号和姓名 </span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	department_id <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> department_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%u%&#x27;</span> );</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">#<span class="number">5.</span>查询在部门的location_id为<span class="number">1700</span>的部门工作的员工的员工号 </span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	department_id <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> department_id <span class="keyword">FROM</span> departments <span class="keyword">WHERE</span> location_id <span class="operator">=</span> <span class="number">1700</span> );</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">#<span class="number">6.</span>查询管理者是King的员工姓名和工资 </span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	manager_id <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> employee_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">&#x27;King&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">7.</span>查询工资最低的员工信息: last_name, salary </span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	last_name,</span><br><span class="line">	salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	salary <span class="operator">=</span> ( <span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary) <span class="keyword">FROM</span> employees );</span><br><span class="line"></span><br><span class="line">#<span class="number">8.</span>查询平均工资最低的部门信息</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式一：</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	departments </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	department_id <span class="operator">=</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		department_id </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		employees </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		department_id </span><br><span class="line">	<span class="keyword">HAVING</span></span><br><span class="line">		<span class="built_in">AVG</span>( salary ) <span class="operator">=</span> ( <span class="keyword">SELECT</span> <span class="built_in">MIN</span>( avg_salary ) <span class="keyword">FROM</span> ( <span class="keyword">SELECT</span> department_id, <span class="built_in">AVG</span>( salary ) avg_salary <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id ) t_avg_salary ) </span><br><span class="line">	);</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- 方式二：使用 LIMIT 和 FROM 子查询来做</span></span><br><span class="line"><span class="keyword">SELECT</span> t1.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> departments t1 <span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary) avg_sal</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> avg_sal</span><br><span class="line">LIMIT <span class="number">1</span>) t2</span><br><span class="line"><span class="keyword">ON</span> t1.department_id <span class="operator">=</span> t2.department_id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">9.</span>查询平均工资最低的部门信息和该部门的平均工资（相关子查询） </span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	d.<span class="operator">*</span>,</span><br><span class="line">	<span class="built_in">AVG</span>( e.salary ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees e <span class="keyword">JOIN</span> departments d</span><br><span class="line">	<span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	e.department_id </span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">	<span class="built_in">AVG</span>( e.salary ) <span class="operator">=</span> ( <span class="keyword">SELECT</span> <span class="built_in">MIN</span>( avg_salary ) <span class="keyword">FROM</span> ( <span class="keyword">SELECT</span> department_id, <span class="built_in">AVG</span>( salary ) avg_salary <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id ) t_avg_salary );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">10.</span>查询平均工资最高的 job 信息 </span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	jobs t1</span><br><span class="line">	<span class="keyword">JOIN</span> ( <span class="keyword">SELECT</span> job_id, <span class="built_in">AVG</span>( salary ) avg_salary <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id <span class="keyword">ORDER</span> <span class="keyword">BY</span> avg_salary <span class="keyword">DESC</span> LIMIT <span class="number">1</span> ) t2 </span><br><span class="line">	<span class="keyword">ON</span> t1.job_id <span class="operator">=</span> t2.job_id;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">#<span class="number">11.</span>查询平均工资高于公司平均工资的部门有哪些? </span><br><span class="line"><span class="keyword">SELECT</span> department_id, <span class="built_in">AVG</span>( salary ) </span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id </span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">AVG</span>( salary ) <span class="operator">&gt;</span> ( <span class="keyword">SELECT</span> <span class="built_in">AVG</span>( salary ) <span class="keyword">FROM</span> employees );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">12.</span>查询出公司中所有 manager 的详细信息 </span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	e1.employee_id,</span><br><span class="line">	e1.last_name,</span><br><span class="line">	e1.salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees e1 </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	<span class="keyword">EXISTS</span> ( <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees e2 <span class="keyword">WHERE</span> e1.employee_id <span class="operator">=</span> e2.manager_id );</span><br><span class="line"></span><br><span class="line">#<span class="number">13.</span>各个部门中 最高工资中最低的那个部门的 最低工资是多少?</span><br><span class="line"><span class="comment">-- 1.先查询出各个部门的最高工资中最低的哪一个部门</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">MAX</span>(salary) max_sal</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> max_sal</span><br><span class="line">LIMIT <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.再查询出步骤1所在部门的最低工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(t1.salary)</span><br><span class="line"><span class="keyword">FROM</span> employees t1,( <span class="keyword">SELECT</span> department_id,<span class="built_in">MAX</span>(salary) max_sal</span><br><span class="line">										<span class="keyword">FROM</span> employees</span><br><span class="line">										<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">										<span class="keyword">ORDER</span> <span class="keyword">BY</span> max_sal</span><br><span class="line">										LIMIT <span class="number">1</span> ) t2</span><br><span class="line">										<span class="keyword">WHERE</span> t1.department_id <span class="operator">=</span> t2.department_id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">14.</span>查询平均工资最高的部门的 manager 的详细信息: last_name, department_id, email, salary</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.先找出平均工资最高的部门</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary) avg_salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> avg_salary <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.找出部门为90的管理者</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> t2.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees t1,employees t2,(<span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary) avg_salary</span><br><span class="line">																<span class="keyword">FROM</span> employees</span><br><span class="line">																<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">																<span class="keyword">ORDER</span> <span class="keyword">BY</span> avg_salary <span class="keyword">DESC</span></span><br><span class="line">																LIMIT <span class="number">1</span>) t3</span><br><span class="line">																<span class="keyword">WHERE</span> t1.manager_id <span class="operator">=</span> t2.employee_id</span><br><span class="line">																<span class="keyword">AND</span> t2.manager_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line">																<span class="keyword">AND</span> t2.department_id <span class="operator">=</span> t3.department_id;</span><br><span class="line"></span><br><span class="line">#<span class="number">15.</span> 查询部门的部门号，其中不包括job_id是&quot;ST_CLERK&quot;的部门号 </span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> job_id <span class="operator">=</span> <span class="string">&#x27;ST_CLERK&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式一：先找出jobid等于ST_CLERK的部门有哪些，然后再找出部门id不在这几个部门的数据有哪些</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line"><span class="keyword">FROM</span> departments</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department_id</span><br><span class="line">														<span class="keyword">FROM</span> employees</span><br><span class="line">														<span class="keyword">WHERE</span> job_id <span class="operator">=</span> <span class="string">&#x27;ST_CLERK&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二：使用 NOT EXISTS</span></span><br><span class="line"><span class="keyword">SELECT</span> t1.department_id</span><br><span class="line"><span class="keyword">FROM</span> departments t1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> t2.department_id</span><br><span class="line">									<span class="keyword">FROM</span> employees t2</span><br><span class="line">									<span class="keyword">WHERE</span> t2.job_id <span class="operator">=</span> <span class="string">&#x27;ST_CLERK&#x27;</span></span><br><span class="line">									<span class="keyword">AND</span> t1.department_id <span class="operator">=</span> t2.department_id);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">16.</span> 选择所有没有管理者的员工的last_name </span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.last_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees t1</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees t2 <span class="keyword">ON</span> t1.manager_id <span class="operator">=</span> t2.employee_id </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	t1.manager_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line">#<span class="number">17</span>．查询员工号、姓名、雇用时间、工资，其中员工的管理者为 <span class="string">&#x27;De Haan&#x27;</span> </span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	hire_date,</span><br><span class="line">	salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	manager_id <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> employee_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">&#x27;De Haan&#x27;</span> );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">18.</span>查询各部门中工资比本部门平均工资高的员工的员工号, 姓名和工资（相关子查询） </span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> t1.employee_id,t1.last_name,t1.salary</span><br><span class="line"><span class="keyword">FROM</span> employees t1</span><br><span class="line"><span class="keyword">WHERE</span> t1.salary <span class="operator">&gt;</span>  (</span><br><span class="line">								<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(t2.salary)</span><br><span class="line">								<span class="keyword">FROM</span> employees t2</span><br><span class="line">								<span class="keyword">WHERE</span>	t1.department_id <span class="operator">=</span> t2.department_id</span><br><span class="line">								<span class="keyword">GROUP</span> <span class="keyword">BY</span> t2.department_id	</span><br><span class="line">								);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	e1.employee_id,</span><br><span class="line">	e1.last_name,</span><br><span class="line">	e1.department_id,</span><br><span class="line">	e1.salary </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	employees e1 </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	<span class="keyword">EXISTS</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		e2.department_id,</span><br><span class="line">		<span class="built_in">AVG</span>( e2.salary ) </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		employees e2 </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">		e1.department_id <span class="operator">=</span> e2.department_id </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		e2.department_id </span><br><span class="line">	<span class="keyword">HAVING</span></span><br><span class="line">		e1.salary <span class="operator">&gt;</span> <span class="built_in">AVG</span>( e2.salary ) </span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="number">19.</span>查询每个部门下的部门人数大于 <span class="number">5</span> 的部门名称（相关子查询） </span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	d.department_name </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	departments d </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	<span class="keyword">EXISTS</span> ( <span class="keyword">SELECT</span> department_id, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> employees e <span class="keyword">WHERE</span> e.department_id <span class="operator">=</span> d.department_id <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id <span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">5</span> );</span><br><span class="line"></span><br><span class="line">#<span class="number">20.</span>查询每个国家下的部门个数大于 <span class="number">2</span> 的国家编号（相关子查询）</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	l.city,</span><br><span class="line">	l.location_id,</span><br><span class="line">	l.country_id</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	locations l </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	<span class="keyword">EXISTS</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		d.location_id,</span><br><span class="line">		<span class="built_in">COUNT</span>(<span class="operator">*</span>) </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		departments d </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">		d.location_id <span class="operator">=</span> l.location_id </span><br><span class="line">	<span class="keyword">HAVING</span></span><br><span class="line">		<span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">2</span> </span><br><span class="line">	);</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">SZX</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://songzx0106.github.io/Java/MySql/02/">https://songzx0106.github.io/Java/MySql/02/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://SongZX0106.github.io" target="_blank">SZX的开发笔记</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a></div><div class="post_share"><div class="social-share" data-image="/images/ys19.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/js/share.min.css" media="print" onload="this.media='all'"><script src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/images/wechat.png" target="_blank"><img class="post-qr-code-img" data-lazy-src="/images/wechat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/images/alipay.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="/images/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/Java/MySql/03/"><img class="prev-cover" data-lazy-src="/images/ys12.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">03 数据增删改</div></div></a></div><div class="next-post pull-right"><a href="/Java/MySql/01/"><img class="next-cover" data-lazy-src="/images/ys17.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">01 安装和配置</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/Java/MySql/01/" title="01 安装和配置"><img class="cover" data-lazy-src="/images/ys17.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-03</div><div class="title">01 安装和配置</div></div></a></div><div><a href="/Java/MySql/03/" title="03 数据增删改"><img class="cover" data-lazy-src="/images/ys12.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-03</div><div class="title">03 数据增删改</div></div></a></div><div><a href="/Java/MySql/04/" title="04 约束和视图"><img class="cover" data-lazy-src="/images/ys18.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-03</div><div class="title">04 约束和视图</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="/images/favicon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">SZX</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">151</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">36</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://gitee.com/szxio"><i class="iconfont icon-gitee-fill-round"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">welcome to my blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.</span> <span class="toc-text">SQL 的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-%E8%AF%AD%E8%A8%80%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%A7%84%E5%88%99"><span class="toc-number">2.</span> <span class="toc-text">SQL 语言的基本规则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-%E5%A4%A7%E5%B0%8F%E5%86%99%E8%A7%84%E8%8C%83"><span class="toc-number">3.</span> <span class="toc-text">SQL 大小写规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E4%B8%89%E7%A7%8D%E6%B3%A8%E9%87%8A%E6%96%B9%E5%BC%8F"><span class="toc-number">4.</span> <span class="toc-text">MySQL三种注释方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">5.</span> <span class="toc-text">导入数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SELECT-%E2%80%A6-FROM-%E7%BB%93%E6%9E%84"><span class="toc-number">6.</span> <span class="toc-text">SELECT … FROM 结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="toc-number">7.</span> <span class="toc-text">列起别名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E9%A1%B9"><span class="toc-number">8.</span> <span class="toc-text">去除重复项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A9%BA%E5%80%BC%E5%8F%82%E4%B8%8E%E8%BF%90%E7%AE%97"><span class="toc-number">9.</span> <span class="toc-text">空值参与运算</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IFNULL-%E8%A7%A3%E5%86%B3%E7%A9%BA%E5%80%BC"><span class="toc-number">10.</span> <span class="toc-text">IFNULL 解决空值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9D%80%E9%87%8D%E5%8F%B7"><span class="toc-number">11.</span> <span class="toc-text">着重号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%B8%B8%E6%95%B0"><span class="toc-number">12.</span> <span class="toc-text">查询常数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DESC-%E6%98%BE%E7%A4%BA%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">13.</span> <span class="toc-text">DESC 显示表结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WHERE-%E6%9F%A5%E8%AF%A2"><span class="toc-number">14.</span> <span class="toc-text">WHERE 查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">15.</span> <span class="toc-text">SQL 算数运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">16.</span> <span class="toc-text">SQL 比较运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IS-NULL-%E5%92%8C-ISNULL-expr-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">17.</span> <span class="toc-text">IS NULL 和 ISNULL(expr) 的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IS-NOT-NULL-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">18.</span> <span class="toc-text">IS NOT NULL 的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LEAST-%E5%92%8C-GREATEST"><span class="toc-number">19.</span> <span class="toc-text">LEAST 和 GREATEST</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BETWEEN-%E2%80%A6-AND"><span class="toc-number">20.</span> <span class="toc-text">BETWEEN … AND</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IN-val1-val2-%E2%80%A6-%E5%92%8C-NOT-IN-val1-val2-%E2%80%A6"><span class="toc-number">21.</span> <span class="toc-text">IN(val1,val2,…) 和 NOT IN(val1,val2,…)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LIKE-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">22.</span> <span class="toc-text">LIKE 模糊查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#REGEXP"><span class="toc-number">23.</span> <span class="toc-text">REGEXP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">24.</span> <span class="toc-text">逻辑运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%BB%83%E4%B9%A0%E9%A2%98"><span class="toc-number">25.</span> <span class="toc-text">运算练习题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ORDER-BY-%E6%8E%92%E5%BA%8F"><span class="toc-number">26.</span> <span class="toc-text">ORDER BY 排序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E8%A7%84%E5%88%99"><span class="toc-number">26.1.</span> <span class="toc-text">排序规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E5%88%97%E6%8E%92%E5%BA%8F"><span class="toc-number">26.2.</span> <span class="toc-text">单列排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E5%88%97%E6%8E%92%E5%BA%8F"><span class="toc-number">26.3.</span> <span class="toc-text">多列排序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LIMIT-%E5%88%86%E9%A1%B5"><span class="toc-number">27.</span> <span class="toc-text">LIMIT 分页</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E4%B8%8E%E5%88%86%E9%A1%B5%E7%BB%83%E4%B9%A0"><span class="toc-number">28.</span> <span class="toc-text">排序与分页练习</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">29.</span> <span class="toc-text">多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E5%BC%A0%E8%A1%A8%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2"><span class="toc-number">29.1.</span> <span class="toc-text">两张表关联查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2-1"><span class="toc-number">29.2.</span> <span class="toc-text">多表查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">30.</span> <span class="toc-text">多表查询的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5-vs-%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-number">30.1.</span> <span class="toc-text">等值连接 vs 非等值连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5-vs-%E9%9D%9E%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">30.2.</span> <span class="toc-text">自连接 vs 非自连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5-vs-%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">30.3.</span> <span class="toc-text">内连接 vs 外连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL99%E8%AF%AD%E6%B3%95%E4%BD%BF%E7%94%A8JOIN-ON%E5%AE%9E%E7%8E%B0%E5%86%85%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">31.</span> <span class="toc-text">SQL99语法使用JOIN ON实现内外连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL99%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">31.1.</span> <span class="toc-text">SQL99内连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL99%E5%A4%9A%E8%A1%A8%E5%86%85%E9%93%BE%E6%8E%A5"><span class="toc-number">31.2.</span> <span class="toc-text">SQL99多表内链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL99%E5%AE%9E%E7%8E%B0%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5-LEFT-JOIN"><span class="toc-number">31.3.</span> <span class="toc-text">SQL99实现左外连接 LEFT JOIN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL99%E5%AE%9E%E7%8E%B0%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5-RIGHT-JOIN"><span class="toc-number">31.4.</span> <span class="toc-text">SQL99实现右外连接 RIGHT JOIN</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UNION-ALL-%E5%92%8C-UNION"><span class="toc-number">32.</span> <span class="toc-text">UNION ALL 和 UNION</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E7%A7%8DJOIN%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">33.</span> <span class="toc-text">七种JOIN的实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A6%E4%B8%8A%E5%9B%BE"><span class="toc-number">33.1.</span> <span class="toc-text">左上图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%B3%E4%B8%8A%E5%9B%BE"><span class="toc-number">33.2.</span> <span class="toc-text">右上图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A6%E4%B8%AD%E5%9B%BE"><span class="toc-number">33.3.</span> <span class="toc-text">左中图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E5%9B%BE"><span class="toc-number">33.4.</span> <span class="toc-text">中图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%B3%E4%B8%AD%E5%9B%BE"><span class="toc-number">33.5.</span> <span class="toc-text">右中图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A6%E4%B8%8B%E5%9B%BE"><span class="toc-number">33.6.</span> <span class="toc-text">左下图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%B3%E4%B8%8B%E5%9B%BE"><span class="toc-number">33.7.</span> <span class="toc-text">右下图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E5%86%85%E5%A4%96%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E7%BB%83%E4%B9%A0"><span class="toc-number">34.</span> <span class="toc-text">多表内外连接查询练习</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%EF%BC%9AUSING-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">35.</span> <span class="toc-text">扩展：USING 的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="toc-number">36.</span> <span class="toc-text">单行函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%87%BD%E6%95%B0"><span class="toc-number">37.</span> <span class="toc-text">数值函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%87%BD%E6%95%B0"><span class="toc-number">37.1.</span> <span class="toc-text">基本函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0"><span class="toc-number">37.2.</span> <span class="toc-text">三角函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E6%95%B0%E5%92%8C%E5%AF%B9%E6%95%B0"><span class="toc-number">37.3.</span> <span class="toc-text">指数和对数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E5%88%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="toc-number">37.4.</span> <span class="toc-text">进制之间的转换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-number">38.</span> <span class="toc-text">字符串函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0"><span class="toc-number">39.</span> <span class="toc-text">日期和时间函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4"><span class="toc-number">39.1.</span> <span class="toc-text">获取日期时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E6%88%B3%E8%BD%AC%E6%8D%A2"><span class="toc-number">39.2.</span> <span class="toc-text">日期和时间戳转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%9C%88%E4%BB%BD%E3%80%81%E6%98%9F%E6%9C%9F%E3%80%81%E6%98%9F%E6%9C%9F%E6%95%B0%E3%80%81%E5%A4%A9%E6%95%B0%E7%AD%89%E5%87%BD%E6%95%B0"><span class="toc-number">39.3.</span> <span class="toc-text">获取月份、星期、星期数、天数等函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E7%9A%84%E6%93%8D%E4%BD%9C%E5%87%BD%E6%95%B0"><span class="toc-number">39.4.</span> <span class="toc-text">日期的操作函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%92%8C%E7%A7%92%E9%92%9F%E8%BD%AC%E6%8D%A2%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">39.5.</span> <span class="toc-text">时间和秒钟转换的函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">39.6.</span> <span class="toc-text">计算日期和时间的函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%B8%8E%E8%A7%A3%E6%9E%90"><span class="toc-number">39.7.</span> <span class="toc-text">日期格式化与解析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="toc-number">40.</span> <span class="toc-text">流程控制函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IF-expr1-expr2-expr3"><span class="toc-number">40.1.</span> <span class="toc-text">IF(expr1,expr2,expr3)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IFNULL-expr1-expr2"><span class="toc-number">40.2.</span> <span class="toc-text">IFNULL(expr1,expr2)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CASE-WHEN-%E6%9D%A1%E4%BB%B61-THEN-%E7%BB%93%E6%9E%9C1-WHEN-%E6%9D%A1%E4%BB%B62-THEN-%E7%BB%93%E6%9E%9C2-ELSE-%E7%BB%93%E6%9E%9C3-END"><span class="toc-number">40.3.</span> <span class="toc-text">CASE WHEN 条件1 THEN 结果1 WHEN 条件2 THEN 结果2 ELSE 结果3 END</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CASE-%E6%9D%A1%E4%BB%B6-WHEN-%E5%B8%B8%E9%87%8F1-THEN-%E7%BB%93%E6%9E%9C1-WHEN-%E5%B8%B8%E9%87%8F2-THEN-%E7%BB%93%E6%9E%9C2-ELSE-%E7%BB%93%E6%9E%9Cn-END"><span class="toc-number">40.4.</span> <span class="toc-text">CASE 条件 WHEN 常量1 THEN 结果1 WHEN 常量2 THEN 结果2 ELSE 结果n END</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8A%A0%E5%AF%86"><span class="toc-number">41.</span> <span class="toc-text">数据加密</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MD5-str"><span class="toc-number">41.1.</span> <span class="toc-text">MD5(str)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SHA-str"><span class="toc-number">41.2.</span> <span class="toc-text">SHA(str)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%BB%83%E4%B9%A0%E9%A2%98"><span class="toc-number">42.</span> <span class="toc-text">函数练习题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%98%BE%E7%A4%BA%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4"><span class="toc-number">42.1.</span> <span class="toc-text">1.显示系统时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E5%8F%B7%EF%BC%8C%E5%A7%93%E5%90%8D%EF%BC%8C%E5%B7%A5%E8%B5%84%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%B7%A5%E8%B5%84%E6%8F%90%E9%AB%98%E7%99%BE%E5%88%86%E4%B9%8B20-%E5%90%8E%E7%9A%84%E7%BB%93%E6%9E%9C%EF%BC%88new-salary%EF%BC%89"><span class="toc-number">42.2.</span> <span class="toc-text">2.查询员工号，姓名，工资，以及工资提高百分之20%后的结果（new salary）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%B0%86%E5%91%98%E5%B7%A5%E7%9A%84%E5%A7%93%E5%90%8D%E6%8C%89%E9%A6%96%E5%AD%97%E6%AF%8D%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%B9%B6%E5%86%99%E5%87%BA%E5%A7%93%E5%90%8D%E7%9A%84%E9%95%BF%E5%BA%A6%EF%BC%88length%EF%BC%89"><span class="toc-number">42.3.</span> <span class="toc-text">3.将员工的姓名按首字母排序，并写出姓名的长度（length）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5id-last-name-salary%EF%BC%8C%E5%B9%B6%E4%BD%9C%E4%B8%BA%E4%B8%80%E4%B8%AA%E5%88%97%E8%BE%93%E5%87%BA%EF%BC%8C%E5%88%AB%E5%90%8D%E4%B8%BAOUT-PUT"><span class="toc-number">42.4.</span> <span class="toc-text">4.查询员工id,last_name,salary，并作为一个列输出，别名为OUT_PUT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%9F%A5%E8%AF%A2%E5%85%AC%E5%8F%B8%E5%90%84%E5%91%98%E5%B7%A5%E5%B7%A5%E4%BD%9C%E7%9A%84%E5%B9%B4%E6%95%B0%E3%80%81%E5%B7%A5%E4%BD%9C%E7%9A%84%E5%A4%A9%E6%95%B0%EF%BC%8C%E5%B9%B6%E6%8C%89%E5%B7%A5%E4%BD%9C%E5%B9%B4%E6%95%B0%E7%9A%84%E9%99%8D%E5%BA%8F%E6%8E%92%E5%BA%8F"><span class="toc-number">42.5.</span> <span class="toc-text">5.查询公司各员工工作的年数、工作的天数，并按工作年数的降序排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E5%A7%93%E5%90%8D%EF%BC%8Chire-date-department-id%EF%BC%8C%E6%BB%A1%E8%B6%B3%E4%BB%A5%E4%B8%8B%E6%9D%A1%E4%BB%B6%EF%BC%9A%E9%9B%87%E7%94%A8%E6%97%B6%E9%97%B4%E5%9C%A81997%E5%B9%B4%E4%B9%8B%E5%90%8E%EF%BC%8Cdepartment-id-%E4%B8%BA80-%E6%88%96-90-%E6%88%96110-commission-pct%E4%B8%8D%E4%B8%BA%E7%A9%BA"><span class="toc-number">42.6.</span> <span class="toc-text">6.查询员工姓名，hire_date , department_id，满足以下条件：雇用时间在1997年之后，department_id 为80 或 90 或110, commission_pct不为空</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%9F%A5%E8%AF%A2%E5%85%AC%E5%8F%B8%E4%B8%AD%E5%85%A5%E8%81%8C%E8%B6%85%E8%BF%8710000%E5%A4%A9%E7%9A%84%E5%91%98%E5%B7%A5%E5%A7%93%E5%90%8D%E3%80%81%E5%85%A5%E8%81%8C%E6%97%B6%E9%97%B4"><span class="toc-number">42.7.</span> <span class="toc-text">7.查询公司中入职超过10000天的员工姓名、入职时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E6%A0%B9%E6%8D%AE%E4%B8%8D%E5%90%8C%E7%9A%84%E5%B7%A5%E7%A7%8D%E6%89%93%E5%8D%B0%E5%87%BA%E4%B8%8D%E5%90%8C%E7%9A%84%E7%AD%89%E7%BA%A7"><span class="toc-number">42.8.</span> <span class="toc-text">8.根据不同的工种打印出不同的等级</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">43.</span> <span class="toc-text">聚合函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AVG-%E6%B1%82%E5%B9%B3%E5%9D%87%E5%80%BC"><span class="toc-number">43.1.</span> <span class="toc-text">AVG 求平均值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SUM-%E6%B1%82%E6%80%BB%E5%92%8C"><span class="toc-number">43.2.</span> <span class="toc-text">SUM 求总和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MAX-%E6%9C%80%E5%A4%A7%E5%80%BC"><span class="toc-number">43.3.</span> <span class="toc-text">MAX 最大值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MIN-%E6%9C%80%E5%B0%8F%E5%80%BC"><span class="toc-number">43.4.</span> <span class="toc-text">MIN 最小值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#COUNT-%E8%AE%A1%E7%AE%97%E6%80%BB%E5%92%8C"><span class="toc-number">43.5.</span> <span class="toc-text">COUNT 计算总和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GROUP-BY-%E5%88%86%E7%BB%84"><span class="toc-number">43.6.</span> <span class="toc-text">GROUP BY 分组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HAVING-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">43.7.</span> <span class="toc-text">HAVING 的使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E7%BB%83%E4%B9%A0"><span class="toc-number">44.</span> <span class="toc-text">聚合函数练习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-where%E5%AD%90%E5%8F%A5%E5%8F%AF%E5%90%A6%E4%BD%BF%E7%94%A8%E7%BB%84%E5%87%BD%E6%95%B0%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4"><span class="toc-number">44.1.</span> <span class="toc-text">1.where子句可否使用组函数进行过滤?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9F%A5%E8%AF%A2%E5%85%AC%E5%8F%B8%E5%91%98%E5%B7%A5%E5%B7%A5%E8%B5%84%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC%EF%BC%8C%E6%9C%80%E5%B0%8F%E5%80%BC%EF%BC%8C%E5%B9%B3%E5%9D%87%E5%80%BC%EF%BC%8C%E6%80%BB%E5%92%8C"><span class="toc-number">44.2.</span> <span class="toc-text">2.查询公司员工工资的最大值，最小值，平均值，总和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%9F%A5%E8%AF%A2%E5%90%84job-id%E7%9A%84%E5%91%98%E5%B7%A5%E5%B7%A5%E8%B5%84%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC%EF%BC%8C%E6%9C%80%E5%B0%8F%E5%80%BC%EF%BC%8C%E5%B9%B3%E5%9D%87%E5%80%BC%EF%BC%8C%E6%80%BB%E5%92%8C"><span class="toc-number">44.3.</span> <span class="toc-text">3.查询各job_id的员工工资的最大值，最小值，平均值，总和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9F%A5%E8%AF%A2%E5%90%84%E4%B8%AAjob-id%E4%B8%8B%E7%9A%84%E5%91%98%E5%B7%A5%E4%BA%BA%E6%95%B0"><span class="toc-number">44.4.</span> <span class="toc-text">4.查询各个job_id下的员工人数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E6%9C%80%E9%AB%98%E5%B7%A5%E8%B5%84%E5%92%8C%E6%9C%80%E4%BD%8E%E5%B7%A5%E8%B5%84%E7%9A%84%E5%B7%AE%E8%B7%9D%EF%BC%88DIFFERENCE%EF%BC%89"><span class="toc-number">44.5.</span> <span class="toc-text">5.查询员工最高工资和最低工资的差距（DIFFERENCE）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%9F%A5%E8%AF%A2%E5%90%84%E4%B8%AA%E7%AE%A1%E7%90%86%E8%80%85%E6%89%8B%E4%B8%8B%E5%91%98%E5%B7%A5%E7%9A%84%E6%9C%80%E4%BD%8E%E5%B7%A5%E8%B5%84%EF%BC%8C%E5%85%B6%E4%B8%AD%E6%9C%80%E4%BD%8E%E5%B7%A5%E8%B5%84%E4%B8%8D%E8%83%BD%E4%BD%8E%E4%BA%8E6000%EF%BC%8C%E6%B2%A1%E6%9C%89%E7%AE%A1%E7%90%86%E8%80%85%E7%9A%84%E5%91%98%E5%B7%A5%E4%B8%8D%E8%AE%A1%E7%AE%97%E5%9C%A8%E5%86%85"><span class="toc-number">44.6.</span> <span class="toc-text">6.查询各个管理者手下员工的最低工资，其中最低工资不能低于6000，没有管理者的员工不计算在内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E9%83%A8%E9%97%A8%E7%9A%84%E5%90%8D%E5%AD%97%EF%BC%8Clocation-id%EF%BC%8C%E5%91%98%E5%B7%A5%E6%95%B0%E9%87%8F%E5%92%8C%E5%B9%B3%E5%9D%87%E5%B7%A5%E8%B5%84%EF%BC%8C%E5%B9%B6%E6%8C%89%E5%B9%B3%E5%9D%87%E5%B7%A5%E8%B5%84%E9%99%8D%E5%BA%8F"><span class="toc-number">44.7.</span> <span class="toc-text">7.查询所有部门的名字，location_id，员工数量和平均工资，并按平均工资降序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E6%9F%A5%E8%AF%A2%E6%AF%8F%E4%B8%AA%E5%B7%A5%E7%A7%8D%E3%80%81%E6%AF%8F%E4%B8%AA%E9%83%A8%E9%97%A8%E7%9A%84%E9%83%A8%E9%97%A8%E5%90%8D%E3%80%81%E5%B7%A5%E7%A7%8D%E5%90%8D%E5%92%8C%E6%9C%80%E4%BD%8E%E5%B7%A5%E8%B5%84"><span class="toc-number">44.8.</span> <span class="toc-text">8.查询每个工种、每个部门的部门名、工种名和最低工资</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">45.</span> <span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">45.1.</span> <span class="toc-text">子查询的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">45.2.</span> <span class="toc-text">引入子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">45.3.</span> <span class="toc-text">单行子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">45.4.</span> <span class="toc-text">多行子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">45.5.</span> <span class="toc-text">相关子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EXISTS-%E4%B8%8E-NOT-EXISTS%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">45.6.</span> <span class="toc-text">EXISTS 与 NOT EXISTS关键字</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%BB%83%E4%B9%A0"><span class="toc-number">46.</span> <span class="toc-text">子查询练习</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/Vue/node+vue%E5%AE%9E%E7%8E%B0%E7%BE%A4%E8%81%8A%E5%8A%9F%E8%83%BD/" title="使用node+prisma和vue3实现一个群聊功能"><img data-lazy-src="/images/ys02.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用node+prisma和vue3实现一个群聊功能"/></a><div class="content"><a class="title" href="/Vue/node+vue%E5%AE%9E%E7%8E%B0%E7%BE%A4%E8%81%8A%E5%8A%9F%E8%83%BD/" title="使用node+prisma和vue3实现一个群聊功能">使用node+prisma和vue3实现一个群聊功能</a><time datetime="2024-10-09T02:30:49.000Z" title="发表于 2024-10-09 10:30:49">2024-10-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Vue/%E4%B8%80%E4%B8%AA%E4%BC%98%E9%9B%85%E7%9A%84%E8%BD%AE%E5%BE%AA%E4%BB%A3%E7%A0%81/" title="一个优雅的轮循代码"><img data-lazy-src="/images/ys13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="一个优雅的轮循代码"/></a><div class="content"><a class="title" href="/Vue/%E4%B8%80%E4%B8%AA%E4%BC%98%E9%9B%85%E7%9A%84%E8%BD%AE%E5%BE%AA%E4%BB%A3%E7%A0%81/" title="一个优雅的轮循代码">一个优雅的轮循代码</a><time datetime="2024-09-22T16:00:00.000Z" title="发表于 2024-09-23 00:00:00">2024-09-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/JavaScript/pm2_linux_nginx/" title="pm2 + linux + nginx"><img data-lazy-src="/images/ys05.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="pm2 + linux + nginx"/></a><div class="content"><a class="title" href="/JavaScript/pm2_linux_nginx/" title="pm2 + linux + nginx">pm2 + linux + nginx</a><time datetime="2024-09-07T16:00:00.000Z" title="发表于 2024-09-08 00:00:00">2024-09-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/JavaScript/scss%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E9%80%9A%E7%94%A8%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2/" title="巧用scss实现一个通用的媒介查询代码"><img data-lazy-src="/images/ys17.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="巧用scss实现一个通用的媒介查询代码"/></a><div class="content"><a class="title" href="/JavaScript/scss%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E9%80%9A%E7%94%A8%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2/" title="巧用scss实现一个通用的媒介查询代码">巧用scss实现一个通用的媒介查询代码</a><time datetime="2024-08-30T16:00:00.000Z" title="发表于 2024-08-31 00:00:00">2024-08-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/JavaScript/Axios%E5%8F%96%E6%B6%88%E8%AF%B7%E6%B1%82/" title="Axios取消请求，以及全局取消请求封装"><img data-lazy-src="/images/ys13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Axios取消请求，以及全局取消请求封装"/></a><div class="content"><a class="title" href="/JavaScript/Axios%E5%8F%96%E6%B6%88%E8%AF%B7%E6%B1%82/" title="Axios取消请求，以及全局取消请求封装">Axios取消请求，以及全局取消请求封装</a><time datetime="2024-08-11T16:00:00.000Z" title="发表于 2024-08-12 00:00:00">2024-08-12</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/images/ys19.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By SZX</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">少年辛苦终身事，莫向光阴惰寸功。<a target="_blank" rel="noopener" href="https://gitee.com/szxio">My Gitee</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/js/instantpage.min.js" type="module"></script><script src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/js/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/js/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'iJzt0X9OdhFCcdn4N0dJ86fY-gzGzoHsz',
      appKey: '8vtaRafgQSvU5ntYgszJfRW5',
      placeholder: '留下你的精彩评论',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/js/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/js/canvas-fluttering-ribbon.min.js"></script><script src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/js/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://szx-bucket1.oss-cn-hangzhou.aliyuncs.com/js/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,自由,平等,公正,法制,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>